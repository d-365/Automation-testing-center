{"version":3,"sources":["webpack:///./node_modules/core-js/internals/engine-ff-version.js","webpack:///./src/components/common/echarts/myEcharts.vue?fc0e","webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./node_modules/core-js/internals/engine-webkit-version.js","webpack:///./src/views/home.vue","webpack:///./src/components/common/myCard.vue","webpack:///./src/components/common/myCard.vue?664b","webpack:///./src/components/common/echarts/myEcharts.vue","webpack:///./node_modules/echarts/lib/component/dataZoom/helper.js","webpack:///./node_modules/echarts/lib/component/dataZoom/DataZoomModel.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","webpack:///./node_modules/echarts/lib/component/dataZoom/DataZoomView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","webpack:///./node_modules/echarts/lib/component/helper/sliderMove.js","webpack:///./node_modules/echarts/lib/component/dataZoom/AxisProxy.js","webpack:///./node_modules/echarts/lib/component/dataZoom/dataZoomProcessor.js","webpack:///./node_modules/echarts/lib/component/dataZoom/dataZoomAction.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installCommon.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installDataZoomSelect.js","webpack:///./node_modules/echarts/lib/component/toolbox/featureManager.js","webpack:///./node_modules/echarts/lib/component/toolbox/ToolboxModel.js","webpack:///./node_modules/echarts/lib/component/toolbox/ToolboxView.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/MagicType.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/DataView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/history.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/Restore.js","webpack:///./node_modules/echarts/lib/component/helper/interactionMutex.js","webpack:///./node_modules/echarts/lib/component/helper/BrushController.js","webpack:///./node_modules/echarts/lib/component/helper/cursorHelper.js","webpack:///./node_modules/echarts/lib/component/helper/brushHelper.js","webpack:///./node_modules/echarts/lib/component/helper/BrushTargetManager.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","webpack:///./node_modules/echarts/lib/component/toolbox/install.js","webpack:///./node_modules/echarts/lib/coord/cartesian/GridModel.js","webpack:///./node_modules/echarts/lib/coord/cartesian/AxisModel.js","webpack:///./node_modules/echarts/lib/coord/axisDefault.js","webpack:///./node_modules/echarts/lib/coord/axisCommonTypes.js","webpack:///./node_modules/echarts/lib/coord/axisModelCreator.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Axis2D.js","webpack:///./node_modules/echarts/lib/coord/axisAlignTicks.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Grid.js","webpack:///./node_modules/echarts/lib/component/axis/axisSplitHelper.js","webpack:///./node_modules/echarts/lib/component/axis/CartesianAxisView.js","webpack:///./node_modules/echarts/lib/component/grid/installSimple.js","webpack:///./node_modules/echarts/lib/component/grid/install.js","webpack:///./node_modules/echarts/lib/processor/dataSample.js","webpack:///./node_modules/echarts/lib/chart/bar/BaseBarSeries.js","webpack:///./node_modules/echarts/lib/chart/bar/BarSeries.js","webpack:///./node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","webpack:///./node_modules/echarts/lib/util/shape/sausage.js","webpack:///./node_modules/echarts/lib/coord/CoordinateSystem.js","webpack:///./node_modules/echarts/lib/chart/helper/labelHelper.js","webpack:///./node_modules/echarts/lib/label/sectorLabel.js","webpack:///./node_modules/echarts/lib/chart/bar/BarView.js","webpack:///./node_modules/echarts/lib/chart/bar/install.js","webpack:///./node_modules/echarts/lib/chart/line/LineSeries.js","webpack:///./node_modules/echarts/lib/chart/helper/Symbol.js","webpack:///./node_modules/echarts/lib/chart/helper/SymbolDraw.js","webpack:///./node_modules/echarts/lib/chart/line/helper.js","webpack:///./node_modules/echarts/lib/chart/line/lineAnimationDiff.js","webpack:///./node_modules/echarts/lib/chart/line/poly.js","webpack:///./node_modules/echarts/lib/chart/line/LineView.js","webpack:///./node_modules/echarts/lib/layout/points.js","webpack:///./node_modules/echarts/lib/chart/line/install.js","webpack:///./node_modules/zrender/lib/tool/convertPath.js","webpack:///./node_modules/zrender/lib/tool/dividePath.js","webpack:///./node_modules/zrender/lib/tool/morphPath.js","webpack:///./node_modules/echarts/lib/animation/morphTransitionHelper.js","webpack:///./node_modules/echarts/lib/animation/universalTransition.js","webpack:///./src/components/common/echarts/myEcharts.vue?42f1","webpack:///./src/views/home.vue?f8b7","webpack:///./src/components/common/myCard.vue?270e","webpack:///./node_modules/core-js/internals/engine-is-ie-or-edge.js","webpack:///./src/views/home.vue?1ea4"],"names":["userAgent","firefox","match","module","exports","$","uncurryThis","aCallable","toObject","lengthOfArrayLike","toString","fails","internalSort","arrayMethodIsStrict","FF","IE_OR_EDGE","V8","WEBKIT","test","un$Sort","sort","push","FAILS_ON_UNDEFINED","undefined","FAILS_ON_NULL","STRICT_METHOD","STABLE_SORT","code","chr","value","index","result","String","fromCharCode","k","v","a","b","length","charAt","FORCED","getSortCompare","comparefn","x","y","target","proto","forced","array","this","itemsLength","items","arrayLength","webkit","class","style","header","body","column","direction","label","apiAutoStatics","apiCount","align","label-class-name","newApiCount","caseCount","newCaseCount","planCount","newPlanCount","clockCount","clockExecCount","successRatio","failedRatio","webAutoStatics","appAutoStatics","showPie","title","legend","apiLegend","xAxisData","xData","yAxis","series","webSeries","shadow","name","__exports__","id","ref","DATA_ZOOM_AXIS_DIMENSIONS","SERIES_COORDS","isCoordSupported","seriesModel","coordType","get","getAxisMainType","axisDim","findEffectedDataZooms","ecModel","payload","foundNewLink","axisRecords","effectedModels","effectedModelMap","eachComponent","mainType","query","dataZoomModel","uid","addToEffected","processSingle","isLinked","dataZoom","set","markAxisControlled","isLink","eachTargetAxis","axisIndex","axisIdxArr","DataZoomAxisInfo","indexList","indexMap","prototype","add","axisCmptIdx","_super","DataZoomModel","_this","apply","arguments","type","_autoThrottle","_noTarget","_rangePropMode","init","option","parentModel","inputRawOption","retrieveRawOption","settledOption","mergeDefaultAndTheme","_doInit","mergeOption","newOption","thisOption","_setDefaultThrottle","_updateRangeUse","names","_resetTarget","optionOrient","targetAxisIndexMap","_targetAxisInfoMap","hasAxisSpecified","_fillSpecifiedTargetAxis","_orient","_makeAutoOrientByTargetAxis","_fillAutoTargetAxisByOrient","each","axisInfo","refering","getReferringComponents","specified","models","axisModel","componentIndex","orient","needAuto","axisModels","findComponents","setParallelAxis","filter","gridModel_1","axModel","dim","hasOwnProperty","globalOption","throttle","animation","animationDurationUpdate","rangePropMode","rangeModeInOption","percentSpecified","valueSpecified","noTarget","getFirstTargetAxisModel","firstAxisModel","getComponent","callback","context","call","getAxisProxy","getAxisModel","__dzAxisProxy","setRawRange","opt","setCalculatedRange","getPercentRange","axisProxy","findRepresentativeAxisProxy","getDataPercentWindow","getValueRange","getDataValueWindow","firstProxy","axisDimList","keys","i","j","proxy","hostedBy","getRangePropMode","slice","getOrient","dependencies","defaultOption","z","filterMode","start","end","Component","ret","SelectDataZoomModel","DataZoomView","render","api","SelectDataZoomView","sliderMove","delta","handleEnds","extent","handleIndex","minSpan","maxSpan","extentSpan","restrict","Math","max","handleSpan","abs","originalDistSign","getSpanSign","currDistSign","extentMinSpan","realExtent","sign","span","dist","extend","min","Infinity","asc","number","AxisProxy","dimName","_dimName","_axisIndex","_dataZoomModel","_valueWindow","_percentWindow","getTargetSeriesModels","seriesModels","eachSeries","axisMainType","getMinMaxSpan","_minMaxSpan","calculateDataWindow","hasPropModeValue","dataExtent","_dataExtent","scale","axis","percentExtent","percentWindow","valueWindow","prop","idx","boundPercent","boundValue","parse","spans","restrictSet","fromWindow","toWindow","fromExtent","toExtent","toValue","suffix","reset","targetSeries","calculateDataExtent","_updateMinMaxSpan","dataWindow","_setAxisModel","filterData","seriesData","getData","dataDims","mapDimensionsAll","store_1","getStore","dataDimIndices_1","getDimensionIndex","filterSelf","dataIndex","leftOut","rightOut","hasValue","thisHasValue","isNaN","thisLeftOut","thisRightOut","setData","map","isInWindow","NaN","range","selectRange","setApproximateExtent","minMaxSpan","minMax","percentSpan","valueSpan","precision","rawExtentInfo","setDeterminedMinMax","toFixed","freeze","rawExtentResult","calculate","dataZoomProcessor","getTargetSeries","eachAxisModel","cb","proxyList","seriesModelMap","overallReset","percentRange","valueRange","startValue","endValue","installDataZoomAction","registers","registerAction","installed","installCommon","registerProcessor","PRIORITY","PROCESSOR","FILTER","registerSubTypeDefaulter","registerComponentModel","SelectZoomModel","registerComponentView","SelectZoomView","ToolboxFeature","registerFeature","ctor","getFeature","ToolboxModel","optionUpdated","feature","featureOpt","featureName","Feature","getDefaultOption","layoutMode","ignoreSize","show","left","top","backgroundColor","borderColor","borderRadius","borderWidth","padding","itemSize","itemGap","showTitle","iconStyle","color","emphasis","tooltip","position","ToolboxView","toolboxModel","group","removeAll","featureOpts","features","_features","featureNames","DataDiffer","_featureNames","processFeature","update","remove","execute","listComponent","getBoundingRect","eachChild","icon","titleText","__title","emphasisState","ensureState","emphasisTextConfig","textConfig","textContent","getTextContent","emphasisTextState","states","emphasisTextStyle","rect","makeFont","offsetX","offsetY","needPutOnTop","height","getHeight","topOffset","width","getWidth","newIndex","oldIndex","oldName","featureModel","Model","newTitle","isUserFeatureName","onclick","model","isToolboxFeature","unusable","createIconPaths","setIconStatus","iconName","status","iconPaths","iconStatus","dispose","iconsMap","titlesMap","iconStyleModel","getModel","iconStyleEmphasisModel","icons","getIcons","titles","iconStr","path","graphic","setStyle","getItemStyle","pathEmphasisState","text","fill","ignore","setTextContent","el","componentModel","itemName","formatterParamsExtra","on","hoverStyle","defaultTextPosition","stroke","setTextConfig","hide","updateView","indexOf","SaveAsImage","isSvg","getZr","painter","getType","url","getConnectedDataURL","connectedBackgroundColor","excludeComponents","pixelRatio","browser","env","MouseEvent","newEdge","ie","edge","$a","document","createElement","download","href","evt","view","defaultView","bubbles","cancelable","dispatchEvent","window","navigator","msSaveOrOpenBlob","parts","split","base64Encoded","bstr","decodeURIComponent","atob","filename","n","u8arr","Uint8Array","charCodeAt","blob","Blob","frame","appendChild","cw","contentWindow","doc","open","write","close","focus","execCommand","removeChild","lang","html","tab","getLocaleModel","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","line","bar","stack","seriesIndex","seriesOptGenreator","generateNewSeriesTypes","seriesType","subType","seriesId","newSeriesOpt","coordSys","coordinateSystem","categoryAxis","getAxesByScale","axisType","boundaryGap","radio","item","currentType","tiled","dispatchAction","data","markPoint","markLine","isStack","echarts","event","BLOCK_SPLITER","Array","join","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","eachRawSeries","baseAxis","getBaseAxis","key","valueAxis","getOtherAxis","other","assembleSeriesWithCategoryAxis","groups","tables","valueAxisDim","headers","concat","columns","getCategories","rawData","getRawData","mapArray","mapDimension","val","lines","assembleOtherSeries","vals","dimensions","argLen","getName","getContentFromModel","str","replace","trim","isTSVFormat","block","firstLine","itemSplitRegex","RegExp","parseTSVContents","tsv","tsvLines","shift","categories","parseListContents","seriesName","name_1","hasName","parseContents","blockMetaList","blocks","blockMeta","axisKey","DataView","container","getDom","_dom","root","cssText","innerHTML","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","getOption","readOnly","buttonContainer","buttonStyle","closeButton","refreshButton","self","e","Error","clientHeight","textColor","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","tryMergeDataOption","newData","originalData","newVal","original","newValIsObject","shouldDeleteName","newSeriesOptList","seriesOpt","getSeriesByName","inner","newSnapshot","storedSnapshots","getStoreSnapshots","batchItem","dataZoomId","snapshot","queryComponents","pop","head","clear","snapshots","store","RestoreOption","from","resetOption","Restore","ATTR","take","zr","resourceKey","userKey","release","uKey","BRUSH_PANEL_GLOBAL","mathMin","mathMax","mathPow","pow","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","w","s","CURSOR_MAP","ne","sw","nw","se","DEFAULT_BRUSH_OPT","brushStyle","lineWidth","transformable","brushMode","removeOnClick","baseUID","BrushController","_track","_covers","_handlers","_zr","_uid","pointerHandlers","handler","eventName","enableBrush","brushOption","_brushType","_doDisableBrush","brushType","_doEnableBrush","_enableGlobalPan","_brushOption","off","setPanels","panelOpts","panels_1","_panels","panelId","mount","enableGlobalPan","thisGroup","attr","rotation","scaleX","scaleY","_transform","getLocalTransform","updateCovers","coverConfigList","coverConfig","tmpIdPrefix","oldCovers","newCovers","controller","creatingCover","_creatingCover","oldGetKey","getKey","addOrUpdate","cover","__brushOption","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","unmount","clearCovers","Eventful","coverRenderers","updateZ","coverRenderer","getCoverRenderer","updateCoverShape","traverse","z2","updateCommon","getPanelByPoint","localCursorPoint","panel","panels","transform","pn","isTargetByCursor","getPanelByCover","covers","originalLength","trigger","areas","isEnd","shouldShowCover","track","p2","p1","dx","dy","getTrackEnds","tail","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","silent","draggable","cursor","drift","driftRect","ondragend","nameSequence","opacity","invisible","updateBaseRect","localRange","handleSize","xa","ya","x2","y2","x2a","y2a","widtha","heighta","updateRectShape","mainEl","childAt","useStyle","childOfName","globalDir","getGlobalDirection1","getGlobalDirection2","h","setShape","pointsToRect","clipByPanel","strokeNoScale","formatRectRange","getTransform","localDirName","inverseMap","right","bottom","dir","localDirNameSeq","reverse","dirNameSequence","rectRange","toRectRange","localDelta","toLocalDelta","dirName","ind","fromRectRange","driftPolygon","point","localD","transformCoordToLocal","localZero","clipPath","points","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","_dragging","contain","setCursorStyle","preventDefault","rawE","mainShapeContain","updateCoverByMouse","eventParams","_creatingPanel","thisBrushOption","determineBrushType","coverBrushOption","getCreatingRange","defaultBrushType","mousedown","handleDragEnd","mousemove","mouseup","lineX","getLineRenderer","lineY","returnInput","localTrack","ends","polygon","xyIndex","otherExtent","getLinearBrushOtherExtent","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetCoordSysModel","getComponentByElement","topTarget","makeRectPanelClipPath","normalizeRect","localPoints","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","base","makeRectIsTargetByCursor","targetModel","boundingRect","BoundingRect","create","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","finder","_targetInfoList","foundCpts","parseFinder","targetInfoBuilders","builder","include","setOutputRanges","matchOutputRanges","area","coordRange","coordRanges","coordConvert","__rangeOffset","offset","diffProcessor","values","xyMinMax","targetInfo","findTargetInfo","coordSyses","setInputRanges","rangeOffset","getScales","makePanelOpts","getDefaultBrushType","getPanelRect","coordSysModel","controlSeries","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","includeMainTypes","grid","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","gridModel","cartesians","getCartesians","cartesian","getAxis","panelRectBuilders","xAxisDeclared","yAxisDeclared","geo","geoModels","geoModel","xAxisModel","yAxisModel","master","getRect","clone","applyTransform","axisConvert","to","rangeOrCoordRange","clamp","xminymin","pointToData","dataToPoint","xmaxymax","p","axisNameIndex","coordToData","toLocalCoord","toGlobalCoord","dataToCoord","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","getSize","sizeOrigin","DATA_ZOOM_ID_BASE","DataZoomFeature","_brushController","_onBrush","updateZoomBtnStatus","updateBackBtnStatus","handlers","eventParam","brushTargetManager","makeAxisFinder","setBatch","_dispatchZoomAction","findDataZoom","minValueSpan","maxValueSpan","getExtent","found","dzModel","has","batch","zoom","back","nextActive","_isZoomActive","dataZoomSelectActive","dzFeatureModel","setting","xAxisIndex","yAxisIndex","xAxisId","yAxisId","zoomActive","featureDataZoomPath","dzOptions","finderResult","buildInternalOptions","axisIndexPropName","newOpt","$fromToolbox","DataZoom","GridModel","containLabel","CartesianAxisModel","getCoordSysModel","inverse","nameLocation","nameRotate","nameTruncate","maxWidth","ellipsis","placeholder","nameTextStyle","nameGap","triggerEvent","axisPointer","axisLine","onZero","onZeroAxisIndex","lineStyle","symbol","symbolSize","axisTick","inside","axisLabel","rotate","showMinLabel","showMaxLabel","margin","fontSize","splitLine","splitArea","areaStyle","deduplication","alignWithLabel","interval","splitNumber","minorTick","minorSplitLine","timeAxis","rich","primary","fontWeight","logAxis","logBase","category","time","log","AXIS_TYPES","axisModelCreator","axisName","BaseAxisModelClass","extraDefaultOption","axisDefault","AxisModel","inputPositionParams","themeModel","getTheme","getAxisType","__ordinalMeta","OrdinalMeta","createByAxisModel","getOrdinalMeta","Cartesian","_dimList","_axes","getAxes","scaleType","toLowerCase","addAxis","cartesian2DDimensions","canCalculateAffineTransform","Cartesian2D","calcAffineTransform","_invTransform","xAxisScale","yAxisScale","xScaleExtent","yScaleExtent","xScaleSpan","yScaleSpan","translateX","translateY","m","containPoint","axisX","axisY","containData","out","xVal","yVal","isFinite","xAxis","clampData","xScale","yScale","xAxisExtent","yAxisExtent","getArea","xExtent","getGlobalExtent","yExtent","Axis2D","coordExtent","isHorizontal","setCategorySortInfo","info","categorySortInfo","setSortInfo","Axis","mathLog","alignScaleTicks","alignToScale","intervalScaleProto","Interval","alignToTicks","getTicks","alignToNicedTicks","alignToSplitNumber","alignToInterval","getInterval","scaleExtent","rawExtent","isMinFixed","fixMin","isMaxFixed","fixMax","setExtent","calcNiceExtent","nicedSplitNumber","ceil","t0","t1","setInterval","setNiceExtent","Grid","_coordsMap","_coordsList","_axesMap","_axesList","axisPointerEnabled","_initCartesian","_rect","axesMap","updateAxisTicks","axes","alignTo","axesIndices","len","axisNeedsAlign","_updateScale","onZeroRecords","fixAxisOnZero","resize","ignoreContainLabel","boxLayoutParams","getBoxLayoutParams","isContainLabel","gridRect","axesList","adjustAxes","updateAxisTransform","labelUnionRect","coord","axesMapOnDim","getCartesian","coordList","convertToPixel","_findConvertTarget","convertFromPixel","coordsList","axisPositionUsed","axesCount","createAxisCreator","isAxisUsedInTheGrid","axisPosition","isCategory","onBand","unionExtent","unionExtentFromData","axesModelMap","getTooltipAxes","baseAxes","otherAxes","otherAxis","grids","otherAxisDim","getAxesOnZeroOf","otherAxisOnZeroOf","canOnZeroToAxis","getOnZeroRecordKey","coordBase","axisExtent","axisExtentSum","rectCoordAxisBuildSplitArea","axisView","axisGroup","isBlank","splitAreaModel","areaStyleModel","areaColors","ticksCoords","getTicksCoords","tickModel","areaColorsLen","lastSplitAreaColors","splitAreaColors","newSplitAreaColors","colorIndex","cIndex","tickValue","prev","getAreaStyle","tickCoord","anid","shape","autoBatch","rectCoordAxisHandleRemove","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","axisPointerClass","oldAxisGroup","_axisGroup","layout","cartesianAxisHelper","axisBuilder","AxisBuilder","handleAutoShown","elementType","getGroup","axisElementBuilders","isInitialSortFromBarRacing","isInitSort","AxisView","splitLineModel","lineStyleModel","lineColors","lineCount","getLineStyle","subPixelOptimize","x1","y1","minorSplitLineModel","minorTicksCoords","getMinorTicksCoords","CartesianXAxisView","CartesianYAxisView","GridView","Rect","extraOption","registerCoordinateSystem","registerPreprocessor","samplers","average","sum","count","nearest","indexSampler","round","dataSample","sampling","dpr","getDevicePixelRatio","size","rate","lttbDownSample","sampler","downSample","BaseBarSeriesModel","getInitialData","createSeriesData","useEncodeDefaulter","getMarkerPosition","pt","getLayout","offsetIndex","legendHoverLink","barMinHeight","barMinAngle","large","largeThreshold","progressive","progressiveChunkMode","Series","registerClass","BaseBarSeries","BarSeriesModel","createInvertedIndices","getProgressive","getProgressiveThreshold","progressiveThreshold","brushSelector","selectors","getItemLayout","clip","roundCap","showBackground","backgroundStyle","borderType","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","select","itemStyle","realtimeSort","BarSeries","createGridClipPath","hasAnimation","done","during","floor","isAxisInversed","duringCb","percent","createPolarClipPath","polar","sectorArea","r0","r","cx","cy","startAngle","endAngle","clockwise","isRadial","createClipPath","SausageShape","PI","SausagePath","opts","getDefaultShape","buildPath","ctx","dr","rCenter","PI2","lessThanCircle","unitStartX","cos","unitStartY","sin","unitEndX","unitEndY","moveTo","arc","Path","isCoordinateSystemType","getDefaultLabel","labelDims","rawVal","getDefaultInterpolatedLabel","interpolatedValue","dimIndex","createSectorCalculateTextPosition","positionMapping","isRoundCap","textPosition","mappedSectorPosition","distance","sector","middleR","middleAngle","extraDist","mathCos","mathSin","textAlign","textVerticalAlign","adjustAngleDistanceX","adjustAngleDistanceY","verticalAlign","setSectorTextRotation","rotateType","anchorAngle","angle","getClipArea","coordSysClipArea","expandWidth","BarView","_isFirstFrame","_model","_removeOnRenderedListener","_updateDrawMode","coordinateSystemType","_progressiveEls","_isLargeDraw","_renderLarge","_renderNormal","incrementalPrepareRender","_clear","_updateLargeClip","incrementalRender","params","_incrementalRenderLarge","eachRendered","isLargeDraw","pipelineContext","isHorizontalOrRadial","oldData","_data","animationModel","isAnimationEnabled","realtimeSortCfg","shouldRealtimeSort","_enableRealtimeSort","needsClip","removeClipPath","drawBackground","backgroundModel","barBorderRadius","bgEls","oldBgEls","_backgroundEls","isChangeOrder","createBackground","bgLayout","bgEl","createBackgroundEl","diff","itemModel","getItemModel","isValidLayout","isClipped","elementCreator","forceLabelAnimation","updateStyle","updateRealtimeAnimation","setItemGraphicEl","createBackgroundShape","getItemGraphicEl","textEl","labelInnerStore","prevValue","bgGroup","_backgroundGroup","Group","createLarge","_removeBackground","setClipPath","_dispatchInitSort","orderMapping_1","_onRendered","_updateSortWithinSameData","_dataSort","orderMapping","ordinalNumber","dataIdx","mappedValue","ordinalNumbers","_isOrderChangedWithinSameData","ordinalDataDim","lastValue","Number","MAX_VALUE","tickNum","rawIdx","rawIndexOf","getRawOrdinalNumber","MIN_VALUE","indexOfRawIndex","_isOrderDifferentInView","orderInfo","tickMax","sortInfo","componentType","axisId","sortResult","eachItemGraphicEl","Chart","cartesian2d","coordSysBoundingRect","signWidth","signHeight","coordSysX2","coordSysY2","xClipped","yClipped","signR","tmp","clipped","isUpdate","__dataIndex","rectShape","animateProperty","ShapeClass","Sector","positionMap","createPolarPositionMapping","calculateTextPosition","sectorShape","animateTarget","realtimeSortOption","seriesAnimationModel","seriesTarget","axisTarget","axisAnimationModel","checkPropertiesNotValid","obj","props","rectPropties","polarPropties","fixedLineWidth","getLineWidth","signX","signY","isZeroOnPolar","arcOrAngle","isPolar","getItemVisual","cursorStyle","getShallow","labelPositionOutside","labelStatesModels","labelFetcher","labelDataIndex","defaultText","inheritColor","defaultOpacity","defaultOutsidePosition","getRawValue","emphasisModel","state","rawLayout","LagePathShape","LargePath","baseDimIdx","valueDimIdx","startPoint","barWidth","progressiveEls","incremental","largeDataIndices","bgPoints","getVisual","largePathUpdateDataIndex","largePath","largePathFindDataIndex","ii","coordLayout","ElementClz","registerChartView","registerSeriesModel","registerLayout","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","STATISTIC","LineSeriesModel","hasSymbolVisual","getLegendIcon","itemHeight","itemWidth","visualType","visualRotate","symbolType","symbolRotate","iconRotate","setOrigin","endLabel","valueAnimation","step","smooth","smoothMonotone","showSymbol","showAllSymbol","connectNulls","animationEasing","hoverLayerThreshold","universalTransition","divideShape","triggerLineEvent","LineSeries","Symbol","seriesScope","updateData","_createSymbol","keepAspect","symbolPath","culling","driftSymbol","_symbolType","stopSymbolAnimation","toLastFrame","stopAnimation","getSymbolType","getSymbolPath","highlight","downplay","setZ","zlevel","setDraggable","hostModel","getSymbolSize","isInit","disableAnimation","_updateCommon","_sizeX","_sizeY","_seriesModel","emphasisItemStyle","blurItemStyle","selectItemStyle","blurScope","emphasisDisabled","hoverScale","hasItemOption","symbolOffset","symbolStyle","visualColor","pathStyle","image","__isEmptyBrush","decal","setColor","symbolInnerColor","liftZ","z2Origin","_z2","useNameLabel","getLabelDefaultText","scaleRatio","setSymbolScale","fadeOut","animationOpt","fadeLabel","removeOpt","removeTextContent","parent","symbolNeedsDraw","isIgnore","clipShape","normalizeUpdateOpt","makeSeriesScope","SymbolDraw","SymbolCtor","_SymbolCtor","symbolUpdateOpt","getSymbolPoint","newIdx","symbolEl","setPosition","oldIdx","newSymbolType","oldSymbolType","_getSymbolPoint","updateLayout","markRedraw","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","isGroup","hoverLayer","enableAnimation","prepareDataCoordInfo","valueOrigin","valueStart","getValueStart","baseAxisDim","valueDim","baseDim","baseDataOffset","dims","coordDim","stacked","stackResultDim","getCalculationInfo","dataDimsForPoint","stackedOverDimension","getStackedOnPoint","dataCoordInfo","stackedData","diffData","diffResult","cmd","idx1","lineAnimationDiff","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","currPoints","nextPoints","currStackedPoints","nextStackedPoints","sortedIndices","rawIndices","newDataOldCoordInfo","oldPoints","newPoints","diffItem","pointAdded","oldIdx2","newIdx2","currentX","currentY","nextX","nextY","getRawIndex","newDataDimsForPoint","oldPt","stackedOnPoint","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","i2","idx2","current","next","stackedOnCurrent","stackedOnNext","isPointNull","drawSegment","segLen","allLen","prevX","prevY","cpx0","cpy0","cpx1","cpy1","nextIdx","tmpK","ratioNextSeg","vx","vy","nextCpx0","nextCpy0","dx0","dx1","dy0","dy1","lenPrevSeg","lenNextSeg","dir_1","dir_2","sqrt","bezierCurveTo","lineTo","ECPolylineShape","smoothConstraint","ECPolyline","getDefaultStyle","getPointOn","xOrY","createPathProxy","x0","y0","CMD","PathProxy","isDimX","roots","x3","y3","t","M","L","C","nRoot","i_1","t_1","ECPolygonShape","ECPolygon","stackedOnPoints","stackedOnSmooth","closePath","isPointsSame","points1","points2","bboxFromPoints","minX","minY","maxX","maxY","getBoundingDiff","_a","min1","max1","_b","min2","max2","getSmooth","getStackedOnPoints","turnPointsIntoStep","stepTurnAt","baseIndex","stepPoints","stepPt","nextPt","middle","stepPt2","clipColorStops","colorStops","maxSize","prevOutOfRangeColorStop","prevInRangeColorStop","newColorStops","lerpStop","stop0","stop1","clippedCoord","coord0","stop_1","getVisualGradient","visualMetaList","visualMeta","dimInfo","getDimensionInfo","dimension","stops","stop","stopLen","outerColors","colorStopsInRange","inRangeStopLen","tinyExtent","minCoord","maxCoord","coordSpan","unshift","gradient","getIsIgnoreFunc","isAuto","canShowAllSymbolForCategory","categoryDataDim","labelMap","getViewLabels","labelItem","availSize","dataLen","getLastIndexNotNull","getPointAtIndex","getIndexRange","dimIdx","prevIndex","nextIndex","anyStateShowEndLabel","createLineClipPath","lineView","endLabelModel_1","valueAnimation_1","data_1","labelAnimationRecord_1","lastFrameIndex","clipRect","_endLabelOnDuring","_endLabel","originalX","originalY","expandSize","getEndLabelStateSpecified","endLabelModel","isBaseInversed","normal","LineView","lineGroup","symbolDraw","_symbolDraw","_lineGroup","isCoordSysPolar","prevCoordSys","_coordSys","polyline","_polyline","_polygon","isAreaChart","isEmpty","isIgnoreFunc","__temp","clipShapeForSymbol","_clipShapeForSymbol","_step","_newPolygon","_initOrUpdateEndLabel","oldClipPath","getClipPath","newClipPath","_stackedOnPoints","_points","_doUpdateAnimation","_initSymbolLabelAnimation","_newPolyline","lineJoin","emphasisLineStyle","getState","stackedOnSeries","changePolyState","toState","_changePolyState","onHoverStateChange","_valueOrigin","packEventData","eventData","componentSubType","symbolLabel","segmentIgnoreThreshold","isAxisInverse","seriesDuration","seriesDalay","seriesDalayValue","polarClip","pointToCoord","gridClip","ratio","delay","animateTo","duration","setToFinal","animateFrom","disableLabelAnimation","data_2","ignoreClip","enableTextSetter","animationRecord","distanceX","distanceY","dataIndexRange","indices","setLabelText","__points","updatedDataInfo","diffStatus","ptIdx","animators","dirtyShape","pointsLayout","forceStoreInTypedArray","plan","createRenderPlanner","useTypedArray","dimLen","dimIdx0","dimIdx1","progress","segCount","tmpIn","tmpOut","setItemLayout","setLayout","registerVisual","setVisual","aroundEqual","pathToBezierCurves","currentSubpath","bezierArrayGroups","xi","yi","createNewSubpath","addLine","addArc","rx","ry","tan","c1","s1","c2","s2","x4","y4","hx","hy","isFirst","Q","A","anticlockwise","nextAngle","R","Z","adpativeBezier","PIXEL_DISTANCE","PIXEL_DISTANCE_SQR","d","dx2","dy2","cp1LenSqr","cp2LenSqr","projLen1","projLen2","d1Sqr","d2Sqr","tmpSegX","tmpSegY","pathToPolygons","polygons","beziers","getDividingGrids","dimSize","rowDim","rowSize","columnSize","rowCount","columnCount","currentCount","remained","divideSector","outShapes","arcLen","deltaR","isAngleRow","row","newShape","divideRect","isHorizontalRow","rowSizeDim","columnSizeDim","columnDim","crossProduct2d","lineLineIntersect","a1x","a1y","a2x","a2y","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","b1a1x","b1a1y","Point","projPtOnLine","lineA","lineB","sub","normalize","dir2","dot","addToPoly","poly","last","splitPolygonByLine","intersections","p0","intersectionPt","projPt","splitPt0","splitPt1","splitPt0Arr","splitPt1Arr","newPolyA","newPolyB","binaryDividePolygon","polygonShape","pt0","pt1","binaryDivideRecursive","divider","mid","paths","copyPathProps","source","polygonConvert","OutShapeCtor","getComputedTransform","getUpdatedPathProxy","polygonCount","totalArea_1","selfCount","Polygon","subPath","alignSubpath","subpath1","subpath2","len1","len2","shorterPath","shorterLen","shorterBezierCount","eachCurveSubDivCount","newSubpath","actualSubDivCount","createSubpath","lastSubpathSubpath","otherSubpath","lastX","lastY","alignBezierCurves","array1","array2","lastSubpath1","lastSubpath2","newArray1","newArray2","newSubpath1","newSubpath2","centroid","signedArea","findBestRingOffset","fromSubBeziers","toSubBeziers","fromCp","toCp","bezierCount","bestScore","bestOffset","cursorOffset","score","newArr","findBestMorphingRotation","fromArr","toArr","searchAngleIteration","searchAngleRange","fromNeedsReverse","fromSubpathBezier","toSubpathBezier","newFromSubpathBezier","newToSubpathBezier","bestAngle","tmpArr","sa","ca","newX1","newY1","isCombineMorphing","__isCombineMorphing","SAVED_METHOD_PREFIX","saveAndModifyMethod","methodName","modifiers","savedMethodName","originalMethod","after","before","res","args","restoreMethod","applyTransformOnBeziers","bezierCurves","mm","subBeziers","prepareMorphPath","fromPath","toPath","fromPathProxy","toPathProxy","fromBezierCurves","toBezierCurves","fromPathTransform","toPathTransform","updateIdentityTransform","morphingData","__morphT","onet","newCp","x0_1","y0_1","morphPath","animationOpts","oldDone","oldDuring","restoreToPath","hilbert","bits","sortPaths","pathList","xMin","yMin","xMax","yMax","cps","cp","defaultDividePath","param","createEmptyReturn","fromIndividuals","toIndividuals","combineMorph","fromList","fromPathList","addFromPath","childrenRef","separateCount","dividePath","toSubPathList","console","error","individualDelay","identityTransform","Transformable","copyTransform","addToSubPathListToZr","addSelfToZr","removeSelfFromZr","toLen","animating_1","eachDone","indivdualAnimationOpts","child","__zr","separateMorph","toPathList","fromLen","setLocalTransform","isMultiple","elements","prepareMorphBatches","one","many","batches","batchCount","moveFrom","pathDividers","approxOpacity","cloned","applyMorphAnimation","animateOtherProps","updateAnimationCfg","animationDelay","animationCfg","Object","assign","fromIsMany","morphBatches","animateCount","animateIndex","morphOneBatch","forceManyOne","batchMany","batchOne","separateAnimationCfg","individualAnimationCfg","batchFrom","batchTo","getPathList","pathList_1","disableMorphing","DATA_COUNT_THRESHOLD","getUniversalTransitionGlobalStore","getGroupIdDimension","otherDims","itemGroupId","flattenDataDiffItems","list","seriesInfo","getIndices","groupDim","divide","fadeInElement","newEl","newSeries","isFrom","removeEl","computedTransform","animateElementStyles","animationConfig","Displayable","oldStyle","isAllIdSame","oldDiffItems","newDiffItems","oldItem","newItem","getId","transitionBetween","oldList","newList","updateMorphingPathProps","rawFrom","rawTo","findKeyDim","oldKeyDim","newKeyDim","hasMorphAnimation","createKeyGetter","isOld","onlyGetId","dataGroupId","keyDim","dimOrdinalMeta","ordinalMeta","itemVal","getRawDataItem","groupId","useId","isElementStillInChart","updateOneToOne","oldEl","updateManyToOne","oldIndices","oldElsList","updateOneToMany","newIndices","newElsList","newSeris","updateManyToMany","getViewOfSeriesModel","getSeriesTransitionKey","seriesKey","convertArraySeriesKeyToString","getDivideShapeFromData","findTransitionSeriesBatches","globalStore","updateBatches","oldDataMap","oldDataMapForSplit","oldSeries","transitionKey","transitionKeyStr","updatedSeries","isUniversalTransitionEnabled","oldSeries_1","oldData_1","querySeries","transitionSeriesFromOpt","transitionOpt","installUniversalTransition","registerUpdateLifecycle","ecMOdel","seriesTransition","transOpt","optionChanged","updateBatches_1","allSeries","getSeries","savedSeries","savedData","use","theme","required","default","formatter","valueFormatter","baseTitle","subtext","textStyle","fontStyle","fontFamily","tempTitle","baseToolbox","dataView","magicType","restore","saveAsImage","titleProperty","toolboxProperty","methods","setEchArt","myChart","$refs","myEchArt","crossStyle","toolbox","setOption","mounted","components","myCard","myEcharts","setup","content","staticHomeData","apiLineChart","webLineChart","load","request","then","loadLine","ApiLineData","apiLine","success","failed","WebLineData","webLine","WebValues","WebCount","WebSuccess","WebFailed","created","UA"],"mappings":"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","file":"static/js/chunk-5e603f8c.3eb871ae.js","sourcesContent":["var userAgent = require('../internals/engine-user-agent');\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./myEcharts.vue?vue&type=style&index=0&id=52b0bf3e&scoped=true&lang=css\"","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar test = [];\nvar un$Sort = uncurryThis(test.sort);\nvar push = uncurryThis(test.push);\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? un$Sort(array) : un$Sort(array, comparefn);\n\n    var items = [];\n    var arrayLength = lengthOfArrayLike(array);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) push(items, array[index]);\n    }\n\n    internalSort(items, getSortCompare(comparefn));\n\n    itemsLength = items.length;\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) delete array[index++];\n\n    return array;\n  }\n});\n","var userAgent = require('../internals/engine-user-agent');\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n","<!--测试平台首页-->\r\n<template>\r\n    <div class=\"homeBody\">\r\n        <div class=\"topCollect\">\r\n            <div class=\"topCollect-item\"><my-card>\r\n                <template v-slot:header>\r\n                    <span style=\"font-weight: bolder\">API自动化统计</span>\r\n                </template>\r\n                <template v-slot:body>\r\n                    <div class=\"card-body\">\r\n                        <div>\r\n                            <el-descriptions\r\n                                    :column=\"3\"\r\n                                    direction=\"vertical\"\r\n                            >\r\n                                <el-descriptions-item :label=\"apiAutoStatics.apiCount\" align=\"center\" label-class-name=\"card-label\">\r\n                                    <div style=\"border-right: #303133 solid 1px ;\">\r\n                                        <div class=\"item_value\">Api用例数</div>\r\n                                        <div class=\"item_value\">本周新增：{{apiAutoStatics.newApiCount}} 个</div>\r\n                                    </div>\r\n                                </el-descriptions-item>\r\n                                <el-descriptions-item :label=\"apiAutoStatics.caseCount\" align=\"center\" label-class-name=\"card-label\">\r\n                                    <div style=\"border-right: #303133 solid 1px ;\">\r\n                                        <div class=\"item_value\">场景用例数</div>\r\n                                        <div class=\"item_value\">本周新增：{{apiAutoStatics.newCaseCount}} 个</div>\r\n                                    </div>\r\n                                </el-descriptions-item>\r\n                                <el-descriptions-item :label=\"apiAutoStatics.planCount\" align=\"center\" label-class-name=\"card-label\">\r\n                                    <div>\r\n                                        <div class=\"item_value\">计划总数</div>\r\n                                        <div class=\"item_value\">本周新增：{{apiAutoStatics.newPlanCount}} 个</div>\r\n                                    </div>\r\n                                </el-descriptions-item>\r\n                            </el-descriptions>\r\n                        </div>\r\n                        <div class=\"card_bottom\">\r\n                            <el-descriptions :column=\"2\">\r\n                                <el-descriptions-item  align=\"center\" label-class-name=\"myDescriptions\" label=\"当前定时任务数:\">\r\n                                    {{apiAutoStatics.clockCount}}\r\n                                </el-descriptions-item>\r\n                                <el-descriptions-item label-class-name=\"myDescriptions\" align=\"center\" label=\"定时总执行数:\">\r\n                                    {{apiAutoStatics.clockExecCount}}\r\n                                </el-descriptions-item>\r\n                                <el-descriptions-item label-class-name=\"myDescriptions\" align=\"center\" label=\"计划执行成功率:\">\r\n                                    {{apiAutoStatics.successRatio}}%\r\n                                </el-descriptions-item>\r\n                                <el-descriptions-item label-class-name=\"myDescriptions\" align=\"center\" label=\"计划执行失败率:\">\r\n                                    {{apiAutoStatics.failedRatio}}%\r\n                                </el-descriptions-item>\r\n\r\n                            </el-descriptions>\r\n                        </div>\r\n                    </div>\r\n                </template>\r\n            </my-card></div>\r\n            <div class=\"topCollect-item\"><my-card>\r\n                <template v-slot:header>\r\n                    <span style=\"font-weight: bolder\">Web自动化统计</span>\r\n                </template>\r\n                <template v-slot:body>\r\n                    <div class=\"card-body\">\r\n                        <div>\r\n                            <el-descriptions\r\n                                    :column=\"2\"\r\n                                    direction=\"vertical\"\r\n                            >\r\n                                <el-descriptions-item :label=\"webAutoStatics.caseCount\" align=\"center\" label-class-name=\"card-label\">\r\n                                    <div style=\"border-right: #303133 solid 1px ;\">\r\n                                        <div class=\"item_value\">用例数</div>\r\n                                        <div class=\"item_value\">本周新增：{{webAutoStatics.newCaseCount}} 个</div>\r\n                                    </div>\r\n                                </el-descriptions-item>\r\n                                <el-descriptions-item :label=\"webAutoStatics.planCount\" align=\"center\" label-class-name=\"card-label\">\r\n                                    <div>\r\n                                        <div class=\"item_value\">测试计划总数</div>\r\n                                        <div class=\"item_value\">本周新增：{{webAutoStatics.newPlanCount}} 个</div>\r\n                                    </div>\r\n                                </el-descriptions-item>\r\n                            </el-descriptions>\r\n                        </div>\r\n                        <div class=\"card_bottom\">\r\n                            <el-descriptions :column=\"2\">\r\n                                <el-descriptions-item  align=\"center\" label-class-name=\"myDescriptions\" label=\"当前定时任务数:\">\r\n                                    {{webAutoStatics.clockCount}}\r\n                                </el-descriptions-item>\r\n                                <el-descriptions-item label-class-name=\"myDescriptions\" align=\"center\" label=\"定时总执行数:\">\r\n                                    {{webAutoStatics.clockExecCount}}\r\n                                </el-descriptions-item>\r\n                                <el-descriptions-item label-class-name=\"myDescriptions\" align=\"center\" label=\"计划执行成功率:\">\r\n                                    {{webAutoStatics.successRatio}}%\r\n                                </el-descriptions-item>\r\n                                <el-descriptions-item label-class-name=\"myDescriptions\" align=\"center\" label=\"计划执行失败率:\">\r\n                                    {{webAutoStatics.failedRatio}}%\r\n                                </el-descriptions-item>\r\n                            </el-descriptions>\r\n                        </div>\r\n                    </div>\r\n                </template>\r\n            </my-card></div>\r\n            <div class=\"topCollect-item\"><my-card>\r\n                <template v-slot:header>\r\n                    <span style=\"font-weight: bolder\">APP自动化统计</span>\r\n                </template>\r\n                <template v-slot:body>\r\n                    <div class=\"card-body\">\r\n                        <div>\r\n                            <el-descriptions\r\n                                    :column=\"3\"\r\n                                    direction=\"vertical\"\r\n                            >\r\n                                <el-descriptions-item :label=\"appAutoStatics.apiCount\" align=\"center\" label-class-name=\"card-label\">\r\n                                    <div style=\"border-right: #303133 solid 1px ;\">\r\n                                        <div class=\"item_value\">APP页面元素数</div>\r\n                                        <div class=\"item_value\">本周新增：{{appAutoStatics.newApiCount}} 个</div>\r\n                                    </div>\r\n                                </el-descriptions-item>\r\n                                <el-descriptions-item :label=\"appAutoStatics.caseCount\" align=\"center\" label-class-name=\"card-label\">\r\n                                    <div style=\"border-right: #303133 solid 1px ;\">\r\n                                        <div class=\"item_value\">场景用例数</div>\r\n                                        <div class=\"item_value\">本周新增：{{appAutoStatics.newCaseCount}} 个</div>\r\n                                    </div>\r\n                                </el-descriptions-item>\r\n                                <el-descriptions-item :label=\"appAutoStatics.planCount\" align=\"center\" label-class-name=\"card-label\">\r\n                                    <div>\r\n                                        <div class=\"item_value\">计划总数</div>\r\n                                        <div class=\"item_value\">本周新增：{{appAutoStatics.newPlanCount}} 个</div>\r\n                                    </div>\r\n                                </el-descriptions-item>\r\n                            </el-descriptions>\r\n                        </div>\r\n                        <div class=\"card_bottom\">\r\n                            <el-descriptions :column=\"2\">\r\n                                <el-descriptions-item  align=\"center\" label-class-name=\"myDescriptions\" label=\"当前定时任务数:\">\r\n                                    {{appAutoStatics.clockCount}}\r\n                                </el-descriptions-item>\r\n                                <el-descriptions-item label-class-name=\"myDescriptions\" align=\"center\" label=\"定时总执行数:\">\r\n                                    {{appAutoStatics.clockExecCount}}\r\n                                </el-descriptions-item>\r\n                                <el-descriptions-item label-class-name=\"myDescriptions\" align=\"center\" label=\"计划执行成功率:\">\r\n                                    {{appAutoStatics.successRatio}}%\r\n                                </el-descriptions-item>\r\n                                <el-descriptions-item label-class-name=\"myDescriptions\" align=\"center\" label=\"计划执行失败率:\">\r\n                                    {{appAutoStatics.failedRatio}}%\r\n                                </el-descriptions-item>\r\n\r\n                            </el-descriptions>\r\n                        </div>\r\n                    </div>\r\n                </template>\r\n            </my-card></div>\r\n        </div>\r\n    </div>\r\n    <div class=\"echartData\">\r\n        <div class=\"echartData-item1\">\r\n            <el-card>\r\n                <slot name=\"body\">\r\n                    <myEcharts v-if=\"showPie\" title=\"API自动化成功率\" :legend=\"apiLegend\" :xAxisData=\"xData\" :yAxis=\"yAxis\" :series=\"series\"/>\r\n                </slot>\r\n            </el-card>\r\n        </div>\r\n        <div class=\"echartData-item2\">\r\n            <el-card>\r\n                <slot name=\"body\">\r\n                    <myEcharts v-if=\"showPie\" title=\"Web自动化成功率\" :legend=\"apiLegend\" :xAxisData=\"xData\" :yAxis=\"yAxis\" :series=\"webSeries\"/>\r\n                </slot>\r\n            </el-card>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import myCard from \"../components/common/myCard\";\r\n    import request from \"../utils/request\";\r\n    import {reactive,ref, toRefs} from \"@vue/reactivity\";\r\n    import myEcharts from \"../components/common/echarts/myEcharts\";\r\n    export default {\r\n        props:{\r\n        },\r\n        components:{myCard,myEcharts},\r\n        setup(props,content){\r\n            // 加载首页统计数据\r\n            let staticHomeData = reactive({\r\n                // API自动化统计\r\n                apiAutoStatics:{},\r\n                apiLineChart:{},\r\n                //web自动化统计\r\n                webAutoStatics:{},\r\n                webLineChart:{},\r\n                //App自动化用例统计\r\n                appAutoStatics:{},\r\n            })\r\n            let load =()=>{\r\n                request.get(\"/api/statistics/home\").then(res=>{\r\n                    staticHomeData.apiAutoStatics = res.data.apiAutoStatics\r\n                    staticHomeData.webAutoStatics = res.data.webAutoStatics\r\n                    staticHomeData.appAutoStatics = res.data.appAutoStatics\r\n                })\r\n            }\r\n            return {\r\n                load,\r\n                ...toRefs(staticHomeData)\r\n            }\r\n        },\r\n        data () {\r\n            return {\r\n                xData :[],\r\n                yAxis: [\r\n                    {\r\n                        type: 'value',\r\n                        name: '',\r\n                        min: 0,\r\n                        max: 200,\r\n                        interval: 50,\r\n                        axisLabel: {\r\n                            formatter: '{value} 个'\r\n                        }\r\n                    },\r\n                ],\r\n                series: [\r\n                    {\r\n                        name: '总用例',\r\n                        type: 'line',\r\n                        tooltip: {\r\n                            valueFormatter: function (value) {\r\n                                return value + '个';\r\n                            }\r\n                        },\r\n                        data: []\r\n                    },\r\n                    {\r\n                        name: '成功',\r\n                        type: 'line',\r\n                        tooltip: {\r\n                            valueFormatter: function (value) {\r\n                                return value + '个';\r\n                            }\r\n                        },\r\n                        data: []\r\n                    },\r\n                    {\r\n                        name: '失败',\r\n                        type: 'line',\r\n                        tooltip: {\r\n                            valueFormatter: function (value) {\r\n                                return value + ' 个';\r\n                            }\r\n                        },\r\n                        data: []\r\n                    }\r\n                ],\r\n                apiLegend : ['总用例', '成功', '失败'],\r\n                showPie: false,\r\n                webSeries: [\r\n                    {\r\n                        name: '总用例',\r\n                        type: 'line',\r\n                        tooltip: {\r\n                            valueFormatter: function (value) {\r\n                                return value + '个';\r\n                            }\r\n                        },\r\n                        data: []\r\n                    },\r\n                    {\r\n                        name: '成功',\r\n                        type: 'line',\r\n                        tooltip: {\r\n                            valueFormatter: function (value) {\r\n                                return value + '个';\r\n                            }\r\n                        },\r\n                        data: []\r\n                    },\r\n                    {\r\n                        name: '失败',\r\n                        type: 'line',\r\n                        tooltip: {\r\n                            valueFormatter: function (value) {\r\n                                return value + ' 个';\r\n                            }\r\n                        },\r\n                        data: []\r\n                    }\r\n                ],\r\n            }\r\n        },\r\n        methods:{\r\n            loadLine(){\r\n                request.get(\"/api/statistics/line\").then(res=>{\r\n                    // API 折线图统计\r\n                    let  ApiLineData = res.data.apiLine\r\n                    this.xData = Object.keys(ApiLineData).sort()\r\n                    let values = []\r\n                    for (let i = 0;i<this.xData.length;i++){\r\n                        values.push(ApiLineData[this.xData[i]])\r\n                    }\r\n\r\n                    let count =[]\r\n                    let success = []\r\n                    let failed = []\r\n                    for (let i = 0;i<this.xData.length;i++){\r\n                        count.push(values[i][\"count\"])\r\n                        success.push(values[i][\"successCount\"])\r\n                        failed.push(values[i][\"failedCount\"])\r\n                    }\r\n                    this.series[0][\"data\"] = count\r\n                    this.series[1][\"data\"] = success\r\n                    this.series[2][\"data\"] = failed\r\n                    this.showPie = true\r\n\r\n                    // Web折线图统计\r\n                    let WebLineData = res.data.webLine\r\n                    let WebValues = []\r\n                    for (let i = 0;i<this.xData.length;i++){\r\n                        WebValues.push(WebLineData[this.xData[i]])\r\n                    }\r\n                    let WebCount =[]\r\n                    let WebSuccess = []\r\n                    let WebFailed = []\r\n                    for (let i = 0;i<this.xData.length;i++){\r\n                        WebCount.push(WebValues[i][\"count\"])\r\n                        WebSuccess.push(WebValues[i][\"successCount\"])\r\n                        WebFailed.push(WebValues[i][\"failedCount\"])\r\n                    }\r\n                    this.webSeries[0][\"data\"] = WebCount\r\n                    this.webSeries[1][\"data\"] = WebSuccess\r\n                    this.webSeries[2][\"data\"] = WebFailed\r\n                })\r\n            }\r\n        },\r\n        created() {\r\n            this.load();\r\n            this.loadLine();\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n    .echartData-item1,.echartData-item2{\r\n        box-shadow: 0 0 0 0 rgb(123,123,123);\r\n    }\r\n    .echartData-item1 ,.echartData-item2{\r\n        margin-top:10px;\r\n    }\r\n    .echartData-item1:hover,.echartData-item2:hover{\r\n        border-radius: 10px;\r\n        box-shadow: 0 0 10px 2px rgb(0 0 0);\r\n        transition: 0.3s;\r\n    }\r\n\r\n    .card-body{\r\n        padding: 0 20px 10px 20px;\r\n    }\r\n    /deep/ .card-label{\r\n        font-size: 40px;\r\n        font-weight: 700;\r\n        color: #303133;\r\n        text-align: center;\r\n    }\r\n    .item_value{\r\n        font-size:14px;\r\n        color: #6f7577;\r\n        padding-top: 10px;\r\n    }\r\n    .card_bottom{\r\n        margin-top: 20px;\r\n        padding: 20px 0 20px 0;\r\n        border: 1px solid #ebeef5\r\n    }\r\n    /deep/.myDescriptions{\r\n        font-size: 14px;\r\n    }\r\n    .echartData{\r\n        padding: 20px 0 0 20px;\r\n        display: flex;\r\n    }\r\n    .echartData-item1{\r\n        width: calc(50vw - 150px);\r\n        padding-left: 10px;\r\n    }\r\n    .echartData-item2{\r\n        width: calc(50vw - 150px);\r\n        padding-left: 10px;\r\n    }\r\n    .topCollect{\r\n        display: flex;\r\n    }\r\n    .topCollect-item{\r\n        padding-left: 20px;\r\n    }\r\n</style>","<template>\r\n    <el-card class=\"box-card\" shadow=\"hover\">\r\n        <template #header>\r\n            <div class=\"card-header\">\r\n                <slot name=\"header\">header</slot>\r\n            </div>\r\n        </template>\r\n        <slot name=\"body\">body</slot>\r\n    </el-card>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"myCard\"\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .box-card{\r\n        width: calc(27vw);\r\n    }\r\n    .card-header{\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n    }\r\n\r\n</style>","import { render } from \"./myCard.vue?vue&type=template&id=1661e840&scoped=true\"\nimport script from \"./myCard.vue?vue&type=script&lang=js\"\nexport * from \"./myCard.vue?vue&type=script&lang=js\"\n\nimport \"./myCard.vue?vue&type=style&index=0&id=1661e840&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\dujun\\\\Desktop\\\\vue\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1661e840\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"r-echarts-line\">\r\n        <div id=\"myEchArt\" ref=\"myEchArt\" style=\"height:400px;\"></div>\r\n    </div>\r\n</template>\r\n<script>\r\n    let echarts = require('echarts/lib/echarts')\r\n    import {\r\n        TitleComponent,\r\n        ToolboxComponent,\r\n        TooltipComponent,\r\n        GridComponent,\r\n        LegendComponent\r\n    } from 'echarts/components';\r\n    import { BarChart, LineChart } from 'echarts/charts';\r\n    import { UniversalTransition } from 'echarts/features';\r\n    import { CanvasRenderer } from 'echarts/renderers';\r\n    echarts.use([\r\n        TitleComponent,\r\n        ToolboxComponent,\r\n        TooltipComponent,\r\n        GridComponent,\r\n        LegendComponent,\r\n        BarChart,\r\n        LineChart,\r\n        CanvasRenderer,\r\n        UniversalTransition\r\n    ]);\r\n    export default {\r\n        name: '',\r\n        props:{\r\n                title: {\r\n                    type: Object || String // 标题，可以只传入标题，其他属性使用默认值，也可自定义title属性，默认无标题\r\n                },\r\n                theme: {\r\n                    type: String // dom参数属性，传入theme字符串，theme暂时支持dark和light两种，默认light\r\n                },\r\n                width: String, // dom的宽度，默认600\r\n                height: String, // dom的高度，默认400\r\n                legend: {\r\n                    required: true, // 必传，图表上方标识每个颜色柱/线代表什么意思\r\n                    type: Array,\r\n                    default:['legend1', 'legend2', 'legend3']\r\n                },\r\n                xAxisData:{\r\n                    default: [\"x1\",\"x2\"]\r\n                },\r\n                yAxis:{\r\n                    default:[\r\n                        {\r\n                            type: 'value',\r\n                            name: '',\r\n                            min: 0,\r\n                            max: 250,\r\n                            interval: 50,\r\n                            axisLabel: {\r\n                                formatter: '{value} 个'\r\n                            }\r\n                        },\r\n                    ]\r\n                },\r\n                series:{\r\n                    default:[\r\n                        {\r\n                            name: 'legend1',\r\n                            type: 'line',\r\n                            tooltip: {\r\n                                valueFormatter: function (value) {\r\n                                    return value + ' ml';\r\n                                }\r\n                            },\r\n                            data: [\r\n                                2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20.0, 6.4, 3.3\r\n                            ]\r\n                        },\r\n                        {\r\n                            name: 'legend2',\r\n                            type: 'line',\r\n                            tooltip: {\r\n                                valueFormatter: function (value) {\r\n                                    return value + ' ml';\r\n                                }\r\n                            },\r\n                            data: [\r\n                                2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6, 182.2, 48.7, 18.8, 6.0, 2.3\r\n                            ]\r\n                        },\r\n                        {\r\n                            name: 'legend3',\r\n                            type: 'line',\r\n                            tooltip: {\r\n                                valueFormatter: function (value) {\r\n                                    return value + ' °C';\r\n                                }\r\n                            },\r\n                            data: [2.0, 2.2, 3.3, 4.5, 6.3, 10.2, 20.3, 23.4, 23.0, 16.5, 12.0, 6.2]\r\n                        }\r\n                    ]\r\n                }\r\n        },\r\n        data() {\r\n            // 默认title属性\r\n            let baseTitle = {\r\n                text: '', // 主标题\r\n                subtext: '', // 副标题\r\n                textStyle: {\r\n                    // 文字颜色\r\n                    color: '#000000',\r\n                    // 字体风格,'normal','italic','oblique'\r\n                    fontStyle: 'normal',\r\n                    // 字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...\r\n                    fontWeight: 'bold',\r\n                    // 字体系列\r\n                    fontFamily: 'sans-serif',\r\n                    // 字体大小\r\n                    fontSize: 18\r\n                }\r\n            }\r\n            const tempTitle = this.title\r\n            if (typeof (this.title) === 'string') {\r\n                baseTitle.text = tempTitle\r\n            } else if (typeof (tempTitle) === 'object') {\r\n                if (tempTitle.text) {\r\n                    baseTitle.text = tempTitle.text\r\n                }\r\n                if (tempTitle.subtext) {\r\n                    baseTitle.subtext = tempTitle.subtext\r\n                }\r\n                if (tempTitle.left) {\r\n                    baseTitle.left = tempTitle.left\r\n                }\r\n                if (tempTitle.textStyle) {\r\n                    // 标题字体颜色\r\n                    if (tempTitle.textStyle.color) {\r\n                        baseTitle.textStyle.color = tempTitle.textStyle.color\r\n                    }\r\n                    // 字体风格,'normal','italic','oblique'\r\n                    if (tempTitle.textStyle.fontStyle) {\r\n                        baseTitle.textStyle.fontStyle = tempTitle.textStyle.fontStyle\r\n                    }\r\n                    // 字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...\r\n                    if (tempTitle.textStyle.fontWeight) {\r\n                        baseTitle.textStyle.fontWeight = tempTitle.textStyle.fontWeight\r\n                    }\r\n                    // 字体系列\r\n                    if (tempTitle.textStyle.fontFamily) {\r\n                        baseTitle.textStyle.fontFamily = tempTitle.textStyle.fontFamily\r\n                    }\r\n                    // 字体大小\r\n                    if (tempTitle.textStyle.fontSize) {\r\n                        baseTitle.textStyle.fontSize = tempTitle.textStyle.fontSize\r\n                    }\r\n                }\r\n            }\r\n            // 默认toolbox值\r\n            let baseToolbox = {\r\n                show: true,\r\n                feature: {\r\n                    dataView: { show: true, readOnly: false },\r\n                    magicType: { show: true, type: ['line', 'bar'] },\r\n                    restore: { show: true },\r\n                    saveAsImage: { show: true }\r\n                }\r\n            }\r\n\r\n\r\n            return {\r\n                titleProperty: baseTitle, // title属性值\r\n                toolboxProperty: baseToolbox,// toolbox属性\r\n\r\n            }\r\n        },\r\n        methods: {\r\n            setEchArt(){\r\n                let myChart = echarts.init(this.$refs.myEchArt);\r\n                let option = {\r\n                    // 标题\r\n                    title: this.titleProperty,\r\n                    // 悬浮显示\r\n                    tooltip: {\r\n                        trigger: 'axis',\r\n                        axisPointer: {\r\n                            type: 'cross',\r\n                            crossStyle: {\r\n                                color: '#999'\r\n                            }\r\n                        }\r\n                    },\r\n                    // 工具组件\r\n                    toolbox: this.toolboxProperty ,\r\n                    // 图例组件\r\n                    legend: {\r\n                        data:this.legend\r\n                    },\r\n                    xAxis: [\r\n                        {\r\n                            type: 'category',\r\n                            data: this.xAxisData,\r\n                            axisPointer: {\r\n                                type: 'shadow'\r\n                            }\r\n                        }\r\n                    ],\r\n                    yAxis: this.yAxis,\r\n                    series: this.series\r\n                };\r\n                myChart.setOption(option);\r\n            }\r\n        },\r\n        mounted() {\r\n            this.setEchArt()\r\n        },\r\n    }\r\n</script>\r\n<style scoped>\r\n    * {\r\n        margin: 0;\r\n        padding: 0;\r\n        list-style: none;\r\n    }\r\n</style>\r\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { indexOf, createHashMap, assert } from 'zrender/lib/core/util.js';\nexport var DATA_ZOOM_AXIS_DIMENSIONS = ['x', 'y', 'radius', 'angle', 'single']; // Supported coords.\n// FIXME: polar has been broken (but rarely used).\n\nvar SERIES_COORDS = ['cartesian2d', 'polar', 'singleAxis'];\nexport function isCoordSupported(seriesModel) {\n  var coordType = seriesModel.get('coordinateSystem');\n  return indexOf(SERIES_COORDS, coordType) >= 0;\n}\nexport function getAxisMainType(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'Axis';\n}\nexport function getAxisIndexPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'AxisIndex';\n}\nexport function getAxisIdPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'AxisId';\n}\n/**\n * If two dataZoomModels has the same axis controlled, we say that they are 'linked'.\n * This function finds all linked dataZoomModels start from the given payload.\n */\n\nexport function findEffectedDataZooms(ecModel, payload) {\n  // Key: `DataZoomAxisDimension`\n  var axisRecords = createHashMap();\n  var effectedModels = []; // Key: uid of dataZoomModel\n\n  var effectedModelMap = createHashMap(); // Find the dataZooms specified by payload.\n\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    query: payload\n  }, function (dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid)) {\n      addToEffected(dataZoomModel);\n    }\n  }); // Start from the given dataZoomModels, travel the graph to find\n  // all of the linked dataZoom models.\n\n  var foundNewLink;\n\n  do {\n    foundNewLink = false;\n    ecModel.eachComponent('dataZoom', processSingle);\n  } while (foundNewLink);\n\n  function processSingle(dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid) && isLinked(dataZoomModel)) {\n      addToEffected(dataZoomModel);\n      foundNewLink = true;\n    }\n  }\n\n  function addToEffected(dataZoom) {\n    effectedModelMap.set(dataZoom.uid, true);\n    effectedModels.push(dataZoom);\n    markAxisControlled(dataZoom);\n  }\n\n  function isLinked(dataZoomModel) {\n    var isLink = false;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var axisIdxArr = axisRecords.get(axisDim);\n\n      if (axisIdxArr && axisIdxArr[axisIndex]) {\n        isLink = true;\n      }\n    });\n    return isLink;\n  }\n\n  function markAxisControlled(dataZoomModel) {\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      (axisRecords.get(axisDim) || axisRecords.set(axisDim, []))[axisIndex] = true;\n    });\n  }\n\n  return effectedModels;\n}\n/**\n * Find the first target coordinate system.\n * Available after model built.\n *\n * @return Like {\n *                  grid: [\n *                      {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\n *                      {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\n *                      ...\n *                  ],  // cartesians must not be null/undefined.\n *                  polar: [\n *                      {model: coord0, axisModels: [axis4], coordIndex: 0},\n *                      ...\n *                  ],  // polars must not be null/undefined.\n *                  singleAxis: [\n *                      {model: coord0, axisModels: [], coordIndex: 0}\n *                  ]\n *              }\n */\n\nexport function collectReferCoordSysModelInfo(dataZoomModel) {\n  var ecModel = dataZoomModel.ecModel;\n  var coordSysInfoWrap = {\n    infoList: [],\n    infoMap: createHashMap()\n  };\n  dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n    var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n\n    if (!axisModel) {\n      return;\n    }\n\n    var coordSysModel = axisModel.getCoordSysModel();\n\n    if (!coordSysModel) {\n      return;\n    }\n\n    var coordSysUid = coordSysModel.uid;\n    var coordSysInfo = coordSysInfoWrap.infoMap.get(coordSysUid);\n\n    if (!coordSysInfo) {\n      coordSysInfo = {\n        model: coordSysModel,\n        axisModels: []\n      };\n      coordSysInfoWrap.infoList.push(coordSysInfo);\n      coordSysInfoWrap.infoMap.set(coordSysUid, coordSysInfo);\n    }\n\n    coordSysInfo.axisModels.push(axisModel);\n  });\n  return coordSysInfoWrap;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { each, createHashMap, merge, assert } from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { getAxisMainType, DATA_ZOOM_AXIS_DIMENSIONS } from './helper.js';\nimport { MULTIPLE_REFERRING, SINGLE_REFERRING } from '../../util/model.js';\n\nvar DataZoomAxisInfo =\n/** @class */\nfunction () {\n  function DataZoomAxisInfo() {\n    this.indexList = [];\n    this.indexMap = [];\n  }\n\n  DataZoomAxisInfo.prototype.add = function (axisCmptIdx) {\n    // Remove duplication.\n    if (!this.indexMap[axisCmptIdx]) {\n      this.indexList.push(axisCmptIdx);\n      this.indexMap[axisCmptIdx] = true;\n    }\n  };\n\n  return DataZoomAxisInfo;\n}();\n\nvar DataZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomModel, _super);\n\n  function DataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = DataZoomModel.type;\n    _this._autoThrottle = true;\n    _this._noTarget = true;\n    /**\n     * It is `[rangeModeForMin, rangeModeForMax]`.\n     * The optional values for `rangeMode`:\n     * + `'value'` mode: the axis extent will always be determined by\n     *     `dataZoom.startValue` and `dataZoom.endValue`, despite\n     *     how data like and how `axis.min` and `axis.max` are.\n     * + `'percent'` mode: `100` represents 100% of the `[dMin, dMax]`,\n     *     where `dMin` is `axis.min` if `axis.min` specified, otherwise `data.extent[0]`,\n     *     and `dMax` is `axis.max` if `axis.max` specified, otherwise `data.extent[1]`.\n     *     Axis extent will be determined by the result of the percent of `[dMin, dMax]`.\n     *\n     * For example, when users are using dynamic data (update data periodically via `setOption`),\n     * if in `'value`' mode, the window will be kept in a fixed value range despite how\n     * data are appended, while if in `'percent'` mode, whe window range will be changed alone with\n     * the appended data (suppose `axis.min` and `axis.max` are not specified).\n     */\n\n    _this._rangePropMode = ['percent', 'percent'];\n    return _this;\n  }\n\n  DataZoomModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputRawOption = retrieveRawOption(option);\n    /**\n     * Suppose a \"main process\" start at the point that model prepared (that is,\n     * model initialized or merged or method called in `action`).\n     * We should keep the `main process` idempotent, that is, given a set of values\n     * on `option`, we get the same result.\n     *\n     * But sometimes, values on `option` will be updated for providing users\n     * a \"final calculated value\" (`dataZoomProcessor` will do that). Those value\n     * should not be the base/input of the `main process`.\n     *\n     * So in that case we should save and keep the input of the `main process`\n     * separately, called `settledOption`.\n     *\n     * For example, consider the case:\n     * (Step_1) brush zoom the grid by `toolbox.dataZoom`,\n     *     where the original input `option.startValue`, `option.endValue` are earsed by\n     *     calculated value.\n     * (Step)2) click the legend to hide and show a series,\n     *     where the new range is calculated by the earsed `startValue` and `endValue`,\n     *     which brings incorrect result.\n     */\n\n    this.settledOption = inputRawOption;\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._doInit(inputRawOption);\n  };\n\n  DataZoomModel.prototype.mergeOption = function (newOption) {\n    var inputRawOption = retrieveRawOption(newOption); //FIX #2591\n\n    merge(this.option, newOption, true);\n    merge(this.settledOption, inputRawOption, true);\n\n    this._doInit(inputRawOption);\n  };\n\n  DataZoomModel.prototype._doInit = function (inputRawOption) {\n    var thisOption = this.option;\n\n    this._setDefaultThrottle(inputRawOption);\n\n    this._updateRangeUse(inputRawOption);\n\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      // start/end has higher priority over startValue/endValue if they\n      // both set, but we should make chart.setOption({endValue: 1000})\n      // effective, rather than chart.setOption({endValue: 1000, end: null}).\n      if (this._rangePropMode[index] === 'value') {\n        thisOption[names[0]] = settledOption[names[0]] = null;\n      } // Otherwise do nothing and use the merge result.\n\n    }, this);\n\n    this._resetTarget();\n  };\n\n  DataZoomModel.prototype._resetTarget = function () {\n    var optionOrient = this.get('orient', true);\n    var targetAxisIndexMap = this._targetAxisInfoMap = createHashMap();\n\n    var hasAxisSpecified = this._fillSpecifiedTargetAxis(targetAxisIndexMap);\n\n    if (hasAxisSpecified) {\n      this._orient = optionOrient || this._makeAutoOrientByTargetAxis();\n    } else {\n      this._orient = optionOrient || 'horizontal';\n\n      this._fillAutoTargetAxisByOrient(targetAxisIndexMap, this._orient);\n    }\n\n    this._noTarget = true;\n    targetAxisIndexMap.each(function (axisInfo) {\n      if (axisInfo.indexList.length) {\n        this._noTarget = false;\n      }\n    }, this);\n  };\n\n  DataZoomModel.prototype._fillSpecifiedTargetAxis = function (targetAxisIndexMap) {\n    var hasAxisSpecified = false;\n    each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n      var refering = this.getReferringComponents(getAxisMainType(axisDim), MULTIPLE_REFERRING); // When user set axisIndex as a empty array, we think that user specify axisIndex\n      // but do not want use auto mode. Because empty array may be encountered when\n      // some error occured.\n\n      if (!refering.specified) {\n        return;\n      }\n\n      hasAxisSpecified = true;\n      var axisInfo = new DataZoomAxisInfo();\n      each(refering.models, function (axisModel) {\n        axisInfo.add(axisModel.componentIndex);\n      });\n      targetAxisIndexMap.set(axisDim, axisInfo);\n    }, this);\n    return hasAxisSpecified;\n  };\n\n  DataZoomModel.prototype._fillAutoTargetAxisByOrient = function (targetAxisIndexMap, orient) {\n    var ecModel = this.ecModel;\n    var needAuto = true; // Find axis that parallel to dataZoom as default.\n\n    if (needAuto) {\n      var axisDim = orient === 'vertical' ? 'y' : 'x';\n      var axisModels = ecModel.findComponents({\n        mainType: axisDim + 'Axis'\n      });\n      setParallelAxis(axisModels, axisDim);\n    } // Find axis that parallel to dataZoom as default.\n\n\n    if (needAuto) {\n      var axisModels = ecModel.findComponents({\n        mainType: 'singleAxis',\n        filter: function (axisModel) {\n          return axisModel.get('orient', true) === orient;\n        }\n      });\n      setParallelAxis(axisModels, 'single');\n    }\n\n    function setParallelAxis(axisModels, axisDim) {\n      // At least use the first parallel axis as the target axis.\n      var axisModel = axisModels[0];\n\n      if (!axisModel) {\n        return;\n      }\n\n      var axisInfo = new DataZoomAxisInfo();\n      axisInfo.add(axisModel.componentIndex);\n      targetAxisIndexMap.set(axisDim, axisInfo);\n      needAuto = false; // Find parallel axes in the same grid.\n\n      if (axisDim === 'x' || axisDim === 'y') {\n        var gridModel_1 = axisModel.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n        gridModel_1 && each(axisModels, function (axModel) {\n          if (axisModel.componentIndex !== axModel.componentIndex && gridModel_1 === axModel.getReferringComponents('grid', SINGLE_REFERRING).models[0]) {\n            axisInfo.add(axModel.componentIndex);\n          }\n        });\n      }\n    }\n\n    if (needAuto) {\n      // If no parallel axis, find the first category axis as default. (Also consider polar).\n      each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n        if (!needAuto) {\n          return;\n        }\n\n        var axisModels = ecModel.findComponents({\n          mainType: getAxisMainType(axisDim),\n          filter: function (axisModel) {\n            return axisModel.get('type', true) === 'category';\n          }\n        });\n\n        if (axisModels[0]) {\n          var axisInfo = new DataZoomAxisInfo();\n          axisInfo.add(axisModels[0].componentIndex);\n          targetAxisIndexMap.set(axisDim, axisInfo);\n          needAuto = false;\n        }\n      }, this);\n    }\n  };\n\n  DataZoomModel.prototype._makeAutoOrientByTargetAxis = function () {\n    var dim; // Find the first axis\n\n    this.eachTargetAxis(function (axisDim) {\n      !dim && (dim = axisDim);\n    }, this);\n    return dim === 'y' ? 'vertical' : 'horizontal';\n  };\n\n  DataZoomModel.prototype._setDefaultThrottle = function (inputRawOption) {\n    // When first time user set throttle, auto throttle ends.\n    if (inputRawOption.hasOwnProperty('throttle')) {\n      this._autoThrottle = false;\n    }\n\n    if (this._autoThrottle) {\n      var globalOption = this.ecModel.option;\n      this.option.throttle = globalOption.animation && globalOption.animationDurationUpdate > 0 ? 100 : 20;\n    }\n  };\n\n  DataZoomModel.prototype._updateRangeUse = function (inputRawOption) {\n    var rangePropMode = this._rangePropMode;\n    var rangeModeInOption = this.get('rangeMode');\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      var percentSpecified = inputRawOption[names[0]] != null;\n      var valueSpecified = inputRawOption[names[1]] != null;\n\n      if (percentSpecified && !valueSpecified) {\n        rangePropMode[index] = 'percent';\n      } else if (!percentSpecified && valueSpecified) {\n        rangePropMode[index] = 'value';\n      } else if (rangeModeInOption) {\n        rangePropMode[index] = rangeModeInOption[index];\n      } else if (percentSpecified) {\n        // percentSpecified && valueSpecified\n        rangePropMode[index] = 'percent';\n      } // else remain its original setting.\n\n    });\n  };\n\n  DataZoomModel.prototype.noTarget = function () {\n    return this._noTarget;\n  };\n\n  DataZoomModel.prototype.getFirstTargetAxisModel = function () {\n    var firstAxisModel;\n    this.eachTargetAxis(function (axisDim, axisIndex) {\n      if (firstAxisModel == null) {\n        firstAxisModel = this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n      }\n    }, this);\n    return firstAxisModel;\n  };\n  /**\n   * @param {Function} callback param: axisModel, dimNames, axisIndex, dataZoomModel, ecModel\n   */\n\n\n  DataZoomModel.prototype.eachTargetAxis = function (callback, context) {\n    this._targetAxisInfoMap.each(function (axisInfo, axisDim) {\n      each(axisInfo.indexList, function (axisIndex) {\n        callback.call(context, axisDim, axisIndex);\n      });\n    });\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n\n\n  DataZoomModel.prototype.getAxisProxy = function (axisDim, axisIndex) {\n    var axisModel = this.getAxisModel(axisDim, axisIndex);\n\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    }\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n\n\n  DataZoomModel.prototype.getAxisModel = function (axisDim, axisIndex) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(axisDim && axisIndex != null);\n    }\n\n    var axisInfo = this._targetAxisInfoMap.get(axisDim);\n\n    if (axisInfo && axisInfo.indexMap[axisIndex]) {\n      return this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n    }\n  };\n  /**\n   * If not specified, set to undefined.\n   */\n\n\n  DataZoomModel.prototype.setRawRange = function (opt) {\n    var thisOption = this.option;\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names) {\n      // Consider the pair <start, startValue>:\n      // If one has value and the other one is `null/undefined`, we both set them\n      // to `settledOption`. This strategy enables the feature to clear the original\n      // value in `settledOption` to `null/undefined`.\n      // But if both of them are `null/undefined`, we do not set them to `settledOption`\n      // and keep `settledOption` with the original value. This strategy enables users to\n      // only set <end or endValue> but not set <start or startValue> when calling\n      // `dispatchAction`.\n      // The pair <end, endValue> is treated in the same way.\n      if (opt[names[0]] != null || opt[names[1]] != null) {\n        thisOption[names[0]] = settledOption[names[0]] = opt[names[0]];\n        thisOption[names[1]] = settledOption[names[1]] = opt[names[1]];\n      }\n    }, this);\n\n    this._updateRangeUse(opt);\n  };\n\n  DataZoomModel.prototype.setCalculatedRange = function (opt) {\n    var option = this.option;\n    each(['start', 'startValue', 'end', 'endValue'], function (name) {\n      option[name] = opt[name];\n    });\n  };\n\n  DataZoomModel.prototype.getPercentRange = function () {\n    var axisProxy = this.findRepresentativeAxisProxy();\n\n    if (axisProxy) {\n      return axisProxy.getDataPercentWindow();\n    }\n  };\n  /**\n   * For example, chart.getModel().getComponent('dataZoom').getValueRange('y', 0);\n   *\n   * @return [startValue, endValue] value can only be '-' or finite number.\n   */\n\n\n  DataZoomModel.prototype.getValueRange = function (axisDim, axisIndex) {\n    if (axisDim == null && axisIndex == null) {\n      var axisProxy = this.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        return axisProxy.getDataValueWindow();\n      }\n    } else {\n      return this.getAxisProxy(axisDim, axisIndex).getDataValueWindow();\n    }\n  };\n  /**\n   * @param axisModel If axisModel given, find axisProxy\n   *      corresponding to the axisModel\n   */\n\n\n  DataZoomModel.prototype.findRepresentativeAxisProxy = function (axisModel) {\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    } // Find the first hosted axisProxy\n\n\n    var firstProxy;\n\n    var axisDimList = this._targetAxisInfoMap.keys();\n\n    for (var i = 0; i < axisDimList.length; i++) {\n      var axisDim = axisDimList[i];\n\n      var axisInfo = this._targetAxisInfoMap.get(axisDim);\n\n      for (var j = 0; j < axisInfo.indexList.length; j++) {\n        var proxy = this.getAxisProxy(axisDim, axisInfo.indexList[j]);\n\n        if (proxy.hostedBy(this)) {\n          return proxy;\n        }\n\n        if (!firstProxy) {\n          firstProxy = proxy;\n        }\n      }\n    } // If no hosted proxy found, still need to return a proxy.\n    // This case always happens in toolbox dataZoom, where axes are all hosted by\n    // other dataZooms.\n\n\n    return firstProxy;\n  };\n\n  DataZoomModel.prototype.getRangePropMode = function () {\n    return this._rangePropMode.slice();\n  };\n\n  DataZoomModel.prototype.getOrient = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      // Should not be called before initialized.\n      assert(this._orient);\n    }\n\n    return this._orient;\n  };\n\n  DataZoomModel.type = 'dataZoom';\n  DataZoomModel.dependencies = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series', 'toolbox'];\n  DataZoomModel.defaultOption = {\n    // zlevel: 0,\n    z: 4,\n    filterMode: 'filter',\n    start: 0,\n    end: 100\n  };\n  return DataZoomModel;\n}(ComponentModel);\n/**\n * Retrieve the those raw params from option, which will be cached separately.\n * becasue they will be overwritten by normalized/calculated values in the main\n * process.\n */\n\n\nfunction retrieveRawOption(option) {\n  var ret = {};\n  each(['start', 'end', 'startValue', 'endValue', 'throttle'], function (name) {\n    option.hasOwnProperty(name) && (ret[name] = option[name]);\n  });\n  return ret;\n}\n\nexport default DataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\n\nvar SelectDataZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomModel, _super);\n\n  function SelectDataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomModel.type;\n    return _this;\n  }\n\n  SelectDataZoomModel.type = 'dataZoom.select';\n  return SelectDataZoomModel;\n}(DataZoomModel);\n\nexport default SelectDataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\n\nvar DataZoomView =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomView, _super);\n\n  function DataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = DataZoomView.type;\n    return _this;\n  }\n\n  DataZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    this.dataZoomModel = dataZoomModel;\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n\n  DataZoomView.type = 'dataZoom';\n  return DataZoomView;\n}(ComponentView);\n\nexport default DataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView.js';\n\nvar SelectDataZoomView =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomView, _super);\n\n  function SelectDataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomView.type;\n    return _this;\n  }\n\n  SelectDataZoomView.type = 'dataZoom.select';\n  return SelectDataZoomView;\n}(DataZoomView);\n\nexport default SelectDataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Calculate slider move result.\n * Usage:\n * (1) If both handle0 and handle1 are needed to be moved, set minSpan the same as\n * maxSpan and the same as `Math.abs(handleEnd[1] - handleEnds[0])`.\n * (2) If handle0 is forbidden to cross handle1, set minSpan as `0`.\n *\n * @param delta Move length.\n * @param handleEnds handleEnds[0] can be bigger then handleEnds[1].\n *              handleEnds will be modified in this method.\n * @param extent handleEnds is restricted by extent.\n *              extent[0] should less or equals than extent[1].\n * @param handleIndex Can be 'all', means that both move the two handleEnds.\n * @param minSpan The range of dataZoom can not be smaller than that.\n *              If not set, handle0 and cross handle1. If set as a non-negative\n *              number (including `0`), handles will push each other when reaching\n *              the minSpan.\n * @param maxSpan The range of dataZoom can not be larger than that.\n * @return The input handleEnds.\n */\nexport default function sliderMove(delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\n  delta = delta || 0;\n  var extentSpan = extent[1] - extent[0]; // Notice maxSpan and minSpan can be null/undefined.\n\n  if (minSpan != null) {\n    minSpan = restrict(minSpan, [0, extentSpan]);\n  }\n\n  if (maxSpan != null) {\n    maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\n  }\n\n  if (handleIndex === 'all') {\n    var handleSpan = Math.abs(handleEnds[1] - handleEnds[0]);\n    handleSpan = restrict(handleSpan, [0, extentSpan]);\n    minSpan = maxSpan = restrict(handleSpan, [minSpan, maxSpan]);\n    handleIndex = 0;\n  }\n\n  handleEnds[0] = restrict(handleEnds[0], extent);\n  handleEnds[1] = restrict(handleEnds[1], extent);\n  var originalDistSign = getSpanSign(handleEnds, handleIndex);\n  handleEnds[handleIndex] += delta; // Restrict in extent.\n\n  var extentMinSpan = minSpan || 0;\n  var realExtent = extent.slice();\n  originalDistSign.sign < 0 ? realExtent[0] += extentMinSpan : realExtent[1] -= extentMinSpan;\n  handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent); // Expand span.\n\n  var currDistSign;\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\n    // If minSpan exists, 'cross' is forbidden.\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\n  } // Shrink span.\n\n\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (maxSpan != null && currDistSign.span > maxSpan) {\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\n  }\n\n  return handleEnds;\n}\n\nfunction getSpanSign(handleEnds, handleIndex) {\n  var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex]; // If `handleEnds[0] === handleEnds[1]`, always believe that handleEnd[0]\n  // is at left of handleEnds[1] for non-cross case.\n\n  return {\n    span: Math.abs(dist),\n    sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1\n  };\n}\n\nfunction restrict(value, extend) {\n  return Math.min(extend[1] != null ? extend[1] : Infinity, Math.max(extend[0] != null ? extend[0] : -Infinity, value));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from '../../util/number.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport { unionAxisExtentFromData } from '../../coord/axisHelper.js';\nimport { ensureScaleRawExtentInfo } from '../../coord/scaleRawExtentInfo.js';\nimport { getAxisMainType, isCoordSupported } from './helper.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\n/**\n * Operate single axis.\n * One axis can only operated by one axis operator.\n * Different dataZoomModels may be defined to operate the same axis.\n * (i.e. 'inside' data zoom and 'slider' data zoom components)\n * So dataZoomModels share one axisProxy in that case.\n */\n\nvar AxisProxy =\n/** @class */\nfunction () {\n  function AxisProxy(dimName, axisIndex, dataZoomModel, ecModel) {\n    this._dimName = dimName;\n    this._axisIndex = axisIndex;\n    this.ecModel = ecModel;\n    this._dataZoomModel = dataZoomModel; // /**\n    //  * @readOnly\n    //  * @private\n    //  */\n    // this.hasSeriesStacked;\n  }\n  /**\n   * Whether the axisProxy is hosted by dataZoomModel.\n   */\n\n\n  AxisProxy.prototype.hostedBy = function (dataZoomModel) {\n    return this._dataZoomModel === dataZoomModel;\n  };\n  /**\n   * @return Value can only be NaN or finite value.\n   */\n\n\n  AxisProxy.prototype.getDataValueWindow = function () {\n    return this._valueWindow.slice();\n  };\n  /**\n   * @return {Array.<number>}\n   */\n\n\n  AxisProxy.prototype.getDataPercentWindow = function () {\n    return this._percentWindow.slice();\n  };\n\n  AxisProxy.prototype.getTargetSeriesModels = function () {\n    var seriesModels = [];\n    this.ecModel.eachSeries(function (seriesModel) {\n      if (isCoordSupported(seriesModel)) {\n        var axisMainType = getAxisMainType(this._dimName);\n        var axisModel = seriesModel.getReferringComponents(axisMainType, SINGLE_REFERRING).models[0];\n\n        if (axisModel && this._axisIndex === axisModel.componentIndex) {\n          seriesModels.push(seriesModel);\n        }\n      }\n    }, this);\n    return seriesModels;\n  };\n\n  AxisProxy.prototype.getAxisModel = function () {\n    return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex);\n  };\n\n  AxisProxy.prototype.getMinMaxSpan = function () {\n    return zrUtil.clone(this._minMaxSpan);\n  };\n  /**\n   * Only calculate by given range and this._dataExtent, do not change anything.\n   */\n\n\n  AxisProxy.prototype.calculateDataWindow = function (opt) {\n    var dataExtent = this._dataExtent;\n    var axisModel = this.getAxisModel();\n    var scale = axisModel.axis.scale;\n\n    var rangePropMode = this._dataZoomModel.getRangePropMode();\n\n    var percentExtent = [0, 100];\n    var percentWindow = [];\n    var valueWindow = [];\n    var hasPropModeValue;\n    each(['start', 'end'], function (prop, idx) {\n      var boundPercent = opt[prop];\n      var boundValue = opt[prop + 'Value']; // Notice: dataZoom is based either on `percentProp` ('start', 'end') or\n      // on `valueProp` ('startValue', 'endValue'). (They are based on the data extent\n      // but not min/max of axis, which will be calculated by data window then).\n      // The former one is suitable for cases that a dataZoom component controls multiple\n      // axes with different unit or extent, and the latter one is suitable for accurate\n      // zoom by pixel (e.g., in dataZoomSelect).\n      // we use `getRangePropMode()` to mark which prop is used. `rangePropMode` is updated\n      // only when setOption or dispatchAction, otherwise it remains its original value.\n      // (Why not only record `percentProp` and always map to `valueProp`? Because\n      // the map `valueProp` -> `percentProp` -> `valueProp` probably not the original\n      // `valueProp`. consider two axes constrolled by one dataZoom. They have different\n      // data extent. All of values that are overflow the `dataExtent` will be calculated\n      // to percent '100%').\n\n      if (rangePropMode[idx] === 'percent') {\n        boundPercent == null && (boundPercent = percentExtent[idx]); // Use scale.parse to math round for category or time axis.\n\n        boundValue = scale.parse(numberUtil.linearMap(boundPercent, percentExtent, dataExtent));\n      } else {\n        hasPropModeValue = true;\n        boundValue = boundValue == null ? dataExtent[idx] : scale.parse(boundValue); // Calculating `percent` from `value` may be not accurate, because\n        // This calculation can not be inversed, because all of values that\n        // are overflow the `dataExtent` will be calculated to percent '100%'\n\n        boundPercent = numberUtil.linearMap(boundValue, dataExtent, percentExtent);\n      } // valueWindow[idx] = round(boundValue);\n      // percentWindow[idx] = round(boundPercent);\n\n\n      valueWindow[idx] = boundValue;\n      percentWindow[idx] = boundPercent;\n    });\n    asc(valueWindow);\n    asc(percentWindow); // The windows from user calling of `dispatchAction` might be out of the extent,\n    // or do not obey the `min/maxSpan`, `min/maxValueSpan`. But we dont restrict window\n    // by `zoomLock` here, because we see `zoomLock` just as a interaction constraint,\n    // where API is able to initialize/modify the window size even though `zoomLock`\n    // specified.\n\n    var spans = this._minMaxSpan;\n    hasPropModeValue ? restrictSet(valueWindow, percentWindow, dataExtent, percentExtent, false) : restrictSet(percentWindow, valueWindow, percentExtent, dataExtent, true);\n\n    function restrictSet(fromWindow, toWindow, fromExtent, toExtent, toValue) {\n      var suffix = toValue ? 'Span' : 'ValueSpan';\n      sliderMove(0, fromWindow, fromExtent, 'all', spans['min' + suffix], spans['max' + suffix]);\n\n      for (var i = 0; i < 2; i++) {\n        toWindow[i] = numberUtil.linearMap(fromWindow[i], fromExtent, toExtent, true);\n        toValue && (toWindow[i] = scale.parse(toWindow[i]));\n      }\n    }\n\n    return {\n      valueWindow: valueWindow,\n      percentWindow: percentWindow\n    };\n  };\n  /**\n   * Notice: reset should not be called before series.restoreData() called,\n   * so it is recommanded to be called in \"process stage\" but not \"model init\n   * stage\".\n   */\n\n\n  AxisProxy.prototype.reset = function (dataZoomModel) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n\n    var targetSeries = this.getTargetSeriesModels(); // Culculate data window and data extent, and record them.\n\n    this._dataExtent = calculateDataExtent(this, this._dimName, targetSeries); // `calculateDataWindow` uses min/maxSpan.\n\n    this._updateMinMaxSpan();\n\n    var dataWindow = this.calculateDataWindow(dataZoomModel.settledOption);\n    this._valueWindow = dataWindow.valueWindow;\n    this._percentWindow = dataWindow.percentWindow; // Update axis setting then.\n\n    this._setAxisModel();\n  };\n\n  AxisProxy.prototype.filterData = function (dataZoomModel, api) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n\n    var axisDim = this._dimName;\n    var seriesModels = this.getTargetSeriesModels();\n    var filterMode = dataZoomModel.get('filterMode');\n    var valueWindow = this._valueWindow;\n\n    if (filterMode === 'none') {\n      return;\n    } // FIXME\n    // Toolbox may has dataZoom injected. And if there are stacked bar chart\n    // with NaN data, NaN will be filtered and stack will be wrong.\n    // So we need to force the mode to be set empty.\n    // In fect, it is not a big deal that do not support filterMode-'filter'\n    // when using toolbox#dataZoom, utill tooltip#dataZoom support \"single axis\n    // selection\" some day, which might need \"adapt to data extent on the\n    // otherAxis\", which is disabled by filterMode-'empty'.\n    // But currently, stack has been fixed to based on value but not index,\n    // so this is not an issue any more.\n    // let otherAxisModel = this.getOtherAxisModel();\n    // if (dataZoomModel.get('$fromToolbox')\n    //     && otherAxisModel\n    //     && otherAxisModel.hasSeriesStacked\n    // ) {\n    //     filterMode = 'empty';\n    // }\n    // TODO\n    // filterMode 'weakFilter' and 'empty' is not optimized for huge data yet.\n\n\n    each(seriesModels, function (seriesModel) {\n      var seriesData = seriesModel.getData();\n      var dataDims = seriesData.mapDimensionsAll(axisDim);\n\n      if (!dataDims.length) {\n        return;\n      }\n\n      if (filterMode === 'weakFilter') {\n        var store_1 = seriesData.getStore();\n        var dataDimIndices_1 = zrUtil.map(dataDims, function (dim) {\n          return seriesData.getDimensionIndex(dim);\n        }, seriesData);\n        seriesData.filterSelf(function (dataIndex) {\n          var leftOut;\n          var rightOut;\n          var hasValue;\n\n          for (var i = 0; i < dataDims.length; i++) {\n            var value = store_1.get(dataDimIndices_1[i], dataIndex);\n            var thisHasValue = !isNaN(value);\n            var thisLeftOut = value < valueWindow[0];\n            var thisRightOut = value > valueWindow[1];\n\n            if (thisHasValue && !thisLeftOut && !thisRightOut) {\n              return true;\n            }\n\n            thisHasValue && (hasValue = true);\n            thisLeftOut && (leftOut = true);\n            thisRightOut && (rightOut = true);\n          } // If both left out and right out, do not filter.\n\n\n          return hasValue && leftOut && rightOut;\n        });\n      } else {\n        each(dataDims, function (dim) {\n          if (filterMode === 'empty') {\n            seriesModel.setData(seriesData = seriesData.map(dim, function (value) {\n              return !isInWindow(value) ? NaN : value;\n            }));\n          } else {\n            var range = {};\n            range[dim] = valueWindow; // console.time('select');\n\n            seriesData.selectRange(range); // console.timeEnd('select');\n          }\n        });\n      }\n\n      each(dataDims, function (dim) {\n        seriesData.setApproximateExtent(valueWindow, dim);\n      });\n    });\n\n    function isInWindow(value) {\n      return value >= valueWindow[0] && value <= valueWindow[1];\n    }\n  };\n\n  AxisProxy.prototype._updateMinMaxSpan = function () {\n    var minMaxSpan = this._minMaxSpan = {};\n    var dataZoomModel = this._dataZoomModel;\n    var dataExtent = this._dataExtent;\n    each(['min', 'max'], function (minMax) {\n      var percentSpan = dataZoomModel.get(minMax + 'Span');\n      var valueSpan = dataZoomModel.get(minMax + 'ValueSpan');\n      valueSpan != null && (valueSpan = this.getAxisModel().axis.scale.parse(valueSpan)); // minValueSpan and maxValueSpan has higher priority than minSpan and maxSpan\n\n      if (valueSpan != null) {\n        percentSpan = numberUtil.linearMap(dataExtent[0] + valueSpan, dataExtent, [0, 100], true);\n      } else if (percentSpan != null) {\n        valueSpan = numberUtil.linearMap(percentSpan, [0, 100], dataExtent, true) - dataExtent[0];\n      }\n\n      minMaxSpan[minMax + 'Span'] = percentSpan;\n      minMaxSpan[minMax + 'ValueSpan'] = valueSpan;\n    }, this);\n  };\n\n  AxisProxy.prototype._setAxisModel = function () {\n    var axisModel = this.getAxisModel();\n    var percentWindow = this._percentWindow;\n    var valueWindow = this._valueWindow;\n\n    if (!percentWindow) {\n      return;\n    } // [0, 500]: arbitrary value, guess axis extent.\n\n\n    var precision = numberUtil.getPixelPrecision(valueWindow, [0, 500]);\n    precision = Math.min(precision, 20); // For value axis, if min/max/scale are not set, we just use the extent obtained\n    // by series data, which may be a little different from the extent calculated by\n    // `axisHelper.getScaleExtent`. But the different just affects the experience a\n    // little when zooming. So it will not be fixed until some users require it strongly.\n\n    var rawExtentInfo = axisModel.axis.scale.rawExtentInfo;\n\n    if (percentWindow[0] !== 0) {\n      rawExtentInfo.setDeterminedMinMax('min', +valueWindow[0].toFixed(precision));\n    }\n\n    if (percentWindow[1] !== 100) {\n      rawExtentInfo.setDeterminedMinMax('max', +valueWindow[1].toFixed(precision));\n    }\n\n    rawExtentInfo.freeze();\n  };\n\n  return AxisProxy;\n}();\n\nfunction calculateDataExtent(axisProxy, axisDim, seriesModels) {\n  var dataExtent = [Infinity, -Infinity];\n  each(seriesModels, function (seriesModel) {\n    unionAxisExtentFromData(dataExtent, seriesModel.getData(), axisDim);\n  }); // It is important to get \"consistent\" extent when more then one axes is\n  // controlled by a `dataZoom`, otherwise those axes will not be synchronized\n  // when zooming. But it is difficult to know what is \"consistent\", considering\n  // axes have different type or even different meanings (For example, two\n  // time axes are used to compare data of the same date in different years).\n  // So basically dataZoom just obtains extent by series.data (in category axis\n  // extent can be obtained from axis.data).\n  // Nevertheless, user can set min/max/scale on axes to make extent of axes\n  // consistent.\n\n  var axisModel = axisProxy.getAxisModel();\n  var rawExtentResult = ensureScaleRawExtentInfo(axisModel.axis.scale, axisModel, dataExtent).calculate();\n  return [rawExtentResult.min, rawExtentResult.max];\n}\n\nexport default AxisProxy;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\nimport { getAxisMainType } from './helper.js';\nimport AxisProxy from './AxisProxy.js';\nvar dataZoomProcessor = {\n  // `dataZoomProcessor` will only be performed in needed series. Consider if\n  // there is a line series and a pie series, it is better not to update the\n  // line series if only pie series is needed to be updated.\n  getTargetSeries: function (ecModel) {\n    function eachAxisModel(cb) {\n      ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n        dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n          var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n          cb(axisDim, axisIndex, axisModel, dataZoomModel);\n        });\n      });\n    } // FIXME: it brings side-effect to `getTargetSeries`.\n    // Prepare axis proxies.\n\n\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // dispose all last axis proxy, in case that some axis are deleted.\n      axisModel.__dzAxisProxy = null;\n    });\n    var proxyList = [];\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // Different dataZooms may constrol the same axis. In that case,\n      // an axisProxy serves both of them.\n      if (!axisModel.__dzAxisProxy) {\n        // Use the first dataZoomModel as the main model of axisProxy.\n        axisModel.__dzAxisProxy = new AxisProxy(axisDim, axisIndex, dataZoomModel, ecModel);\n        proxyList.push(axisModel.__dzAxisProxy);\n      }\n    });\n    var seriesModelMap = createHashMap();\n    each(proxyList, function (axisProxy) {\n      each(axisProxy.getTargetSeriesModels(), function (seriesModel) {\n        seriesModelMap.set(seriesModel.uid, seriesModel);\n      });\n    });\n    return seriesModelMap;\n  },\n  // Consider appendData, where filter should be performed. Because data process is\n  // in block mode currently, it is not need to worry about that the overallProgress\n  // execute every frame.\n  overallReset: function (ecModel, api) {\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // We calculate window and reset axis here but not in model\n      // init stage and not after action dispatch handler, because\n      // reset should be called after seriesData.restoreData.\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).reset(dataZoomModel);\n      }); // Caution: data zoom filtering is order sensitive when using\n      // percent range and no min/max/scale set on axis.\n      // For example, we have dataZoom definition:\n      // [\n      //      {xAxisIndex: 0, start: 30, end: 70},\n      //      {yAxisIndex: 0, start: 20, end: 80}\n      // ]\n      // In this case, [20, 80] of y-dataZoom should be based on data\n      // that have filtered by x-dataZoom using range of [30, 70],\n      // but should not be based on full raw data. Thus sliding\n      // x-dataZoom will change both ranges of xAxis and yAxis,\n      // while sliding y-dataZoom will only change the range of yAxis.\n      // So we should filter x-axis after reset x-axis immediately,\n      // and then reset y-axis and filter y-axis.\n\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).filterData(dataZoomModel, api);\n      });\n    });\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // Fullfill all of the range props so that user\n      // is able to get them from chart.getOption().\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        var percentRange = axisProxy.getDataPercentWindow();\n        var valueRange = axisProxy.getDataValueWindow();\n        dataZoomModel.setCalculatedRange({\n          start: percentRange[0],\n          end: percentRange[1],\n          startValue: valueRange[0],\n          endValue: valueRange[1]\n        });\n      }\n    });\n  }\n};\nexport default dataZoomProcessor;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { findEffectedDataZooms } from './helper.js';\nimport { each } from 'zrender/lib/core/util.js';\nexport default function installDataZoomAction(registers) {\n  registers.registerAction('dataZoom', function (payload, ecModel) {\n    var effectedModels = findEffectedDataZooms(ecModel, payload);\n    each(effectedModels, function (dataZoomModel) {\n      dataZoomModel.setRawRange({\n        start: payload.start,\n        end: payload.end,\n        startValue: payload.startValue,\n        endValue: payload.endValue\n      });\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport dataZoomProcessor from './dataZoomProcessor.js';\nimport installDataZoomAction from './dataZoomAction.js';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n\n  installed = true;\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, dataZoomProcessor);\n  installDataZoomAction(registers);\n  registers.registerSubTypeDefaulter('dataZoom', function () {\n    // Default 'slider' when no type specified.\n    return 'slider';\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SelectZoomModel from './SelectZoomModel.js';\nimport SelectZoomView from './SelectZoomView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(SelectZoomModel);\n  registers.registerComponentView(SelectZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nvar ToolboxFeature =\n/** @class */\nfunction () {\n  function ToolboxFeature() {}\n\n  return ToolboxFeature;\n}();\n\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as featureManager from './featureManager.js';\nimport ComponentModel from '../../model/Component.js';\n\nvar ToolboxModel =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxModel, _super);\n\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    // zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      borderColor: '#666',\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: '#3E98C5'\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false,\n      position: 'bottom'\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\n\nexport default ToolboxModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states.js';\nimport Model from '../../model/Model.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as listComponentHelper from '../helper/listComponent.js';\nimport ComponentView from '../../view/Component.js';\nimport { ToolboxFeature, getFeature } from './featureManager.js';\nimport { getUID } from '../../util/component.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\n\nvar ToolboxView =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxView, _super);\n\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature();\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exsit.\n\n        if (!feature) {\n          return;\n        }\n      }\n\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has mutiple icon. they are orginaized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n\n      if (zrUtil.isString(icons)) {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n\n      if (zrUtil.isString(titles)) {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        }); // graphic.enableHoverEmphasis(path);\n\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = toolboxModel.get('orient') === 'vertical' ? toolboxModel.get('right') == null ? 'right' : 'left' : toolboxModel.get('bottom') == null ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n\n          enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            leaveEmphasis(this);\n          }\n\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    group.eachChild(function (icon) {\n      var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.states.emphasis; // May be background element\n\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 8;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  }; // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n\n\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nexport default ToolboxView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint8Array, document */\n\nimport env from 'zrender/lib/core/env.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\n/* global window, document */\n\nvar SaveAsImage =\n/** @class */\nfunction (_super) {\n  __extends(SaveAsImage, _super);\n\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    });\n    var browser = env.browser; // Chrome, Firefox, New Edge\n\n    if (isFunction(MouseEvent) && (browser.newEdge || !browser.ie && !browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework， window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    } // IE or old Edge\n    else {\n        // @ts-ignore\n        if (window.navigator.msSaveOrOpenBlob || isSvg) {\n          var parts = url.split(','); // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\n          var base64Encoded = parts[0].indexOf('base64') > -1;\n          var bstr = isSvg // should decode the svg data uri first\n          ? decodeURIComponent(parts[1]) : parts[1]; // only `atob` when the data uri is encoded with base64\n          // otherwise, like `svg` data uri exported by zrender,\n          // there will be an error, for it's not encoded with base64.\n          // (just a url-encoded string through `encodeURIComponent`)\n\n          base64Encoded && (bstr = window.atob(bstr));\n          var filename = title + '.' + type; // @ts-ignore\n\n          if (window.navigator.msSaveOrOpenBlob) {\n            var n = bstr.length;\n            var u8arr = new Uint8Array(n);\n\n            while (n--) {\n              u8arr[n] = bstr.charCodeAt(n);\n            }\n\n            var blob = new Blob([u8arr]); // @ts-ignore\n\n            window.navigator.msSaveOrOpenBlob(blob, filename);\n          } else {\n            var frame = document.createElement('iframe');\n            document.body.appendChild(frame);\n            var cw = frame.contentWindow;\n            var doc = cw.document;\n            doc.open('image/svg+xml', 'replace');\n            doc.write(bstr);\n            doc.close();\n            cw.focus();\n            doc.execCommand('SaveAs', true, filename);\n            document.body.removeChild(frame);\n          }\n        } else {\n          var lang = model.get('lang');\n          var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n          var tab = window.open();\n          tab.document.write(html);\n          tab.document.title = title;\n        }\n      }\n  };\n\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n\n  return SaveAsImage;\n}(ToolboxFeature);\n\nexport default SaveAsImage;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { SINGLE_REFERRING } from '../../../util/model.js';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack']; // stack and tiled appears in pair for the title\n\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\n\nvar MagicType =\n/** @class */\nfunction (_super) {\n  __extends(MagicType, _super);\n\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n\n      },\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocaleModel().get(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]); // Not supported magicType\n\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n\n    var newOption = {\n      series: []\n    };\n\n    var generateNewSeriesTypes = function (seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      } // Modify boundaryGap\n\n\n      var coordSys = seriesModel.coordinateSystem;\n\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle;\n    var currentType = type; // Change title of stack\n\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n\n      if (model.get(['iconStatus', type]) !== 'emphasis') {\n        currentType = 'tiled';\n      }\n    }\n\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: currentType,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n\n  return MagicType;\n}(ToolboxFeature);\n\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n}; // TODO: SELF REGISTERED.\n\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global document */\n\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { addEventListener } from 'zrender/lib/core/event.js';\n/* global document */\n\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\n\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\n\n\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    })); // @ts-ignore TODO Polar\n\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    }); // Assemble table content\n\n    var lines = [headers.join(ITEM_SPLITER)];\n\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n\n      lines.push(items.join(ITEM_SPLITER));\n    }\n\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\n\n\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\n\n\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\n\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\n\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n\n  return {\n    series: series,\n    categories: categories\n  };\n}\n\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n\n    if (!line) {\n      continue;\n    }\n\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n\n  return {\n    name: seriesName,\n    data: data\n  };\n}\n\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\n\nvar DataView =\n/** @class */\nfunction (_super) {\n  __extends(DataView, _super);\n\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataView.prototype.onclick = function (ecModel, api) {\n    var container = api.getDom();\n    var model = this.model;\n\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n\n    var root = document.createElement('div');\n    root.style.cssText = 'position:absolute;left:5px;top:5px;bottom:5px;right:5px;';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin: 10px 20px;';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'display:block;width:100%;overflow:auto;';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n\n    if (zrUtil.isFunction(optionToContent)) {\n      var htmlOrDom = optionToContent(api.getOption());\n\n      if (zrUtil.isString(htmlOrDom)) {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      viewMain.appendChild(textarea);\n      textarea.readOnly = model.get('readOnly');\n      textarea.style.cssText = 'width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;';\n      textarea.style.color = model.get('textColor');\n      textarea.style.borderColor = model.get('textareaBorderColor');\n      textarea.style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n    }\n\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:0;left:0;right:0;';\n    var buttonStyle = 'float:right;margin-right:20px;border:none;' + 'cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          console.warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n\n        close();\n        return;\n      }\n\n      var newOption;\n\n      try {\n        if (zrUtil.isFunction(contentToOption)) {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = buttonStyle;\n    closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\n\n\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      } // original data has name but new data has no name\n\n\n      var shouldDeleteName = original.name != null && newVal.name == null; // Original data has option\n\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n} // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar each = zrUtil.each;\nvar inner = makeInner();\n/**\n * @param ecModel\n * @param newSnapshot key is dataZoomId\n */\n\nexport function push(ecModel, newSnapshot) {\n  var storedSnapshots = getStoreSnapshots(ecModel); // If previous dataZoom can not be found,\n  // complete an range with current range.\n\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = storedSnapshots.length - 1;\n\n    for (; i >= 0; i--) {\n      var snapshot = storedSnapshots[i];\n\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        storedSnapshots[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  storedSnapshots.push(newSnapshot);\n}\nexport function pop(ecModel) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  var head = storedSnapshots[storedSnapshots.length - 1];\n  storedSnapshots.length > 1 && storedSnapshots.pop(); // Find top for all dataZoom.\n\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n      batchItem = storedSnapshots[i][dataZoomId];\n\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\nexport function clear(ecModel) {\n  inner(ecModel).snapshots = null;\n}\nexport function count(ecModel) {\n  return getStoreSnapshots(ecModel).length;\n}\n/**\n * History length of each dataZoom may be different.\n * this._history[0] is used to store origin range.\n */\n\nfunction getStoreSnapshots(ecModel) {\n  var store = inner(ecModel);\n\n  if (!store.snapshots) {\n    store.snapshots = [{}];\n  }\n\n  return store.snapshots;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as history from '../../dataZoom/history.js';\nimport { ToolboxFeature } from '../featureManager.js';\n\nvar RestoreOption =\n/** @class */\nfunction (_super) {\n  __extends(RestoreOption, _super);\n\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocaleModel().get(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n\n  return RestoreOption;\n}(ToolboxFeature); // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as echarts from '../../core/echarts.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar ATTR = '\\0_ec_interaction_mutex';\nexport function take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\nexport function release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\nexport function isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\n\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n// TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, noop);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { curry, each, map, bind, merge, clone, defaults, assert } from 'zrender/lib/core/util.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nvar BRUSH_PANEL_GLOBAL = true;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: 'rgba(210,219,238,0.3)',\n    fill: '#D2DBEE'\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\n * params:\n *     areas: Array.<Array>, coord relates to container group,\n *                             If no container specified, to global.\n *     opt {\n *         isEnd: boolean,\n *         removeOnClick: boolean\n *     }\n */\n\nvar BrushController =\n/** @class */\nfunction (_super) {\n  __extends(BrushController, _super);\n\n  function BrushController(zr) {\n    var _this = _super.call(this) || this;\n    /**\n     * @internal\n     */\n\n\n    _this._track = [];\n    /**\n     * @internal\n     */\n\n    _this._covers = [];\n    _this._handlers = {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(zr);\n    }\n\n    _this._zr = zr;\n    _this.group = new graphic.Group();\n    _this._uid = 'brushController_' + baseUID++;\n    each(pointerHandlers, function (handler, eventName) {\n      this._handlers[eventName] = bind(handler, this);\n    }, _this);\n    return _this;\n  }\n  /**\n   * If set to `false`, select disabled.\n   */\n\n\n  BrushController.prototype.enableBrush = function (brushOption) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    this._brushType && this._doDisableBrush();\n    brushOption.brushType && this._doEnableBrush(brushOption);\n    return this;\n  };\n\n  BrushController.prototype._doEnableBrush = function (brushOption) {\n    var zr = this._zr; // Consider roam, which takes globalPan too.\n\n    if (!this._enableGlobalPan) {\n      interactionMutex.take(zr, MUTEX_RESOURCE_KEY, this._uid);\n    }\n\n    each(this._handlers, function (handler, eventName) {\n      zr.on(eventName, handler);\n    });\n    this._brushType = brushOption.brushType;\n    this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n  };\n\n  BrushController.prototype._doDisableBrush = function () {\n    var zr = this._zr;\n    interactionMutex.release(zr, MUTEX_RESOURCE_KEY, this._uid);\n    each(this._handlers, function (handler, eventName) {\n      zr.off(eventName, handler);\n    });\n    this._brushType = this._brushOption = null;\n  };\n  /**\n   * @param panelOpts If not pass, it is global brush.\n   */\n\n\n  BrushController.prototype.setPanels = function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels_1 = this._panels = {};\n      each(panelOpts, function (panelOpts) {\n        panels_1[panelOpts.panelId] = clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.mount = function (opt) {\n    opt = opt || {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = true; // should be at first.\n    }\n\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n\n    this._zr.add(thisGroup);\n\n    thisGroup.attr({\n      x: opt.x || 0,\n      y: opt.y || 0,\n      rotation: opt.rotation || 0,\n      scaleX: opt.scaleX || 1,\n      scaleY: opt.scaleY || 1\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  }; // eachCover(cb, context): void {\n  //     each(this._covers, cb, context);\n  // }\n\n  /**\n   * Update covers.\n   * @param coverConfigList\n   *        If coverConfigList is null/undefined, all covers removed.\n   */\n\n\n  BrushController.prototype.updateCovers = function (coverConfigList) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    coverConfigList = map(coverConfigList, function (coverConfig) {\n      return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushInternal = coverConfigList[newIndex]; // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbiden.\n\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  };\n\n  BrushController.prototype.unmount = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!this._mounted) {\n        return;\n      }\n    }\n\n    this.enableBrush(false); // container may 'removeAll' outside.\n\n    clearCovers(this);\n\n    this._zr.remove(this.group);\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = false; // should be at last.\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.dispose = function () {\n    this.unmount();\n    this.off();\n  };\n\n  return BrushController;\n}(Eventful);\n\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\n\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n\n  return creatingCover;\n}\n\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\n\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\n\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\n\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n} // return target panel or `true` (means global panel)\n\n\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n} // Return a panel or true\n\n\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panelId = cover.__brushOption.panelId; // User may give cover without coord sys info,\n  // which is then treated as global panel.\n\n  return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n}\n\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\n\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', {\n    areas: areas,\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\n\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n\n  if (!track.length) {\n    return false;\n  }\n\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\n\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n\n;\n\nfunction createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNameSequences, function (nameSequence) {\n    cover.add(new graphic.Rect({\n      name: nameSequence.join(''),\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\n\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\n\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n    var el = cover.childOfName(nameSequence.join(''));\n    var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\n\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\n\nfunction makeStyle(brushOption) {\n  return defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\n\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], [min[1], max[1]] // y range\n  ];\n}\n\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\n\nfunction getGlobalDirection1(controller, localDirName) {\n  var map = {\n    w: 'left',\n    e: 'right',\n    n: 'top',\n    s: 'bottom'\n  };\n  var inverseMap = {\n    left: 'w',\n    right: 'e',\n    top: 'n',\n    bottom: 's'\n  };\n  var dir = graphic.transformDirection(map[localDirName], getTransform(controller));\n  return inverseMap[dir];\n}\n\nfunction getGlobalDirection2(controller, localDirNameSeq) {\n  var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n  (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n  return globalDir.join('');\n}\n\nfunction driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n  var brushOption = cover.__brushOption;\n  var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(dirNameSequence, function (dirName) {\n    var ind = DIRECTION_MAP[dirName];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction driftPolygon(controller, cover, dx, dy) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\n\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n}\n\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\n\nfunction resetCursor(controller, e, localCursorPoint) {\n  if ( // Check active\n  !controller._brushType // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n    return;\n  }\n\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint); // Check whether in covers.\n\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n\n      if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n\n  currPanel && zr.setCursorStyle('crosshair');\n}\n\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\n\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\n\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n\n  controller._track.push(localCursorPoint.slice());\n\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n\n      controller._covers.push(creatingCover);\n    }\n\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n\n  return eventParams;\n}\n\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n    }\n\n    return panel.defaultBrushType;\n  }\n\n  return brushType;\n}\n\nvar pointerHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mouse out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function (e) {\n    handleDragEnd(this, e);\n  }\n};\n\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null; // trigger event shoule be at final, after procedure will be nested.\n\n    eventParams && trigger(controller, eventParams);\n  }\n}\n\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\n * key: brushType\n */\n\n\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      function returnInput(range) {\n        return range;\n      }\n\n      return createBaseRectCover({\n        toRectRange: returnInput,\n        fromRectRange: returnInput\n      }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group(); // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0)); // Use graphic.Polygon close the shape.\n\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\n\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover({\n        toRectRange: function (range) {\n          var rectRange = [range, [0, 100]];\n          xyIndex && rectRange.reverse();\n          return rectRange;\n        },\n        fromRectRange: function (rectRange) {\n          return rectRange[xyIndex];\n        }\n      }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent; // If brushWidth not specified, fit the panel.\n\n      var panel = getPanelByCover(controller, cover);\n\n      if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\n\nexport default BrushController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nexport function onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType) && coordSys && coordSys.model !== targetCoordSysModel;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { onIrrelevantElement } from './cursorHelper.js';\nimport * as graphicUtil from '../../util/graphic.js';\nexport function makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\nexport function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\nexport function makeRectIsTargetByCursor(rect, api, targetModel) {\n  var boundingRect = normalizeRect(rect);\n  return function (e, localCursorPoint) {\n    return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n} // Consider width/height is negative.\n\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, indexOf, curry, assert, map, createHashMap } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as brushHelper from './brushHelper.js';\nimport { parseFinder as modelUtilParseFinder } from '../../util/model.js'; // FIXME\n// how to genarialize to more coordinate systems.\n\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\n\nvar BrushTargetManager =\n/** @class */\nfunction () {\n  /**\n   * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\n   *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n   * @param opt.include include coordinate system types.\n   */\n  function BrushTargetManager(finder, ecModel, opt) {\n    var _this = this;\n\n    this._targetInfoList = [];\n    var foundCpts = parseFinder(ecModel, finder);\n    each(targetInfoBuilders, function (builder, type) {\n      if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n        builder(foundCpts, _this._targetInfoList);\n      }\n    });\n  }\n\n  BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n    this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      (area.coordRanges || (area.coordRanges = [])).push(coordRange); // area.coordRange is the first of area.coordRanges\n\n      if (!area.coordRange) {\n        area.coordRange = coordRange; // In 'category' axis, coord to pixel is not reversible, so we can not\n        // rebuild range by coordRange accrately, which may bring trouble when\n        // brushing only one item. So we use __rangeOffset to rebuilding range\n        // by coordRange. And this it only used in brush component so it is no\n        // need to be adapted to coordRanges.\n\n        var result = coordConvert[area.brushType](0, coordSys, coordRange);\n        area.__rangeOffset = {\n          offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n          xyMinMax: result.xyMinMax\n        };\n      }\n    });\n    return areas;\n  };\n\n  BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (targetInfo && targetInfo !== true) {\n        each(targetInfo.coordSyses, function (coordSys) {\n          var result = coordConvert[area.brushType](1, coordSys, area.range, true);\n          cb(area, result.values, coordSys, ecModel);\n        });\n      }\n    }, this);\n  };\n  /**\n   * the `areas` is `BrushModel.areas`.\n   * Called in layout stage.\n   * convert `area.coordRange` to global range and set panelId to `area.range`.\n   */\n\n\n  BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n        assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n      }\n\n      area.range = area.range || []; // convert coordRange to global range and set panelId.\n\n      if (targetInfo && targetInfo !== true) {\n        area.panelId = targetInfo.panelId; // (1) area.range shoule always be calculate from coordRange but does\n        // not keep its original value, for the sake of the dataZoom scenario,\n        // where area.coordRange remains unchanged but area.range may be changed.\n        // (2) Only support converting one coordRange to pixel range in brush\n        // component. So do not consider `coordRanges`.\n        // (3) About __rangeOffset, see comment above.\n\n        var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n        var rangeOffset = area.__rangeOffset;\n        area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n      }\n    }, this);\n  };\n\n  BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n    return map(this._targetInfoList, function (targetInfo) {\n      var rect = targetInfo.getPanelRect();\n      return {\n        panelId: targetInfo.panelId,\n        defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n        clipPath: brushHelper.makeRectPanelClipPath(rect),\n        isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n        getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n      };\n    });\n  };\n\n  BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n    // Check whether area is bound in coord, and series do not belong to that coord.\n    // If do not do this check, some brush (like lineX) will controll all axes.\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n  };\n  /**\n   * If return Object, a coord found.\n   * If reutrn true, global found.\n   * Otherwise nothing found.\n   */\n\n\n  BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n    var targetInfoList = this._targetInfoList;\n    var foundCpts = parseFinder(ecModel, area);\n\n    for (var i = 0; i < targetInfoList.length; i++) {\n      var targetInfo = targetInfoList[i];\n      var areaPanelId = area.panelId;\n\n      if (areaPanelId) {\n        if (targetInfo.panelId === areaPanelId) {\n          return targetInfo;\n        }\n      } else {\n        for (var j = 0; j < targetInfoMatchers.length; j++) {\n          if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n            return targetInfo;\n          }\n        }\n      }\n    }\n\n    return true;\n  };\n\n  return BrushTargetManager;\n}();\n\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\n\nfunction parseFinder(ecModel, finder) {\n  return modelUtilParseFinder(ecModel, finder, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\n\nvar targetInfoBuilders = {\n  grid: function (foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels; // Remove duplicated.\n\n    var gridModelMap = createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilders.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function (foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilders.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n}, // geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilders = {\n  grid: function () {\n    // grid is not Transformable.\n    return this.coordSys.master.getRect().clone();\n  },\n  geo: function () {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone(); // geo roam and zoom transform\n\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xminymin = to ? coordSys.pointToData([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp);\n    var xmaxymax = to ? coordSys.pointToData([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = map(rangeOrCoordRange, function (item) {\n      var p = to ? coordSys.pointToData(item, clamp) : coordSys.dataToPoint(item, clamp);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\n\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n  }\n\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]), true) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\n\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function (values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function (values, refer, scales) {\n    return map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\n\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n} // We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n// Return [0~1, 0~1]\n\n\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\n\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\n\nexport default BrushTargetManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO depends on DataZoom and Brush\n\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BrushController from '../../helper/BrushController.js';\nimport BrushTargetManager from '../../helper/BrushTargetManager.js';\nimport * as history from '../../dataZoom/history.js';\nimport sliderMove from '../../helper/sliderMove.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model.js';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator.js';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\n\nvar DataZoomFeature =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomFeature, _super);\n\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n\n    var snapshot = {};\n    var ecModel = this.ecModel;\n\n    this._brushController.updateCovers([]); // remove cover\n\n\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n\n      var brushType = area.brushType;\n\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n\n    this._dispatchZoomAction(snapshot);\n\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel); // Restrict range.\n\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n\n  ;\n\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = []; // Convert from hash map to array.\n\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: 'rgba(210,219,238,0.2)'\n      }\n    };\n    return defaultOption;\n  };\n\n  return DataZoomFeature;\n}(ToolboxFeature);\n\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\n\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  }; // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n\n  return setting;\n}\n\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\n\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\n\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n  var featureDataZoomPath = ['feature', 'dataZoom'];\n\n  if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n    return;\n  }\n\n  var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n\n  return dzOptions;\n});\nexport default DataZoomFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect.js';\nimport ToolboxModel from './ToolboxModel.js';\nimport ToolboxView from './ToolboxView.js'; // TODOD: REGISTER IN INSTALL\n\nimport { registerFeature } from './featureManager.js';\nimport SaveAsImage from './feature/SaveAsImage.js';\nimport MagicType from './feature/MagicType.js';\nimport DataView from './feature/DataView.js';\nimport Restore from './feature/Restore.js';\nimport DataZoom from './feature/DataZoom.js';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\n\nvar GridModel =\n/** @class */\nfunction (_super) {\n  __extends(GridModel, _super);\n\n  function GridModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  GridModel.type = 'grid';\n  GridModel.dependencies = ['xAxis', 'yAxis'];\n  GridModel.layoutMode = 'box';\n  GridModel.defaultOption = {\n    show: false,\n    // zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 70,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  };\n  return GridModel;\n}(ComponentModel);\n\nexport default GridModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\n\nvar CartesianAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisModel, _super);\n\n  function CartesianAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  CartesianAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n  };\n\n  CartesianAxisModel.type = 'cartesian2dAxis';\n  return CartesianAxisModel;\n}(ComponentModel);\n\nexport { CartesianAxisModel };\nzrUtil.mixin(CartesianAxisModel, AxisModelCommonMixin);\nexport default CartesianAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar defaultOption = {\n  show: true,\n  // zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By default auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#6E7079',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    lineStyle: {\n      color: ['#E0E6F1'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n    }\n  }\n};\nvar categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\nvar valueAxis = zrUtil.merge({\n  boundaryGap: [0, 0],\n  axisLine: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  axisTick: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  splitNumber: 5,\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Lenght of minor tick\n    length: 3,\n    // Line style\n    lineStyle: {// Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: '#F4F7FD',\n      width: 1\n    }\n  }\n}, defaultOption);\nvar timeAxis = zrUtil.merge({\n  splitNumber: 6,\n  axisLabel: {\n    // To eliminate labels that are not nice\n    showMinLabel: false,\n    showMaxLabel: false,\n    rich: {\n      primary: {\n        fontWeight: 'bold'\n      }\n    }\n  },\n  splitLine: {\n    show: false\n  }\n}, valueAxis);\nvar logAxis = zrUtil.defaults({\n  logBase: 10\n}, valueAxis);\nexport default {\n  category: categoryAxis,\n  value: valueAxis,\n  time: timeAxis,\n  log: logAxis\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var AXIS_TYPES = {\n  value: 1,\n  category: 1,\n  time: 1,\n  log: 1\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport axisDefault from './axisDefault.js';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout.js';\nimport OrdinalMeta from '../data/OrdinalMeta.js';\nimport { AXIS_TYPES } from './axisCommonTypes.js';\nimport { each, merge } from 'zrender/lib/core/util.js';\n/**\n * Generate sub axis model class\n * @param axisName 'x' 'y' 'radius' 'angle' 'parallel' ...\n */\n\nexport default function axisModelCreator(registers, axisName, BaseAxisModelClass, extraDefaultOption) {\n  each(AXIS_TYPES, function (v, axisType) {\n    var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\n\n    var AxisModel =\n    /** @class */\n    function (_super) {\n      __extends(AxisModel, _super);\n\n      function AxisModel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = axisName + 'Axis.' + axisType;\n        return _this;\n      }\n\n      AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n        var layoutMode = fetchLayoutMode(this);\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        merge(option, themeModel.get(axisType + 'Axis'));\n        merge(option, this.getDefaultOption());\n        option.type = getAxisType(option);\n\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      };\n\n      AxisModel.prototype.optionUpdated = function () {\n        var thisOption = this.option;\n\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      };\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n\n\n      AxisModel.prototype.getCategories = function (rawData) {\n        var option = this.option; // FIXME\n        // warning if called before all of 'getInitailData' finished.\n\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n\n          return this.__ordinalMeta.categories;\n        }\n      };\n\n      AxisModel.prototype.getOrdinalMeta = function () {\n        return this.__ordinalMeta;\n      };\n\n      AxisModel.type = axisName + 'Axis.' + axisType;\n      AxisModel.defaultOption = defaultOption;\n      return AxisModel;\n    }(BaseAxisModelClass);\n\n    registers.registerComponentModel(AxisModel);\n  });\n  registers.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\n}\n\nfunction getAxisType(option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\n\nvar Cartesian =\n/** @class */\nfunction () {\n  function Cartesian(name) {\n    this.type = 'cartesian';\n    this._dimList = [];\n    this._axes = {};\n    this.name = name || '';\n  }\n\n  Cartesian.prototype.getAxis = function (dim) {\n    return this._axes[dim];\n  };\n\n  Cartesian.prototype.getAxes = function () {\n    return zrUtil.map(this._dimList, function (dim) {\n      return this._axes[dim];\n    }, this);\n  };\n\n  Cartesian.prototype.getAxesByScale = function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  };\n\n  Cartesian.prototype.addAxis = function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n\n    this._dimList.push(dim);\n  };\n\n  return Cartesian;\n}();\n\n;\nexport default Cartesian;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport Cartesian from './Cartesian.js';\nimport { invert } from 'zrender/lib/core/matrix.js';\nimport { applyTransform } from 'zrender/lib/core/vector.js';\nexport var cartesian2DDimensions = ['x', 'y'];\n\nfunction canCalculateAffineTransform(scale) {\n  return scale.type === 'interval' || scale.type === 'time';\n}\n\nvar Cartesian2D =\n/** @class */\nfunction (_super) {\n  __extends(Cartesian2D, _super);\n\n  function Cartesian2D() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'cartesian2d';\n    _this.dimensions = cartesian2DDimensions;\n    return _this;\n  }\n  /**\n   * Calculate an affine transform matrix if two axes are time or value.\n   * It's mainly for accelartion on the large time series data.\n   */\n\n\n  Cartesian2D.prototype.calcAffineTransform = function () {\n    this._transform = this._invTransform = null;\n    var xAxisScale = this.getAxis('x').scale;\n    var yAxisScale = this.getAxis('y').scale;\n\n    if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\n      return;\n    }\n\n    var xScaleExtent = xAxisScale.getExtent();\n    var yScaleExtent = yAxisScale.getExtent();\n    var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\n    var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\n    var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\n    var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\n\n    if (!xScaleSpan || !yScaleSpan) {\n      return;\n    } // Accelerate data to point calculation on the special large time series data.\n\n\n    var scaleX = (end[0] - start[0]) / xScaleSpan;\n    var scaleY = (end[1] - start[1]) / yScaleSpan;\n    var translateX = start[0] - xScaleExtent[0] * scaleX;\n    var translateY = start[1] - yScaleExtent[0] * scaleY;\n    var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\n    this._invTransform = invert([], m);\n  };\n  /**\n   * Base axis will be used on stacking.\n   */\n\n\n  Cartesian2D.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  };\n\n  Cartesian2D.prototype.containPoint = function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  };\n\n  Cartesian2D.prototype.containData = function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  };\n\n  Cartesian2D.prototype.dataToPoint = function (data, clamp, out) {\n    out = out || [];\n    var xVal = data[0];\n    var yVal = data[1]; // Fast path\n\n    if (this._transform // It's supported that if data is like `[Inifity, 123]`, where only Y pixel calculated.\n    && xVal != null && isFinite(xVal) && yVal != null && isFinite(yVal)) {\n      return applyTransform(out, data, this._transform);\n    }\n\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(xVal, clamp));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(yVal, clamp));\n    return out;\n  };\n\n  Cartesian2D.prototype.clampData = function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  };\n\n  Cartesian2D.prototype.pointToData = function (point, clamp) {\n    var out = [];\n\n    if (this._invTransform) {\n      return applyTransform(out, point, this._invTransform);\n    }\n\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]), clamp);\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]), clamp);\n    return out;\n  };\n\n  Cartesian2D.prototype.getOtherAxis = function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  };\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   */\n\n\n  Cartesian2D.prototype.getArea = function () {\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]);\n    var y = Math.min(yExtent[0], yExtent[1]);\n    var width = Math.max(xExtent[0], xExtent[1]) - x;\n    var height = Math.max(yExtent[0], yExtent[1]) - y;\n    return new BoundingRect(x, y, width, height);\n  };\n\n  return Cartesian2D;\n}(Cartesian);\n\n;\nexport default Cartesian2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\n\nvar Axis2D =\n/** @class */\nfunction (_super) {\n  __extends(Axis2D, _super);\n\n  function Axis2D(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    /**\n     * Index of axis, can be used as key\n     * Injected outside.\n     */\n\n\n    _this.index = 0;\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n\n  Axis2D.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n\n\n  Axis2D.prototype.getGlobalExtent = function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  };\n\n  Axis2D.prototype.pointToData = function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  };\n  /**\n   * Set ordinalSortInfo\n   * @param info new OrdinalSortInfo\n   */\n\n\n  Axis2D.prototype.setCategorySortInfo = function (info) {\n    if (this.type !== 'category') {\n      return false;\n    }\n\n    this.model.option.categorySortInfo = info;\n    this.scale.setSortInfo(info);\n  };\n\n  return Axis2D;\n}(Axis);\n\nexport default Axis2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getPrecisionSafe, round } from '../util/number.js';\nimport IntervalScale from '../scale/Interval.js';\nimport { getScaleExtent } from './axisHelper.js';\nimport { warn } from '../util/log.js';\nimport { increaseInterval, isValueNice } from '../scale/helper.js';\nvar mathLog = Math.log;\nexport function alignScaleTicks(scale, axisModel, alignToScale) {\n  var intervalScaleProto = IntervalScale.prototype; // NOTE: There is a precondition for log scale  here:\n  // In log scale we store _interval and _extent of exponent value.\n  // So if we use the method of InternalScale to set/get these data.\n  // It process the exponent value, which is linear and what we want here.\n\n  var alignToTicks = intervalScaleProto.getTicks.call(alignToScale);\n  var alignToNicedTicks = intervalScaleProto.getTicks.call(alignToScale, true);\n  var alignToSplitNumber = alignToTicks.length - 1;\n  var alignToInterval = intervalScaleProto.getInterval.call(alignToScale);\n  var scaleExtent = getScaleExtent(scale, axisModel);\n  var rawExtent = scaleExtent.extent;\n  var isMinFixed = scaleExtent.fixMin;\n  var isMaxFixed = scaleExtent.fixMax;\n\n  if (scale.type === 'log') {\n    var logBase = mathLog(scale.base);\n    rawExtent = [mathLog(rawExtent[0]) / logBase, mathLog(rawExtent[1]) / logBase];\n  }\n\n  scale.setExtent(rawExtent[0], rawExtent[1]);\n  scale.calcNiceExtent({\n    splitNumber: alignToSplitNumber,\n    fixMin: isMinFixed,\n    fixMax: isMaxFixed\n  });\n  var extent = intervalScaleProto.getExtent.call(scale); // Need to update the rawExtent.\n  // Because value in rawExtent may be not parsed. e.g. 'dataMin', 'dataMax'\n\n  if (isMinFixed) {\n    rawExtent[0] = extent[0];\n  }\n\n  if (isMaxFixed) {\n    rawExtent[1] = extent[1];\n  }\n\n  var interval = intervalScaleProto.getInterval.call(scale);\n  var min = rawExtent[0];\n  var max = rawExtent[1];\n\n  if (isMinFixed && isMaxFixed) {\n    // User set min, max, divide to get new interval\n    interval = (max - min) / alignToSplitNumber;\n  } else if (isMinFixed) {\n    max = rawExtent[0] + interval * alignToSplitNumber; // User set min, expand extent on the other side\n\n    while (max < rawExtent[1] && isFinite(max) && isFinite(rawExtent[1])) {\n      interval = increaseInterval(interval);\n      max = rawExtent[0] + interval * alignToSplitNumber;\n    }\n  } else if (isMaxFixed) {\n    // User set max, expand extent on the other side\n    min = rawExtent[1] - interval * alignToSplitNumber;\n\n    while (min > rawExtent[0] && isFinite(min) && isFinite(rawExtent[0])) {\n      interval = increaseInterval(interval);\n      min = rawExtent[1] - interval * alignToSplitNumber;\n    }\n  } else {\n    var nicedSplitNumber = scale.getTicks().length - 1;\n\n    if (nicedSplitNumber > alignToSplitNumber) {\n      interval = increaseInterval(interval);\n    }\n\n    var range = interval * alignToSplitNumber;\n    max = Math.ceil(rawExtent[1] / interval) * interval;\n    min = round(max - range); // Not change the result that crossing zero.\n\n    if (min < 0 && rawExtent[0] >= 0) {\n      min = 0;\n      max = round(range);\n    } else if (max > 0 && rawExtent[1] <= 0) {\n      max = 0;\n      min = -round(range);\n    }\n  } // Adjust min, max based on the extent of alignTo. When min or max is set in alignTo scale\n\n\n  var t0 = (alignToTicks[0].value - alignToNicedTicks[0].value) / alignToInterval;\n  var t1 = (alignToTicks[alignToSplitNumber].value - alignToNicedTicks[alignToSplitNumber].value) / alignToInterval; // NOTE: Must in setExtent -> setInterval -> setNiceExtent order.\n\n  intervalScaleProto.setExtent.call(scale, min + interval * t0, max + interval * t1);\n  intervalScaleProto.setInterval.call(scale, interval);\n\n  if (t0 || t1) {\n    intervalScaleProto.setNiceExtent.call(scale, min + interval, max - interval);\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    var ticks = intervalScaleProto.getTicks.call(scale);\n\n    if (ticks[1] && (!isValueNice(interval) || getPrecisionSafe(ticks[1].value) > getPrecisionSafe(interval))) {\n      warn( // eslint-disable-next-line\n      \"The ticks may be not readable when set min: \" + axisModel.get('min') + \", max: \" + axisModel.get('max') + \" and alignTicks: true\");\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\nimport { isObject, each, indexOf, retrieve3, keys } from 'zrender/lib/core/util.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport { createScaleByModel, ifAxisCrossZero, niceScaleExtent, estimateLabelUnionRect, getDataDimensionsOnAxis } from '../../coord/axisHelper.js';\nimport Cartesian2D, { cartesian2DDimensions } from './Cartesian2D.js';\nimport Axis2D from './Axis2D.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nimport { isCartesian2DSeries, findAxisModels } from './cartesianAxisHelper.js';\nimport { isIntervalOrLogScale } from '../../scale/helper.js';\nimport { alignScaleTicks } from '../axisAlignTicks.js';\n\nvar Grid =\n/** @class */\nfunction () {\n  function Grid(gridModel, ecModel, api) {\n    // FIXME:TS where used (different from registered type 'cartesian2d')?\n    this.type = 'grid';\n    this._coordsMap = {};\n    this._coordsList = [];\n    this._axesMap = {};\n    this._axesList = [];\n    this.axisPointerEnabled = true;\n    this.dimensions = cartesian2DDimensions;\n\n    this._initCartesian(gridModel, ecModel, api);\n\n    this.model = gridModel;\n  }\n\n  Grid.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Grid.prototype.update = function (ecModel, api) {\n    var axesMap = this._axesMap;\n\n    this._updateScale(ecModel, this.model);\n\n    function updateAxisTicks(axes) {\n      var alignTo; // Axis is added in order of axisIndex.\n\n      var axesIndices = keys(axes);\n      var len = axesIndices.length;\n\n      if (!len) {\n        return;\n      }\n\n      var axisNeedsAlign = []; // Process once and calculate the ticks for those don't use alignTicks.\n\n      for (var i = len - 1; i >= 0; i--) {\n        var idx = +axesIndices[i]; // Convert to number.\n\n        var axis = axes[idx];\n        var model = axis.model;\n        var scale = axis.scale;\n\n        if ( // Only value and log axis without interval support alignTicks.\n        isIntervalOrLogScale(scale) && model.get('alignTicks') && model.get('interval') == null) {\n          axisNeedsAlign.push(axis);\n        } else {\n          niceScaleExtent(scale, model);\n\n          if (isIntervalOrLogScale(scale)) {\n            // Can only align to interval or log axis.\n            alignTo = axis;\n          }\n        }\n      }\n\n      ; // All axes has set alignTicks. Pick the first one.\n      // PENDING. Should we find the axis that both set interval, min, max and align to this one?\n\n      if (axisNeedsAlign.length) {\n        if (!alignTo) {\n          alignTo = axisNeedsAlign.pop();\n          niceScaleExtent(alignTo.scale, alignTo.model);\n        }\n\n        each(axisNeedsAlign, function (axis) {\n          alignScaleTicks(axis.scale, axis.model, alignTo.scale);\n        });\n      }\n    }\n\n    updateAxisTicks(axesMap.x);\n    updateAxisTicks(axesMap.y); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n    var onZeroRecords = {};\n    each(axesMap.x, function (xAxis) {\n      fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n    });\n    each(axesMap.y, function (yAxis) {\n      fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n    }); // Resize again if containLabel is enabled\n    // FIXME It may cause getting wrong grid size in data processing stage\n\n    this.resize(this.model, api);\n  };\n  /**\n   * Resize the grid\n   */\n\n\n  Grid.prototype.resize = function (gridModel, api, ignoreContainLabel) {\n    var boxLayoutParams = gridModel.getBoxLayoutParams();\n    var isContainLabel = !ignoreContainLabel && gridModel.get('containLabel');\n    var gridRect = getLayoutRect(boxLayoutParams, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    this._rect = gridRect;\n    var axesList = this._axesList;\n    adjustAxes(); // Minus label size\n\n    if (isContainLabel) {\n      each(axesList, function (axis) {\n        if (!axis.model.get(['axisLabel', 'inside'])) {\n          var labelUnionRect = estimateLabelUnionRect(axis);\n\n          if (labelUnionRect) {\n            var dim = axis.isHorizontal() ? 'height' : 'width';\n            var margin = axis.model.get(['axisLabel', 'margin']);\n            gridRect[dim] -= labelUnionRect[dim] + margin;\n\n            if (axis.position === 'top') {\n              gridRect.y += labelUnionRect.height + margin;\n            } else if (axis.position === 'left') {\n              gridRect.x += labelUnionRect.width + margin;\n            }\n          }\n        }\n      });\n      adjustAxes();\n    }\n\n    each(this._coordsList, function (coord) {\n      // Calculate affine matrix to accelerate the data to point transform.\n      // If all the axes scales are time or value.\n      coord.calcAffineTransform();\n    });\n\n    function adjustAxes() {\n      each(axesList, function (axis) {\n        var isHorizontal = axis.isHorizontal();\n        var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n        var idx = axis.inverse ? 1 : 0;\n        axis.setExtent(extent[idx], extent[1 - idx]);\n        updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n      });\n    }\n  };\n\n  Grid.prototype.getAxis = function (dim, axisIndex) {\n    var axesMapOnDim = this._axesMap[dim];\n\n    if (axesMapOnDim != null) {\n      return axesMapOnDim[axisIndex || 0];\n    }\n  };\n\n  Grid.prototype.getAxes = function () {\n    return this._axesList.slice();\n  };\n\n  Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\n    if (xAxisIndex != null && yAxisIndex != null) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      return this._coordsMap[key];\n    }\n\n    if (isObject(xAxisIndex)) {\n      yAxisIndex = xAxisIndex.yAxisIndex;\n      xAxisIndex = xAxisIndex.xAxisIndex;\n    }\n\n    for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n      if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n        return coordList[i];\n      }\n    }\n  };\n\n  Grid.prototype.getCartesians = function () {\n    return this._coordsList.slice();\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.convertToPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n\n    return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n\n    return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n  };\n\n  Grid.prototype._findConvertTarget = function (finder) {\n    var seriesModel = finder.seriesModel;\n    var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    var gridModel = finder.gridModel;\n    var coordsList = this._coordsList;\n    var cartesian;\n    var axis;\n\n    if (seriesModel) {\n      cartesian = seriesModel.coordinateSystem;\n      indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n    } else if (xAxisModel && yAxisModel) {\n      cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    } else if (xAxisModel) {\n      axis = this.getAxis('x', xAxisModel.componentIndex);\n    } else if (yAxisModel) {\n      axis = this.getAxis('y', yAxisModel.componentIndex);\n    } // Lowest priority.\n    else if (gridModel) {\n        var grid = gridModel.coordinateSystem;\n\n        if (grid === this) {\n          cartesian = this._coordsList[0];\n        }\n      }\n\n    return {\n      cartesian: cartesian,\n      axis: axis\n    };\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.containPoint = function (point) {\n    var coord = this._coordsList[0];\n\n    if (coord) {\n      return coord.containPoint(point);\n    }\n  };\n  /**\n   * Initialize cartesian coordinate systems\n   */\n\n\n  Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\n    var _this = this;\n\n    var grid = this;\n    var axisPositionUsed = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    var axesMap = {\n      x: {},\n      y: {}\n    };\n    var axesCount = {\n      x: 0,\n      y: 0\n    }; /// Create axis\n\n    ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n    ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n    if (!axesCount.x || !axesCount.y) {\n      // Roll back when there no either x or y axis\n      this._axesMap = {};\n      this._axesList = [];\n      return;\n    }\n\n    this._axesMap = axesMap; /// Create cartesian2d\n\n    each(axesMap.x, function (xAxis, xAxisIndex) {\n      each(axesMap.y, function (yAxis, yAxisIndex) {\n        var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n        var cartesian = new Cartesian2D(key);\n        cartesian.master = _this;\n        cartesian.model = gridModel;\n        _this._coordsMap[key] = cartesian;\n\n        _this._coordsList.push(cartesian);\n\n        cartesian.addAxis(xAxis);\n        cartesian.addAxis(yAxis);\n      });\n    });\n\n    function createAxisCreator(dimName) {\n      return function (axisModel, idx) {\n        if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\n          return;\n        }\n\n        var axisPosition = axisModel.get('position');\n\n        if (dimName === 'x') {\n          // Fix position\n          if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n            // Default bottom of X\n            axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n          }\n        } else {\n          // Fix position\n          if (axisPosition !== 'left' && axisPosition !== 'right') {\n            // Default left of Y\n            axisPosition = axisPositionUsed.left ? 'right' : 'left';\n          }\n        }\n\n        axisPositionUsed[axisPosition] = true;\n        var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n        var isCategory = axis.type === 'category';\n        axis.onBand = isCategory && axisModel.get('boundaryGap');\n        axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n        axisModel.axis = axis; // Inject axisModel into axis\n\n        axis.model = axisModel; // Inject grid info axis\n\n        axis.grid = grid; // Index of axis, can be used as key\n\n        axis.index = idx;\n\n        grid._axesList.push(axis);\n\n        axesMap[dimName][idx] = axis;\n        axesCount[dimName]++;\n      };\n    }\n  };\n  /**\n   * Update cartesian properties from series.\n   */\n\n\n  Grid.prototype._updateScale = function (ecModel, gridModel) {\n    // Reset scale\n    each(this._axesList, function (axis) {\n      axis.scale.setExtent(Infinity, -Infinity);\n\n      if (axis.type === 'category') {\n        var categorySortInfo = axis.model.get('categorySortInfo');\n        axis.scale.setSortInfo(categorySortInfo);\n      }\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (isCartesian2DSeries(seriesModel)) {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n\n        if (!isAxisUsedInTheGrid(xAxisModel, gridModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\n          return;\n        }\n\n        var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n        var data = seriesModel.getData();\n        var xAxis = cartesian.getAxis('x');\n        var yAxis = cartesian.getAxis('y');\n        unionExtent(data, xAxis);\n        unionExtent(data, yAxis);\n      }\n    }, this);\n\n    function unionExtent(data, axis) {\n      each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\n        axis.scale.unionExtentFromData(data, dim);\n      });\n    }\n  };\n  /**\n   * @param dim 'x' or 'y' or 'auto' or null/undefined\n   */\n\n\n  Grid.prototype.getTooltipAxes = function (dim) {\n    var baseAxes = [];\n    var otherAxes = [];\n    each(this.getCartesians(), function (cartesian) {\n      var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n      var otherAxis = cartesian.getOtherAxis(baseAxis);\n      indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n      indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n    });\n    return {\n      baseAxes: baseAxes,\n      otherAxes: otherAxes\n    };\n  };\n\n  Grid.create = function (ecModel, api) {\n    var grids = [];\n    ecModel.eachComponent('grid', function (gridModel, idx) {\n      var grid = new Grid(gridModel, ecModel, api);\n      grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n      // should be performed in create stage.\n\n      grid.resize(gridModel, api, true);\n      gridModel.coordinateSystem = grid;\n      grids.push(grid);\n    }); // Inject the coordinateSystems into seriesModel\n\n    ecModel.eachSeries(function (seriesModel) {\n      if (!isCartesian2DSeries(seriesModel)) {\n        return;\n      }\n\n      var axesModelMap = findAxisModels(seriesModel);\n      var xAxisModel = axesModelMap.xAxisModel;\n      var yAxisModel = axesModelMap.yAxisModel;\n      var gridModel = xAxisModel.getCoordSysModel();\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!gridModel) {\n          throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\n        }\n\n        if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\n          throw new Error('xAxis and yAxis must use the same grid');\n        }\n      }\n\n      var grid = gridModel.coordinateSystem;\n      seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    });\n    return grids;\n  }; // For deciding which dimensions to use when creating list data\n\n\n  Grid.dimensions = cartesian2DDimensions;\n  return Grid;\n}();\n/**\n * Check if the axis is used in the specified grid.\n */\n\n\nfunction isAxisUsedInTheGrid(axisModel, gridModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\n\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis, // Key: see `getOnZeroRecordKey`\nonZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  }; // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n\n\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get(['axisLine', 'onZero']);\n  var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\n\n  if (!onZero) {\n    return;\n  } // If target axis is specified.\n\n\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\n\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\n\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\n\nexport default Grid;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nexport function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n\n  if (axis.scale.isBlank()) {\n    return;\n  } // TODO: TYPE\n\n\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true\n  });\n\n  if (!ticksCoords.length) {\n    return;\n  } // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n\n\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = inner(axisView).splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x = void 0;\n    var y = void 0;\n    var width = void 0;\n    var height = void 0;\n\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      autoBatch: true,\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n\n  inner(axisView).splitAreaColors = newSplitAreaColors;\n}\nexport function rectCoordAxisHandleRemove(axisView) {\n  inner(axisView).splitAreaColors = null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport AxisBuilder from './AxisBuilder.js';\nimport AxisView from './AxisView.js';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper.js';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper.js';\nimport { isIntervalOrLogScale } from '../../scale/helper.js';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\n\nvar CartesianAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisView, _super);\n\n  function CartesianAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianAxisView.type;\n    _this.axisPointerClass = 'CartesianAxisPointer';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, zrUtil.extend({\n      handleAutoShown: function (elementType) {\n        var cartesians = gridModel.coordinateSystem.getCartesians();\n\n        for (var i = 0; i < cartesians.length; i++) {\n          if (isIntervalOrLogScale(cartesians[i].getOtherAxis(axisModel.axis).scale)) {\n            // Still show axis tick or axisLine if other axis is value / log\n            return true;\n          }\n        } // Not show axisTick or axisLine if other axis is category / time\n\n\n        return false;\n      }\n    }, layout));\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this._axisGroup, axisModel, gridModel);\n      }\n    }, this); // THIS is a special case for bar racing chart.\n    // Update the axis label from the natural initial layout to\n    // sorted layout should has no animation.\n\n    var isInitialSortFromBarRacing = payload && payload.type === 'changeAxisOrder' && payload.isInitSort;\n\n    if (!isInitialSortFromBarRacing) {\n      graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    }\n\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n\n  CartesianAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n\n  CartesianAxisView.type = 'cartesianAxis';\n  return CartesianAxisView;\n}(AxisView);\n\nvar axisElementBuilders = {\n  splitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      var tickValue = ticksCoords[i].tickValue;\n      axisGroup.add(new graphic.Line({\n        anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n        subPixelOptimize: true,\n        autoBatch: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n  minorSplitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n\n        axisGroup.add(new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          subPixelOptimize: true,\n          autoBatch: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        }));\n      }\n    }\n  },\n  splitArea: function (axisView, axisGroup, axisModel, gridModel) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\n  }\n};\n\nvar CartesianXAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianXAxisView, _super);\n\n  function CartesianXAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n\n  CartesianXAxisView.type = 'xAxis';\n  return CartesianXAxisView;\n}(CartesianAxisView);\n\nexport { CartesianXAxisView };\n\nvar CartesianYAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianYAxisView, _super);\n\n  function CartesianYAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n\n  CartesianYAxisView.type = 'yAxis';\n  return CartesianYAxisView;\n}(CartesianAxisView);\n\nexport { CartesianYAxisView };\nexport default CartesianAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nimport GridModel from '../../coord/cartesian/GridModel.js';\nimport { Rect } from '../../util/graphic.js';\nimport { defaults } from 'zrender/lib/core/util.js';\nimport { CartesianAxisModel } from '../../coord/cartesian/AxisModel.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport Grid from '../../coord/cartesian/Grid.js';\nimport { CartesianXAxisView, CartesianYAxisView } from '../axis/CartesianAxisView.js'; // Grid view\n\nvar GridView =\n/** @class */\nfunction (_super) {\n  __extends(GridView, _super);\n\n  function GridView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'grid';\n    return _this;\n  }\n\n  GridView.prototype.render = function (gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  };\n\n  GridView.type = 'grid';\n  return GridView;\n}(ComponentView);\n\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  offset: 0\n};\nexport function install(registers) {\n  registers.registerComponentView(GridView);\n  registers.registerComponentModel(GridModel);\n  registers.registerCoordinateSystem('cartesian2d', Grid);\n  axisModelCreator(registers, 'x', CartesianAxisModel, extraOption);\n  axisModelCreator(registers, 'y', CartesianAxisModel, extraOption);\n  registers.registerComponentView(CartesianXAxisView);\n  registers.registerComponentView(CartesianYAxisView);\n  registers.registerPreprocessor(function (option) {\n    // Only create grid when need\n    if (option.xAxis && option.yAxis && !option.grid) {\n      option.grid = {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installSimple } from './installSimple.js';\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nexport function install(registers) {\n  use(installSimple);\n  use(installAxisPointer);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isFunction, isString } from 'zrender/lib/core/util.js';\nvar samplers = {\n  average: function (frame) {\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    } // Return NaN if count is 0\n\n\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function (frame) {\n    var sum = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n\n    return sum;\n  },\n  max: function (frame) {\n    var max = -Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(max) ? max : NaN;\n  },\n  min: function (frame) {\n    var min = Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function (frame) {\n    return frame[0];\n  }\n};\n\nvar indexSampler = function (frame) {\n  return Math.round(frame.length / 2);\n};\n\nexport default function dataSample(seriesType) {\n  return {\n    seriesType: seriesType,\n    // FIXME:TS never used, so comment it\n    // modifyOutputEnd: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem;\n      var count = data.count(); // Only cartesian2d support down sampling. Disable it when there is few data.\n\n      if (count > 10 && coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent();\n        var dpr = api.getDevicePixelRatio(); // Coordinste system has been resized\n\n        var size = Math.abs(extent[1] - extent[0]) * (dpr || 1);\n        var rate = Math.round(count / size);\n\n        if (rate > 1) {\n          if (sampling === 'lttb') {\n            seriesModel.setData(data.lttbDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n          }\n\n          var sampler = void 0;\n\n          if (isString(sampling)) {\n            sampler = samplers[sampling];\n          } else if (isFunction(sampling)) {\n            sampler = sampling;\n          }\n\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\n\nvar BaseBarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BaseBarSeriesModel, _super);\n\n  function BaseBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BaseBarSeriesModel.type;\n    return _this;\n  }\n\n  BaseBarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  BaseBarSeriesModel.prototype.getMarkerPosition = function (value) {\n    var coordSys = this.coordinateSystem;\n\n    if (coordSys && coordSys.clampData) {\n      // PENDING if clamp ?\n      var pt = coordSys.dataToPoint(coordSys.clampData(value));\n      var data = this.getData();\n      var offset = data.getLayout('offset');\n      var size = data.getLayout('size');\n      var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n      pt[offsetIndex] += offset + size / 2;\n      return pt;\n    }\n\n    return [NaN, NaN];\n  };\n\n  BaseBarSeriesModel.type = 'series.__base_bar__';\n  BaseBarSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // stack: null\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    barMinHeight: 0,\n    barMinAngle: 0,\n    // cursor: null,\n    large: false,\n    largeThreshold: 400,\n    progressive: 3e3,\n    progressiveChunkMode: 'mod'\n  };\n  return BaseBarSeriesModel;\n}(SeriesModel);\n\nSeriesModel.registerClass(BaseBarSeriesModel);\nexport default BaseBarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { inheritDefaultOption } from '../../util/component.js';\n\nvar BarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BarSeriesModel, _super);\n\n  function BarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BarSeriesModel.type;\n    return _this;\n  }\n\n  BarSeriesModel.prototype.getInitialData = function () {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true,\n      createInvertedIndices: !!this.get('realtimeSort', true) || null\n    });\n  };\n  /**\n   * @override\n   */\n\n\n  BarSeriesModel.prototype.getProgressive = function () {\n    // Do not support progressive in normal mode.\n    return this.get('large') ? this.get('progressive') : false;\n  };\n  /**\n   * @override\n   */\n\n\n  BarSeriesModel.prototype.getProgressiveThreshold = function () {\n    // Do not support progressive in normal mode.\n    var progressiveThreshold = this.get('progressiveThreshold');\n    var largeThreshold = this.get('largeThreshold');\n\n    if (largeThreshold > progressiveThreshold) {\n      progressiveThreshold = largeThreshold;\n    }\n\n    return progressiveThreshold;\n  };\n\n  BarSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.rect(data.getItemLayout(dataIndex));\n  };\n\n  BarSeriesModel.type = 'series.bar';\n  BarSeriesModel.dependencies = ['grid', 'polar'];\n  BarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    // If clipped\n    // Only available on cartesian2d\n    clip: true,\n    roundCap: false,\n    showBackground: false,\n    backgroundStyle: {\n      color: 'rgba(180, 180, 180, 0.2)',\n      borderColor: null,\n      borderWidth: 0,\n      borderType: 'solid',\n      borderRadius: 0,\n      shadowBlur: 0,\n      shadowColor: null,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    realtimeSort: false\n  });\n  return BarSeriesModel;\n}(BaseBarSeriesModel);\n\nexport default BarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport { round } from '../../util/number.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\n\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel, done, during) {\n  var rect = cartesian.getArea();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get(['lineStyle', 'width']) || 2; // Expand the clip path a bit to avoid the border is clipped and looks thinner\n\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth; // fix: https://github.com/apache/incubator-echarts/issues/11369\n\n  x = Math.floor(x);\n  width = Math.round(width);\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n\n  if (hasAnimation) {\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var isAxisInversed = baseAxis.inverse;\n\n    if (isHorizontal) {\n      if (isAxisInversed) {\n        clipPath.shape.x += width;\n      }\n\n      clipPath.shape.width = 0;\n    } else {\n      if (!isAxisInversed) {\n        clipPath.shape.y += height;\n      }\n\n      clipPath.shape.height = 0;\n    }\n\n    var duringCb = isFunction(during) ? function (percent) {\n      during(percent, clipPath);\n    } : null;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height,\n        x: x,\n        y: y\n      }\n    }, seriesModel, null, done, duringCb);\n  }\n\n  return clipPath;\n}\n\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n\n  var r0 = round(sectorArea.r0, 1);\n  var r = round(sectorArea.r, 1);\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: r0,\n      r: r,\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n\n  if (hasAnimation) {\n    var isRadial = polar.getBaseAxis().dim === 'angle';\n\n    if (isRadial) {\n      clipPath.shape.endAngle = sectorArea.startAngle;\n    } else {\n      clipPath.shape.r = r0;\n    }\n\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle,\n        r: r\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createClipPath(coordSys, hasAnimation, seriesModel, done, during) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel, done, during);\n  }\n\n  return null;\n}\n\nexport { createGridClipPath, createPolarClipPath, createClipPath };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { Path } from '../graphic.js';\n/**\n * Sausage: similar to sector, but have half circle on both sides\n */\n\nvar SausageShape =\n/** @class */\nfunction () {\n  function SausageShape() {\n    this.cx = 0;\n    this.cy = 0;\n    this.r0 = 0;\n    this.r = 0;\n    this.startAngle = 0;\n    this.endAngle = Math.PI * 2;\n    this.clockwise = true;\n  }\n\n  return SausageShape;\n}();\n\nvar SausagePath =\n/** @class */\nfunction (_super) {\n  __extends(SausagePath, _super);\n\n  function SausagePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'sausage';\n    return _this;\n  }\n\n  SausagePath.prototype.getDefaultShape = function () {\n    return new SausageShape();\n  };\n\n  SausagePath.prototype.buildPath = function (ctx, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var r0 = Math.max(shape.r0 || 0, 0);\n    var r = Math.max(shape.r, 0);\n    var dr = (r - r0) * 0.5;\n    var rCenter = r0 + dr;\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var PI2 = Math.PI * 2;\n    var lessThanCircle = clockwise ? endAngle - startAngle < PI2 : startAngle - endAngle < PI2;\n\n    if (!lessThanCircle) {\n      // Normalize angles\n      startAngle = endAngle - (clockwise ? PI2 : -PI2);\n    }\n\n    var unitStartX = Math.cos(startAngle);\n    var unitStartY = Math.sin(startAngle);\n    var unitEndX = Math.cos(endAngle);\n    var unitEndY = Math.sin(endAngle);\n\n    if (lessThanCircle) {\n      ctx.moveTo(unitStartX * r0 + cx, unitStartY * r0 + cy);\n      ctx.arc(unitStartX * rCenter + cx, unitStartY * rCenter + cy, dr, -Math.PI + startAngle, startAngle, !clockwise);\n    } else {\n      ctx.moveTo(unitStartX * r + cx, unitStartY * r + cy);\n    }\n\n    ctx.arc(cx, cy, r, startAngle, endAngle, !clockwise);\n    ctx.arc(unitEndX * rCenter + cx, unitEndY * rCenter + cy, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\n\n    if (r0 !== 0) {\n      ctx.arc(cx, cy, r0, endAngle, startAngle, clockwise);\n    } // ctx.closePath();\n\n  };\n\n  return SausagePath;\n}(Path);\n\nexport default SausagePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function isCoordinateSystemType(coordSys, type) {\n  return coordSys.type === type;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isArray } from 'zrender/lib/core/util.js';\n/**\n * @return label string. Not null/undefined\n */\n\nexport function getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  var len = labelDims.length; // Simple optimization (in lots of cases, label dims length is 1)\n\n  if (len === 1) {\n    var rawVal = retrieveRawValue(data, dataIndex, labelDims[0]);\n    return rawVal != null ? rawVal + '' : null;\n  } else if (len) {\n    var vals = [];\n\n    for (var i = 0; i < labelDims.length; i++) {\n      vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\n    }\n\n    return vals.join(' ');\n  }\n}\nexport function getDefaultInterpolatedLabel(data, interpolatedValue) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n\n  if (!isArray(interpolatedValue)) {\n    return interpolatedValue + '';\n  }\n\n  var vals = [];\n\n  for (var i = 0; i < labelDims.length; i++) {\n    var dimIndex = data.getDimensionIndex(labelDims[i]);\n\n    if (dimIndex >= 0) {\n      vals.push(interpolatedValue[dimIndex]);\n    }\n  }\n\n  return vals.join(' ');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { calculateTextPosition } from 'zrender/lib/contain/text.js';\nimport { isArray, isNumber } from 'zrender/lib/core/util.js';\nexport function createSectorCalculateTextPosition(positionMapping, opts) {\n  opts = opts || {};\n  var isRoundCap = opts.isRoundCap;\n  return function (out, opts, boundingRect) {\n    var textPosition = opts.position;\n\n    if (!textPosition || textPosition instanceof Array) {\n      return calculateTextPosition(out, opts, boundingRect);\n    }\n\n    var mappedSectorPosition = positionMapping(textPosition);\n    var distance = opts.distance != null ? opts.distance : 5;\n    var sector = this.shape;\n    var cx = sector.cx;\n    var cy = sector.cy;\n    var r = sector.r;\n    var r0 = sector.r0;\n    var middleR = (r + r0) / 2;\n    var startAngle = sector.startAngle;\n    var endAngle = sector.endAngle;\n    var middleAngle = (startAngle + endAngle) / 2;\n    var extraDist = isRoundCap ? Math.abs(r - r0) / 2 : 0;\n    var mathCos = Math.cos;\n    var mathSin = Math.sin; // base position: top-left\n\n    var x = cx + r * mathCos(startAngle);\n    var y = cy + r * mathSin(startAngle);\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n\n    switch (mappedSectorPosition) {\n      case 'startArc':\n        x = cx + (r0 - distance) * mathCos(middleAngle);\n        y = cy + (r0 - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n\n      case 'insideStartArc':\n        x = cx + (r0 + distance) * mathCos(middleAngle);\n        y = cy + (r0 + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n\n      case 'startAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, distance + extraDist, false);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'insideStartAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, -distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, -distance + extraDist, false);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'middle':\n        x = cx + middleR * mathCos(middleAngle);\n        y = cy + middleR * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'endArc':\n        x = cx + (r + distance) * mathCos(middleAngle);\n        y = cy + (r + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n\n      case 'insideEndArc':\n        x = cx + (r - distance) * mathCos(middleAngle);\n        y = cy + (r - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n\n      case 'endAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, distance + extraDist, true);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'insideEndAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, -distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, -distance + extraDist, true);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n\n      default:\n        return calculateTextPosition(out, opts, boundingRect);\n    }\n\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n  };\n}\nexport function setSectorTextRotation(sector, textPosition, positionMapping, rotateType) {\n  if (isNumber(rotateType)) {\n    // user-set rotation\n    sector.setTextConfig({\n      rotation: rotateType\n    });\n    return;\n  } else if (isArray(textPosition)) {\n    // user-set position, use 0 as auto rotation\n    sector.setTextConfig({\n      rotation: 0\n    });\n    return;\n  }\n\n  var shape = sector.shape;\n  var startAngle = shape.clockwise ? shape.startAngle : shape.endAngle;\n  var endAngle = shape.clockwise ? shape.endAngle : shape.startAngle;\n  var middleAngle = (startAngle + endAngle) / 2;\n  var anchorAngle;\n  var mappedSectorPosition = positionMapping(textPosition);\n\n  switch (mappedSectorPosition) {\n    case 'startArc':\n    case 'insideStartArc':\n    case 'middle':\n    case 'insideEndArc':\n    case 'endArc':\n      anchorAngle = middleAngle;\n      break;\n\n    case 'startAngle':\n    case 'insideStartAngle':\n      anchorAngle = startAngle;\n      break;\n\n    case 'endAngle':\n    case 'insideEndAngle':\n      anchorAngle = endAngle;\n      break;\n\n    default:\n      sector.setTextConfig({\n        rotation: 0\n      });\n      return;\n  }\n\n  var rotate = Math.PI * 1.5 - anchorAngle;\n  /**\n   * TODO: labels with rotate > Math.PI / 2 should be rotate another\n   * half round flipped to increase readability. However, only middle\n   * position supports this for now, because in other positions, the\n   * anchor point is not at the center of the text, so the positions\n   * after rotating is not as expected.\n   */\n\n  if (mappedSectorPosition === 'middle' && rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\n    rotate -= Math.PI;\n  }\n\n  sector.setTextConfig({\n    rotation: rotate\n  });\n}\n\nfunction adjustAngleDistanceX(angle, distance, isEnd) {\n  return distance * Math.sin(angle) * (isEnd ? -1 : 1);\n}\n\nfunction adjustAngleDistanceY(angle, distance, isEnd) {\n  return distance * Math.cos(angle) * (isEnd ? 1 : -1);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport { extend, each, map } from 'zrender/lib/core/util.js';\nimport { Rect, Sector, updateProps, initProps, removeElementWithFadeOut, traverseElements } from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels, setLabelValueAnimation, labelInner } from '../../label/labelStyle.js';\nimport { throttle } from '../../util/throttle.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport Sausage from '../../util/shape/sausage.js';\nimport ChartView from '../../view/Chart.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper.js';\nimport { warn } from '../../util/log.js';\nimport { createSectorCalculateTextPosition, setSectorTextRotation } from '../../label/sectorLabel.js';\nimport { saveOldStyle } from '../../animation/basicTrasition.js';\nvar mathMax = Math.max;\nvar mathMin = Math.min;\n\nfunction getClipArea(coord, data) {\n  var coordSysClipArea = coord.getArea && coord.getArea();\n\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var baseAxis = coord.getBaseAxis(); // When boundaryGap is false or using time axis. bar may exceed the grid.\n    // We should not clip this part.\n    // See test/bar2.html\n\n    if (baseAxis.type !== 'category' || !baseAxis.onBand) {\n      var expandWidth = data.getLayout('bandWidth');\n\n      if (baseAxis.isHorizontal()) {\n        coordSysClipArea.x -= expandWidth;\n        coordSysClipArea.width += expandWidth * 2;\n      } else {\n        coordSysClipArea.y -= expandWidth;\n        coordSysClipArea.height += expandWidth * 2;\n      }\n    }\n  }\n\n  return coordSysClipArea;\n}\n\nvar BarView =\n/** @class */\nfunction (_super) {\n  __extends(BarView, _super);\n\n  function BarView() {\n    var _this = _super.call(this) || this;\n\n    _this.type = BarView.type;\n    _this._isFirstFrame = true;\n    return _this;\n  }\n\n  BarView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    this._model = seriesModel;\n\n    this._removeOnRenderedListener(api);\n\n    this._updateDrawMode(seriesModel);\n\n    var coordinateSystemType = seriesModel.get('coordinateSystem');\n\n    if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n      // Clear previously rendered progressive elements.\n      this._progressiveEls = null;\n      this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api, payload);\n    } else if (process.env.NODE_ENV !== 'production') {\n      warn('Only cartesian2d and polar supported for bar.');\n    }\n  };\n\n  BarView.prototype.incrementalPrepareRender = function (seriesModel) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel); // incremental also need to clip, otherwise might be overlow.\n    // But must not set clip in each frame, otherwise all of the children will be marked redraw.\n\n\n    this._updateLargeClip(seriesModel);\n  };\n\n  BarView.prototype.incrementalRender = function (params, seriesModel) {\n    // Reset\n    this._progressiveEls = []; // Do not support progressive in normal mode.\n\n    this._incrementalRenderLarge(params, seriesModel);\n  };\n\n  BarView.prototype.eachRendered = function (cb) {\n    traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  BarView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  };\n\n  BarView.prototype._renderNormal = function (seriesModel, ecModel, api, payload) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coord = seriesModel.coordinateSystem;\n    var baseAxis = coord.getBaseAxis();\n    var isHorizontalOrRadial;\n\n    if (coord.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n    } else if (coord.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n    }\n\n    var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n    var realtimeSortCfg = shouldRealtimeSort(seriesModel, coord);\n\n    if (realtimeSortCfg) {\n      this._enableRealtimeSort(realtimeSortCfg, data, api);\n    }\n\n    var needsClip = seriesModel.get('clip', true) || realtimeSortCfg;\n    var coordSysClipArea = getClipArea(coord, data); // If there is clipPath created in large mode. Remove it.\n\n    group.removeClipPath(); // We don't use clipPath in normal mode because we needs a perfect animation\n    // And don't want the label are clipped.\n\n    var roundCap = seriesModel.get('roundCap', true);\n    var drawBackground = seriesModel.get('showBackground', true);\n    var backgroundModel = seriesModel.getModel('backgroundStyle');\n    var barBorderRadius = backgroundModel.get('borderRadius') || 0;\n    var bgEls = [];\n    var oldBgEls = this._backgroundEls;\n    var isInitSort = payload && payload.isInitSort;\n    var isChangeOrder = payload && payload.type === 'changeAxisOrder';\n\n    function createBackground(dataIndex) {\n      var bgLayout = getLayout[coord.type](data, dataIndex);\n      var bgEl = createBackgroundEl(coord, isHorizontalOrRadial, bgLayout);\n      bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n      if (coord.type === 'cartesian2d') {\n        bgEl.setShape('r', barBorderRadius);\n      }\n\n      bgEls[dataIndex] = bgEl;\n      return bgEl;\n    }\n\n    ;\n    data.diff(oldData).add(function (dataIndex) {\n      var itemModel = data.getItemModel(dataIndex);\n      var layout = getLayout[coord.type](data, dataIndex, itemModel);\n\n      if (drawBackground) {\n        createBackground(dataIndex);\n      } // If dataZoom in filteMode: 'empty', the baseValue can be set as NaN in \"axisProxy\".\n\n\n      if (!data.hasValue(dataIndex) || !isValidLayout[coord.type](layout)) {\n        return;\n      }\n\n      var isClipped = false;\n\n      if (needsClip) {\n        // Clip will modify the layout params.\n        // And return a boolean to determine if the shape are fully clipped.\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n      }\n\n      var el = elementCreator[coord.type](seriesModel, data, dataIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, false, roundCap);\n\n      if (realtimeSortCfg) {\n        /**\n         * Force label animation because even if the element is\n         * ignored because it's clipped, it may not be clipped after\n         * changing order. Then, if not using forceLabelAnimation,\n         * the label animation was never started, in which case,\n         * the label will be the final value and doesn't have label\n         * animation.\n         */\n        el.forceLabelAnimation = true;\n      }\n\n      updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, dataIndex, isHorizontalOrRadial, false, false);\n      } else {\n        initProps(el, {\n          shape: layout\n        }, seriesModel, dataIndex);\n      }\n\n      data.setItemGraphicEl(dataIndex, el);\n      group.add(el);\n      el.ignore = isClipped;\n    }).update(function (newIndex, oldIndex) {\n      var itemModel = data.getItemModel(newIndex);\n      var layout = getLayout[coord.type](data, newIndex, itemModel);\n\n      if (drawBackground) {\n        var bgEl = void 0;\n\n        if (oldBgEls.length === 0) {\n          bgEl = createBackground(oldIndex);\n        } else {\n          bgEl = oldBgEls[oldIndex];\n          bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n          if (coord.type === 'cartesian2d') {\n            bgEl.setShape('r', barBorderRadius);\n          }\n\n          bgEls[newIndex] = bgEl;\n        }\n\n        var bgLayout = getLayout[coord.type](data, newIndex);\n        var shape = createBackgroundShape(isHorizontalOrRadial, bgLayout, coord);\n        updateProps(bgEl, {\n          shape: shape\n        }, animationModel, newIndex);\n      }\n\n      var el = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex) || !isValidLayout[coord.type](layout)) {\n        group.remove(el);\n        return;\n      }\n\n      var isClipped = false;\n\n      if (needsClip) {\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n\n        if (isClipped) {\n          group.remove(el);\n        }\n      }\n\n      if (!el) {\n        el = elementCreator[coord.type](seriesModel, data, newIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, !!el, roundCap);\n      } else {\n        saveOldStyle(el);\n      }\n\n      if (realtimeSortCfg) {\n        el.forceLabelAnimation = true;\n      }\n\n      if (isChangeOrder) {\n        var textEl = el.getTextContent();\n\n        if (textEl) {\n          var labelInnerStore = labelInner(textEl);\n\n          if (labelInnerStore.prevValue != null) {\n            /**\n             * Set preValue to be value so that no new label\n             * should be started, otherwise, it will take a full\n             * `animationDurationUpdate` time to finish the\n             * animation, which is not expected.\n             */\n            labelInnerStore.prevValue = labelInnerStore.value;\n          }\n        }\n      } // Not change anything if only order changed.\n      // Especially not change label.\n      else {\n          updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n        }\n\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, newIndex, isHorizontalOrRadial, true, isChangeOrder);\n      } else {\n        updateProps(el, {\n          shape: layout\n        }, seriesModel, newIndex, null);\n      }\n\n      data.setItemGraphicEl(newIndex, el);\n      el.ignore = isClipped;\n      group.add(el);\n    }).remove(function (dataIndex) {\n      var el = oldData.getItemGraphicEl(dataIndex);\n      el && removeElementWithFadeOut(el, seriesModel, dataIndex);\n    }).execute();\n    var bgGroup = this._backgroundGroup || (this._backgroundGroup = new Group());\n    bgGroup.removeAll();\n\n    for (var i = 0; i < bgEls.length; ++i) {\n      bgGroup.add(bgEls[i]);\n    }\n\n    group.add(bgGroup);\n    this._backgroundEls = bgEls;\n    this._data = data;\n  };\n\n  BarView.prototype._renderLarge = function (seriesModel, ecModel, api) {\n    this._clear();\n\n    createLarge(seriesModel, this.group);\n\n    this._updateLargeClip(seriesModel);\n  };\n\n  BarView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    this._removeBackground();\n\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\n  };\n\n  BarView.prototype._updateLargeClip = function (seriesModel) {\n    // Use clipPath in large mode.\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n    var group = this.group;\n\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n  };\n\n  BarView.prototype._enableRealtimeSort = function (realtimeSortCfg, data, api) {\n    var _this = this; // If no data in the first frame, wait for data to initSort\n\n\n    if (!data.count()) {\n      return;\n    }\n\n    var baseAxis = realtimeSortCfg.baseAxis;\n\n    if (this._isFirstFrame) {\n      this._dispatchInitSort(data, realtimeSortCfg, api);\n\n      this._isFirstFrame = false;\n    } else {\n      var orderMapping_1 = function (idx) {\n        var el = data.getItemGraphicEl(idx);\n        var shape = el && el.shape;\n        return shape && // The result should be consistent with the initial sort by data value.\n        // Do not support the case that both positive and negative exist.\n        Math.abs(baseAxis.isHorizontal() ? shape.height : shape.width) // If data is NaN, shape.xxx may be NaN, so use || 0 here in case\n        || 0;\n      };\n\n      this._onRendered = function () {\n        _this._updateSortWithinSameData(data, orderMapping_1, baseAxis, api);\n      };\n\n      api.getZr().on('rendered', this._onRendered);\n    }\n  };\n\n  BarView.prototype._dataSort = function (data, baseAxis, orderMapping) {\n    var info = [];\n    data.each(data.mapDimension(baseAxis.dim), function (ordinalNumber, dataIdx) {\n      var mappedValue = orderMapping(dataIdx);\n      mappedValue = mappedValue == null ? NaN : mappedValue;\n      info.push({\n        dataIndex: dataIdx,\n        mappedValue: mappedValue,\n        ordinalNumber: ordinalNumber\n      });\n    });\n    info.sort(function (a, b) {\n      // If NaN, it will be treated as min val.\n      return b.mappedValue - a.mappedValue;\n    });\n    return {\n      ordinalNumbers: map(info, function (item) {\n        return item.ordinalNumber;\n      })\n    };\n  };\n\n  BarView.prototype._isOrderChangedWithinSameData = function (data, orderMapping, baseAxis) {\n    var scale = baseAxis.scale;\n    var ordinalDataDim = data.mapDimension(baseAxis.dim);\n    var lastValue = Number.MAX_VALUE;\n\n    for (var tickNum = 0, len = scale.getOrdinalMeta().categories.length; tickNum < len; ++tickNum) {\n      var rawIdx = data.rawIndexOf(ordinalDataDim, scale.getRawOrdinalNumber(tickNum));\n      var value = rawIdx < 0 // If some tick have no bar, the tick will be treated as min.\n      ? Number.MIN_VALUE // PENDING: if dataZoom on baseAxis exits, is it a performance issue?\n      : orderMapping(data.indexOfRawIndex(rawIdx));\n\n      if (value > lastValue) {\n        return true;\n      }\n\n      lastValue = value;\n    }\n\n    return false;\n  };\n  /*\n   * Consider the case when A and B changed order, whose representing\n   * bars are both out of sight, we don't wish to trigger reorder action\n   * as long as the order in the view doesn't change.\n   */\n\n\n  BarView.prototype._isOrderDifferentInView = function (orderInfo, baseAxis) {\n    var scale = baseAxis.scale;\n    var extent = scale.getExtent();\n    var tickNum = Math.max(0, extent[0]);\n    var tickMax = Math.min(extent[1], scale.getOrdinalMeta().categories.length - 1);\n\n    for (; tickNum <= tickMax; ++tickNum) {\n      if (orderInfo.ordinalNumbers[tickNum] !== scale.getRawOrdinalNumber(tickNum)) {\n        return true;\n      }\n    }\n  };\n\n  BarView.prototype._updateSortWithinSameData = function (data, orderMapping, baseAxis, api) {\n    if (!this._isOrderChangedWithinSameData(data, orderMapping, baseAxis)) {\n      return;\n    }\n\n    var sortInfo = this._dataSort(data, baseAxis, orderMapping);\n\n    if (this._isOrderDifferentInView(sortInfo, baseAxis)) {\n      this._removeOnRenderedListener(api);\n\n      api.dispatchAction({\n        type: 'changeAxisOrder',\n        componentType: baseAxis.dim + 'Axis',\n        axisId: baseAxis.index,\n        sortInfo: sortInfo\n      });\n    }\n  };\n\n  BarView.prototype._dispatchInitSort = function (data, realtimeSortCfg, api) {\n    var baseAxis = realtimeSortCfg.baseAxis;\n\n    var sortResult = this._dataSort(data, baseAxis, function (dataIdx) {\n      return data.get(data.mapDimension(realtimeSortCfg.otherAxis.dim), dataIdx);\n    });\n\n    api.dispatchAction({\n      type: 'changeAxisOrder',\n      componentType: baseAxis.dim + 'Axis',\n      isInitSort: true,\n      axisId: baseAxis.index,\n      sortInfo: sortResult\n    });\n  };\n\n  BarView.prototype.remove = function (ecModel, api) {\n    this._clear(this._model);\n\n    this._removeOnRenderedListener(api);\n  };\n\n  BarView.prototype.dispose = function (ecModel, api) {\n    this._removeOnRenderedListener(api);\n  };\n\n  BarView.prototype._removeOnRenderedListener = function (api) {\n    if (this._onRendered) {\n      api.getZr().off('rendered', this._onRendered);\n      this._onRendered = null;\n    }\n  };\n\n  BarView.prototype._clear = function (model) {\n    var group = this.group;\n    var data = this._data;\n\n    if (model && model.isAnimationEnabled() && data && !this._isLargeDraw) {\n      this._removeBackground();\n\n      this._backgroundEls = [];\n      data.eachItemGraphicEl(function (el) {\n        removeElementWithFadeOut(el, model, getECData(el).dataIndex);\n      });\n    } else {\n      group.removeAll();\n    }\n\n    this._data = null;\n    this._isFirstFrame = true;\n  };\n\n  BarView.prototype._removeBackground = function () {\n    this.group.remove(this._backgroundGroup);\n    this._backgroundGroup = null;\n  };\n\n  BarView.type = 'bar';\n  return BarView;\n}(ChartView);\n\nvar clip = {\n  cartesian2d: function (coordSysBoundingRect, layout) {\n    var signWidth = layout.width < 0 ? -1 : 1;\n    var signHeight = layout.height < 0 ? -1 : 1; // Needs positive width and height\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    var coordSysX2 = coordSysBoundingRect.x + coordSysBoundingRect.width;\n    var coordSysY2 = coordSysBoundingRect.y + coordSysBoundingRect.height;\n    var x = mathMax(layout.x, coordSysBoundingRect.x);\n    var x2 = mathMin(layout.x + layout.width, coordSysX2);\n    var y = mathMax(layout.y, coordSysBoundingRect.y);\n    var y2 = mathMin(layout.y + layout.height, coordSysY2);\n    var xClipped = x2 < x;\n    var yClipped = y2 < y; // When xClipped or yClipped, the element will be marked as `ignore`.\n    // But we should also place the element at the edge of the coord sys bounding rect.\n    // Beause if data changed and the bar show again, its transition animaiton\n    // will begin at this place.\n\n    layout.x = xClipped && x > coordSysX2 ? x2 : x;\n    layout.y = yClipped && y > coordSysY2 ? y2 : y;\n    layout.width = xClipped ? 0 : x2 - x;\n    layout.height = yClipped ? 0 : y2 - y; // Reverse back\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    return xClipped || yClipped;\n  },\n  polar: function (coordSysClipArea, layout) {\n    var signR = layout.r0 <= layout.r ? 1 : -1; // Make sure r is larger than r0\n\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n\n    var r = mathMin(layout.r, coordSysClipArea.r);\n    var r0 = mathMax(layout.r0, coordSysClipArea.r0);\n    layout.r = r;\n    layout.r0 = r0;\n    var clipped = r - r0 < 0; // Reverse back\n\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n\n    return clipped;\n  }\n};\nvar elementCreator = {\n  cartesian2d: function (seriesModel, data, newIndex, layout, isHorizontal, animationModel, axisModel, isUpdate, roundCap) {\n    var rect = new Rect({\n      shape: extend({}, layout),\n      z2: 1\n    });\n    rect.__dataIndex = newIndex;\n    rect.name = 'item';\n\n    if (animationModel) {\n      var rectShape = rect.shape;\n      var animateProperty = isHorizontal ? 'height' : 'width';\n      rectShape[animateProperty] = 0;\n    }\n\n    return rect;\n  },\n  polar: function (seriesModel, data, newIndex, layout, isRadial, animationModel, axisModel, isUpdate, roundCap) {\n    var ShapeClass = !isRadial && roundCap ? Sausage : Sector;\n    var sector = new ShapeClass({\n      shape: layout,\n      z2: 1\n    });\n    sector.name = 'item';\n    var positionMap = createPolarPositionMapping(isRadial);\n    sector.calculateTextPosition = createSectorCalculateTextPosition(positionMap, {\n      isRoundCap: ShapeClass === Sausage\n    }); // Animation\n\n    if (animationModel) {\n      var sectorShape = sector.shape;\n      var animateProperty = isRadial ? 'r' : 'endAngle';\n      var animateTarget = {};\n      sectorShape[animateProperty] = isRadial ? 0 : layout.startAngle;\n      animateTarget[animateProperty] = layout[animateProperty];\n      (isUpdate ? updateProps : initProps)(sector, {\n        shape: animateTarget // __value: typeof dataValue === 'string' ? parseInt(dataValue, 10) : dataValue\n\n      }, animationModel);\n    }\n\n    return sector;\n  }\n};\n\nfunction shouldRealtimeSort(seriesModel, coordSys) {\n  var realtimeSortOption = seriesModel.get('realtimeSort', true);\n  var baseAxis = coordSys.getBaseAxis();\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (realtimeSortOption) {\n      if (baseAxis.type !== 'category') {\n        warn('`realtimeSort` will not work because this bar series is not based on a category axis.');\n      }\n\n      if (coordSys.type !== 'cartesian2d') {\n        warn('`realtimeSort` will not work because this bar series is not on cartesian2d.');\n      }\n    }\n  }\n\n  if (realtimeSortOption && baseAxis.type === 'category' && coordSys.type === 'cartesian2d') {\n    return {\n      baseAxis: baseAxis,\n      otherAxis: coordSys.getOtherAxis(baseAxis)\n    };\n  }\n}\n\nfunction updateRealtimeAnimation(realtimeSortCfg, seriesAnimationModel, el, layout, newIndex, isHorizontal, isUpdate, isChangeOrder) {\n  var seriesTarget;\n  var axisTarget;\n\n  if (isHorizontal) {\n    axisTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n    seriesTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n  } else {\n    axisTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n    seriesTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n  }\n\n  if (!isChangeOrder) {\n    // Keep the original growth animation if only axis order changed.\n    // Not start a new animation.\n    (isUpdate ? updateProps : initProps)(el, {\n      shape: seriesTarget\n    }, seriesAnimationModel, newIndex, null);\n  }\n\n  var axisAnimationModel = seriesAnimationModel ? realtimeSortCfg.baseAxis.model : null;\n  (isUpdate ? updateProps : initProps)(el, {\n    shape: axisTarget\n  }, axisAnimationModel, newIndex);\n}\n\nfunction checkPropertiesNotValid(obj, props) {\n  for (var i = 0; i < props.length; i++) {\n    if (!isFinite(obj[props[i]])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar rectPropties = ['x', 'y', 'width', 'height'];\nvar polarPropties = ['cx', 'cy', 'r', 'startAngle', 'endAngle'];\nvar isValidLayout = {\n  cartesian2d: function (layout) {\n    return !checkPropertiesNotValid(layout, rectPropties);\n  },\n  polar: function (layout) {\n    return !checkPropertiesNotValid(layout, polarPropties);\n  }\n};\nvar getLayout = {\n  // itemModel is only used to get borderWidth, which is not needed\n  // when calculating bar background layout.\n  cartesian2d: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    var fixedLineWidth = itemModel ? getLineWidth(itemModel, layout) : 0; // fix layout with lineWidth\n\n    var signX = layout.width > 0 ? 1 : -1;\n    var signY = layout.height > 0 ? 1 : -1;\n    return {\n      x: layout.x + signX * fixedLineWidth / 2,\n      y: layout.y + signY * fixedLineWidth / 2,\n      width: layout.width - signX * fixedLineWidth,\n      height: layout.height - signY * fixedLineWidth\n    };\n  },\n  polar: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    return {\n      cx: layout.cx,\n      cy: layout.cy,\n      r0: layout.r0,\n      r: layout.r,\n      startAngle: layout.startAngle,\n      endAngle: layout.endAngle,\n      clockwise: layout.clockwise\n    };\n  }\n};\n\nfunction isZeroOnPolar(layout) {\n  return layout.startAngle != null && layout.endAngle != null && layout.startAngle === layout.endAngle;\n}\n\nfunction createPolarPositionMapping(isRadial) {\n  return function (isRadial) {\n    var arcOrAngle = isRadial ? 'Arc' : 'Angle';\n    return function (position) {\n      switch (position) {\n        case 'start':\n        case 'insideStart':\n        case 'end':\n        case 'insideEnd':\n          return position + arcOrAngle;\n\n        default:\n          return position;\n      }\n    };\n  }(isRadial);\n}\n\nfunction updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, isPolar) {\n  var style = data.getItemVisual(dataIndex, 'style');\n\n  if (!isPolar) {\n    el.setShape('r', itemModel.get(['itemStyle', 'borderRadius']) || 0);\n  }\n\n  el.useStyle(style);\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && el.attr('cursor', cursorStyle);\n  var labelPositionOutside = isPolar ? isHorizontalOrRadial ? layout.r >= layout.r0 ? 'endArc' : 'startArc' : layout.endAngle >= layout.startAngle ? 'endAngle' : 'startAngle' : isHorizontalOrRadial ? layout.height >= 0 ? 'bottom' : 'top' : layout.width >= 0 ? 'right' : 'left';\n  var labelStatesModels = getLabelStatesModels(itemModel);\n  setLabelStyle(el, labelStatesModels, {\n    labelFetcher: seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\n    inheritColor: style.fill,\n    defaultOpacity: style.opacity,\n    defaultOutsidePosition: labelPositionOutside\n  });\n  var label = el.getTextContent();\n\n  if (isPolar && label) {\n    var position = itemModel.get(['label', 'position']);\n    el.textConfig.inside = position === 'middle' ? true : null;\n    setSectorTextRotation(el, position === 'outside' ? labelPositionOutside : position, createPolarPositionMapping(isHorizontalOrRadial), itemModel.get(['label', 'rotate']));\n  }\n\n  setLabelValueAnimation(label, labelStatesModels, seriesModel.getRawValue(dataIndex), function (value) {\n    return getDefaultInterpolatedLabel(data, value);\n  });\n  var emphasisModel = itemModel.getModel(['emphasis']);\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  setStatesStylesFromModel(el, itemModel);\n\n  if (isZeroOnPolar(layout)) {\n    el.style.fill = 'none';\n    el.style.stroke = 'none';\n    each(el.states, function (state) {\n      if (state.style) {\n        state.style.fill = state.style.stroke = 'none';\n      }\n    });\n  }\n} // In case width or height are too small.\n\n\nfunction getLineWidth(itemModel, rawLayout) {\n  // Has no border.\n  var borderColor = itemModel.get(['itemStyle', 'borderColor']);\n\n  if (!borderColor || borderColor === 'none') {\n    return 0;\n  }\n\n  var lineWidth = itemModel.get(['itemStyle', 'borderWidth']) || 0; // width or height may be NaN for empty data\n\n  var width = isNaN(rawLayout.width) ? Number.MAX_VALUE : Math.abs(rawLayout.width);\n  var height = isNaN(rawLayout.height) ? Number.MAX_VALUE : Math.abs(rawLayout.height);\n  return Math.min(lineWidth, width, height);\n}\n\nvar LagePathShape =\n/** @class */\nfunction () {\n  function LagePathShape() {}\n\n  return LagePathShape;\n}();\n\nvar LargePath =\n/** @class */\nfunction (_super) {\n  __extends(LargePath, _super);\n\n  function LargePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'largeBar';\n    return _this;\n  }\n\n  LargePath.prototype.getDefaultShape = function () {\n    return new LagePathShape();\n  };\n\n  LargePath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    var baseDimIdx = this.baseDimIdx;\n    var valueDimIdx = 1 - this.baseDimIdx;\n    var startPoint = [];\n    var size = [];\n    var barWidth = this.barWidth;\n\n    for (var i = 0; i < points.length; i += 3) {\n      size[baseDimIdx] = barWidth;\n      size[valueDimIdx] = points[i + 2];\n      startPoint[baseDimIdx] = points[i + baseDimIdx];\n      startPoint[valueDimIdx] = points[i + valueDimIdx];\n      ctx.rect(startPoint[0], startPoint[1], size[0], size[1]);\n    }\n  };\n\n  return LargePath;\n}(Path);\n\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\n  // TODO support polar\n  var data = seriesModel.getData();\n  var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\n  var largeDataIndices = data.getLayout('largeDataIndices');\n  var barWidth = data.getLayout('size');\n  var backgroundModel = seriesModel.getModel('backgroundStyle');\n  var bgPoints = data.getLayout('largeBackgroundPoints');\n\n  if (bgPoints) {\n    var bgEl = new LargePath({\n      shape: {\n        points: bgPoints\n      },\n      incremental: !!incremental,\n      silent: true,\n      z2: 0\n    });\n    bgEl.baseDimIdx = baseDimIdx;\n    bgEl.largeDataIndices = largeDataIndices;\n    bgEl.barWidth = barWidth;\n    bgEl.useStyle(backgroundModel.getItemStyle());\n    group.add(bgEl);\n    progressiveEls && progressiveEls.push(bgEl);\n  }\n\n  var el = new LargePath({\n    shape: {\n      points: data.getLayout('largePoints')\n    },\n    incremental: !!incremental,\n    z2: 1\n  });\n  el.baseDimIdx = baseDimIdx;\n  el.largeDataIndices = largeDataIndices;\n  el.barWidth = barWidth;\n  group.add(el);\n  el.useStyle(data.getVisual('style')); // Enable tooltip and user mouse/touch event handlers.\n\n  getECData(el).seriesIndex = seriesModel.seriesIndex;\n\n  if (!seriesModel.get('silent')) {\n    el.on('mousedown', largePathUpdateDataIndex);\n    el.on('mousemove', largePathUpdateDataIndex);\n  }\n\n  progressiveEls && progressiveEls.push(el);\n} // Use throttle to avoid frequently traverse to find dataIndex.\n\n\nvar largePathUpdateDataIndex = throttle(function (event) {\n  var largePath = this;\n  var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\n  getECData(largePath).dataIndex = dataIndex >= 0 ? dataIndex : null;\n}, 30, false);\n\nfunction largePathFindDataIndex(largePath, x, y) {\n  var baseDimIdx = largePath.baseDimIdx;\n  var valueDimIdx = 1 - baseDimIdx;\n  var points = largePath.shape.points;\n  var largeDataIndices = largePath.largeDataIndices;\n  var startPoint = [];\n  var size = [];\n  var barWidth = largePath.barWidth;\n\n  for (var i = 0, len = points.length / 3; i < len; i++) {\n    var ii = i * 3;\n    size[baseDimIdx] = barWidth;\n    size[valueDimIdx] = points[ii + 2];\n    startPoint[baseDimIdx] = points[ii + baseDimIdx];\n    startPoint[valueDimIdx] = points[ii + valueDimIdx];\n\n    if (size[valueDimIdx] < 0) {\n      startPoint[valueDimIdx] += size[valueDimIdx];\n      size[valueDimIdx] = -size[valueDimIdx];\n    }\n\n    if (x >= startPoint[0] && x <= startPoint[0] + size[0] && y >= startPoint[1] && y <= startPoint[1] + size[1]) {\n      return largeDataIndices[i];\n    }\n  }\n\n  return -1;\n}\n\nfunction createBackgroundShape(isHorizontalOrRadial, layout, coord) {\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var rectShape = layout;\n    var coordLayout = coord.getArea();\n    return {\n      x: isHorizontalOrRadial ? rectShape.x : coordLayout.x,\n      y: isHorizontalOrRadial ? coordLayout.y : rectShape.y,\n      width: isHorizontalOrRadial ? rectShape.width : coordLayout.width,\n      height: isHorizontalOrRadial ? coordLayout.height : rectShape.height\n    };\n  } else {\n    var coordLayout = coord.getArea();\n    var sectorShape = layout;\n    return {\n      cx: coordLayout.cx,\n      cy: coordLayout.cy,\n      r0: isHorizontalOrRadial ? coordLayout.r0 : sectorShape.r0,\n      r: isHorizontalOrRadial ? coordLayout.r : sectorShape.r,\n      startAngle: isHorizontalOrRadial ? sectorShape.startAngle : 0,\n      endAngle: isHorizontalOrRadial ? sectorShape.endAngle : Math.PI * 2\n    };\n  }\n}\n\nfunction createBackgroundEl(coord, isHorizontalOrRadial, layout) {\n  var ElementClz = coord.type === 'polar' ? Sector : Rect;\n  return new ElementClz({\n    shape: createBackgroundShape(isHorizontalOrRadial, layout, coord),\n    silent: true,\n    z2: 0\n  });\n}\n\nexport default BarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { layout, createProgressiveLayout } from '../../layout/barGrid.js';\nimport dataSample from '../../processor/dataSample.js';\nimport BarSeries from './BarSeries.js';\nimport BarView from './BarView.js';\nexport function install(registers) {\n  registers.registerChartView(BarView);\n  registers.registerSeriesModel(BarSeries);\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, zrUtil.curry(layout, 'bar')); // Do layout after other overall layout, which can preapre some informations.\n\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('bar')); // Down sample after filter\n\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('bar'));\n  /**\n   * @payload\n   * @property {string} [componentType=series]\n   * @property {number} [dx]\n   * @property {number} [dy]\n   * @property {number} [zoom]\n   * @property {number} [originX]\n   * @property {number} [originY]\n   */\n\n  registers.registerAction({\n    type: 'changeAxisOrder',\n    event: 'changeAxisOrder',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var componentType = payload.componentType || 'series';\n    ecModel.eachComponent({\n      mainType: componentType,\n      query: payload\n    }, function (componentModel) {\n      if (payload.sortInfo) {\n        componentModel.axis.setCategorySortInfo(payload.sortInfo);\n      }\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { Group } from '../../util/graphic.js';\n\nvar LineSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(LineSeriesModel, _super);\n\n  function LineSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LineSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  LineSeriesModel.prototype.getInitialData = function (option) {\n    if (process.env.NODE_ENV !== 'production') {\n      var coordSys = option.coordinateSystem;\n\n      if (coordSys !== 'polar' && coordSys !== 'cartesian2d') {\n        throw new Error('Line not support coordinateSystem besides cartesian and polar');\n      }\n    }\n\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  LineSeriesModel.prototype.getLegendIcon = function (opt) {\n    var group = new Group();\n    var line = createSymbol('line', 0, opt.itemHeight / 2, opt.itemWidth, 0, opt.lineStyle.stroke, false);\n    group.add(line);\n    line.setStyle(opt.lineStyle);\n    var visualType = this.getData().getVisual('symbol');\n    var visualRotate = this.getData().getVisual('symbolRotate');\n    var symbolType = visualType === 'none' ? 'circle' : visualType; // Symbol size is 80% when there is a line\n\n    var size = opt.itemHeight * 0.8;\n    var symbol = createSymbol(symbolType, (opt.itemWidth - size) / 2, (opt.itemHeight - size) / 2, size, size, opt.itemStyle.fill);\n    group.add(symbol);\n    symbol.setStyle(opt.itemStyle);\n    var symbolRotate = opt.iconRotate === 'inherit' ? visualRotate : opt.iconRotate || 0;\n    symbol.rotation = symbolRotate * Math.PI / 180;\n    symbol.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n\n    if (symbolType.indexOf('empty') > -1) {\n      symbol.style.stroke = symbol.style.fill;\n      symbol.style.fill = '#fff';\n      symbol.style.lineWidth = 2;\n    }\n\n    return group;\n  };\n\n  LineSeriesModel.type = 'series.line';\n  LineSeriesModel.dependencies = ['grid', 'polar'];\n  LineSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 3,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    clip: true,\n    label: {\n      position: 'top'\n    },\n    // itemStyle: {\n    // },\n    endLabel: {\n      show: false,\n      valueAnimation: true,\n      distance: 8\n    },\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    emphasis: {\n      scale: true\n    },\n    // areaStyle: {\n    // origin of areaStyle. Valid values:\n    // `'auto'/null/undefined`: from axisLine to data\n    // `'start'`: from min to data\n    // `'end'`: from data to max\n    // origin: 'auto'\n    // },\n    // false, 'start', 'end', 'middle'\n    step: false,\n    // Disabled if step is true\n    smooth: false,\n    smoothMonotone: null,\n    symbol: 'emptyCircle',\n    symbolSize: 4,\n    symbolRotate: null,\n    showSymbol: true,\n    // `false`: follow the label interval strategy.\n    // `true`: show all symbols.\n    // `'auto'`: If possible, show all symbols, otherwise\n    //           follow the label interval strategy.\n    showAllSymbol: 'auto',\n    // Whether to connect break point.\n    connectNulls: false,\n    // Sampling for large data. Can be: 'average', 'max', 'min', 'sum', 'lttb'.\n    sampling: 'none',\n    animationEasing: 'linear',\n    // Disable progressive\n    progressive: 0,\n    hoverLayerThreshold: Infinity,\n    universalTransition: {\n      divideShape: 'clone'\n    },\n    triggerLineEvent: false\n  };\n  return LineSeriesModel;\n}(SeriesModel);\n\nexport default LineSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\nimport { getDefaultLabel } from './labelHelper.js';\nimport { extend } from 'zrender/lib/core/util.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { saveOldStyle } from '../../animation/basicTrasition.js';\n\nvar Symbol =\n/** @class */\nfunction (_super) {\n  __extends(Symbol, _super);\n\n  function Symbol(data, idx, seriesScope, opts) {\n    var _this = _super.call(this) || this;\n\n    _this.updateData(data, idx, seriesScope, opts);\n\n    return _this;\n  }\n\n  Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n    // Remove paths created before\n    this.removeAll(); // let symbolPath = createSymbol(\n    //     symbolType, -0.5, -0.5, 1, 1, color\n    // );\n    // If width/height are set too small (e.g., set to 1) on ios10\n    // and macOS Sierra, a circle stroke become a rect, no matter what\n    // the scale is set. So we set width/height as 2. See #4150.\n\n    var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\n    symbolPath.attr({\n      z2: 100,\n      culling: true,\n      scaleX: symbolSize[0] / 2,\n      scaleY: symbolSize[1] / 2\n    }); // Rewrite drift method\n\n    symbolPath.drift = driftSymbol;\n    this._symbolType = symbolType;\n    this.add(symbolPath);\n  };\n  /**\n   * Stop animation\n   * @param {boolean} toLastFrame\n   */\n\n\n  Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\n    this.childAt(0).stopAnimation(null, toLastFrame);\n  };\n\n  Symbol.prototype.getSymbolType = function () {\n    return this._symbolType;\n  };\n  /**\n   * FIXME:\n   * Caution: This method breaks the encapsulation of this module,\n   * but it indeed brings convenience. So do not use the method\n   * unless you detailedly know all the implements of `Symbol`,\n   * especially animation.\n   *\n   * Get symbol path element.\n   */\n\n\n  Symbol.prototype.getSymbolPath = function () {\n    return this.childAt(0);\n  };\n  /**\n   * Highlight symbol\n   */\n\n\n  Symbol.prototype.highlight = function () {\n    enterEmphasis(this.childAt(0));\n  };\n  /**\n   * Downplay symbol\n   */\n\n\n  Symbol.prototype.downplay = function () {\n    leaveEmphasis(this.childAt(0));\n  };\n  /**\n   * @param {number} zlevel\n   * @param {number} z\n   */\n\n\n  Symbol.prototype.setZ = function (zlevel, z) {\n    var symbolPath = this.childAt(0);\n    symbolPath.zlevel = zlevel;\n    symbolPath.z = z;\n  };\n\n  Symbol.prototype.setDraggable = function (draggable) {\n    var symbolPath = this.childAt(0);\n    symbolPath.draggable = draggable;\n    symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\n  };\n  /**\n   * Update symbol properties\n   */\n\n\n  Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\n    this.silent = false;\n    var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n    var seriesModel = data.hostModel;\n    var symbolSize = Symbol.getSymbolSize(data, idx);\n    var isInit = symbolType !== this._symbolType;\n    var disableAnimation = opts && opts.disableAnimation;\n\n    if (isInit) {\n      var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n      this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n    } else {\n      var symbolPath = this.childAt(0);\n      symbolPath.silent = false;\n      var target = {\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2\n      };\n      disableAnimation ? symbolPath.attr(target) : graphic.updateProps(symbolPath, target, seriesModel, idx);\n      saveOldStyle(symbolPath);\n    }\n\n    this._updateCommon(data, idx, symbolSize, seriesScope, opts);\n\n    if (isInit) {\n      var symbolPath = this.childAt(0);\n\n      if (!disableAnimation) {\n        var target = {\n          scaleX: this._sizeX,\n          scaleY: this._sizeY,\n          style: {\n            // Always fadeIn. Because it has fadeOut animation when symbol is removed..\n            opacity: symbolPath.style.opacity\n          }\n        };\n        symbolPath.scaleX = symbolPath.scaleY = 0;\n        symbolPath.style.opacity = 0;\n        graphic.initProps(symbolPath, target, seriesModel, idx);\n      }\n    }\n\n    if (disableAnimation) {\n      // Must stop leave transition manually if don't call initProps or updateProps.\n      this.childAt(0).stopAnimation('leave');\n    }\n\n    this._seriesModel = seriesModel;\n  };\n\n  Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = data.hostModel;\n    var emphasisItemStyle;\n    var blurItemStyle;\n    var selectItemStyle;\n    var focus;\n    var blurScope;\n    var emphasisDisabled;\n    var labelStatesModels;\n    var hoverScale;\n    var cursorStyle;\n\n    if (seriesScope) {\n      emphasisItemStyle = seriesScope.emphasisItemStyle;\n      blurItemStyle = seriesScope.blurItemStyle;\n      selectItemStyle = seriesScope.selectItemStyle;\n      focus = seriesScope.focus;\n      blurScope = seriesScope.blurScope;\n      labelStatesModels = seriesScope.labelStatesModels;\n      hoverScale = seriesScope.hoverScale;\n      cursorStyle = seriesScope.cursorStyle;\n      emphasisDisabled = seriesScope.emphasisDisabled;\n    }\n\n    if (!seriesScope || data.hasItemOption) {\n      var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n      blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      emphasisDisabled = emphasisModel.get('disabled');\n      labelStatesModels = getLabelStatesModels(itemModel);\n      hoverScale = emphasisModel.getShallow('scale');\n      cursorStyle = itemModel.getShallow('cursor');\n    }\n\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n\n    if (symbolOffset) {\n      symbolPath.x = symbolOffset[0];\n      symbolPath.y = symbolOffset[1];\n    }\n\n    cursorStyle && symbolPath.attr('cursor', cursorStyle);\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var visualColor = symbolStyle.fill;\n\n    if (symbolPath instanceof ZRImage) {\n      var pathStyle = symbolPath.style;\n      symbolPath.useStyle(extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolStyle));\n    } else {\n      if (symbolPath.__isEmptyBrush) {\n        // fill and stroke will be swapped if it's empty.\n        // So we cloned a new style to avoid it affecting the original style in visual storage.\n        // TODO Better implementation. No empty logic!\n        symbolPath.useStyle(extend({}, symbolStyle));\n      } else {\n        symbolPath.useStyle(symbolStyle);\n      } // Disable decal because symbol scale will been applied on the decal.\n\n\n      symbolPath.style.decal = null;\n      symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\n      symbolPath.style.strokeNoScale = true;\n    }\n\n    var liftZ = data.getItemVisual(idx, 'liftZ');\n    var z2Origin = this._z2;\n\n    if (liftZ != null) {\n      if (z2Origin == null) {\n        this._z2 = symbolPath.z2;\n        symbolPath.z2 += liftZ;\n      }\n    } else if (z2Origin != null) {\n      symbolPath.z2 = z2Origin;\n      this._z2 = null;\n    }\n\n    var useNameLabel = opts && opts.useNameLabel;\n    setLabelStyle(symbolPath, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: getLabelDefaultText,\n      inheritColor: visualColor,\n      defaultOpacity: symbolStyle.opacity\n    }); // Do not execute util needed.\n\n    function getLabelDefaultText(idx) {\n      return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n    }\n\n    this._sizeX = symbolSize[0] / 2;\n    this._sizeY = symbolSize[1] / 2;\n    var emphasisState = symbolPath.ensureState('emphasis');\n    emphasisState.style = emphasisItemStyle;\n    symbolPath.ensureState('select').style = selectItemStyle;\n    symbolPath.ensureState('blur').style = blurItemStyle;\n\n    if (hoverScale) {\n      var scaleRatio = Math.max(1.1, 3 / this._sizeY);\n      emphasisState.scaleX = this._sizeX * scaleRatio;\n      emphasisState.scaleY = this._sizeY * scaleRatio;\n    }\n\n    this.setSymbolScale(1);\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n\n  Symbol.prototype.setSymbolScale = function (scale) {\n    this.scaleX = this.scaleY = scale;\n  };\n\n  Symbol.prototype.fadeOut = function (cb, opt) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = this._seriesModel;\n    var dataIndex = getECData(this).dataIndex;\n    var animationOpt = opt && opt.animation; // Avoid mistaken hover when fading out\n\n    this.silent = symbolPath.silent = true; // Not show text when animating\n\n    if (opt && opt.fadeLabel) {\n      var textContent = symbolPath.getTextContent();\n\n      if (textContent) {\n        graphic.removeElement(textContent, {\n          style: {\n            opacity: 0\n          }\n        }, seriesModel, {\n          dataIndex: dataIndex,\n          removeOpt: animationOpt,\n          cb: function () {\n            symbolPath.removeTextContent();\n          }\n        });\n      }\n    } else {\n      symbolPath.removeTextContent();\n    }\n\n    graphic.removeElement(symbolPath, {\n      style: {\n        opacity: 0\n      },\n      scaleX: 0,\n      scaleY: 0\n    }, seriesModel, {\n      dataIndex: dataIndex,\n      cb: cb,\n      removeOpt: animationOpt\n    });\n  };\n\n  Symbol.getSymbolSize = function (data, idx) {\n    return normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n  };\n\n  return Symbol;\n}(graphic.Group);\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nexport default Symbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport SymbolClz from './Symbol.js';\nimport { isObject } from 'zrender/lib/core/util.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\n\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx)) // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\n\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n\n  return opt || {};\n}\n\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  var emphasisModel = seriesModel.getModel('emphasis');\n  return {\n    emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\n    blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\n    selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\n    focus: emphasisModel.get('focus'),\n    blurScope: emphasisModel.get('blurScope'),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    hoverScale: emphasisModel.get('scale'),\n    labelStatesModels: getLabelStatesModels(seriesModel),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\n\nvar SymbolDraw =\n/** @class */\nfunction () {\n  function SymbolDraw(SymbolCtor) {\n    this.group = new graphic.Group();\n    this._SymbolCtor = SymbolCtor || SymbolClz;\n  }\n  /**\n   * Update symbols draw by new data\n   */\n\n\n  SymbolDraw.prototype.updateData = function (data, opt) {\n    // Remove progressive els.\n    this._progressiveEls = null;\n    opt = normalizeUpdateOpt(opt);\n    var group = this.group;\n    var seriesModel = data.hostModel;\n    var oldData = this._data;\n    var SymbolCtor = this._SymbolCtor;\n    var disableAnimation = opt.disableAnimation;\n    var seriesScope = makeSeriesScope(data);\n    var symbolUpdateOpt = {\n      disableAnimation: disableAnimation\n    };\n\n    var getSymbolPoint = opt.getSymbolPoint || function (idx) {\n      return data.getItemLayout(idx);\n    }; // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n\n    if (!oldData) {\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      var point = getSymbolPoint(newIdx);\n\n      if (symbolNeedsDraw(data, point, newIdx, opt)) {\n        var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      var point = getSymbolPoint(newIdx);\n\n      if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n        group.remove(symbolEl);\n        return;\n      }\n\n      var newSymbolType = data.getItemVisual(newIdx, 'symbol') || 'circle';\n      var oldSymbolType = symbolEl && symbolEl.getSymbolType && symbolEl.getSymbolType();\n\n      if (!symbolEl // Create a new if symbol type changed.\n      || oldSymbolType && oldSymbolType !== newSymbolType) {\n        group.remove(symbolEl);\n        symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n      } else {\n        symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\n        var target = {\n          x: point[0],\n          y: point[1]\n        };\n        disableAnimation ? symbolEl.attr(target) : graphic.updateProps(symbolEl, target, seriesModel);\n      } // Add back\n\n\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && el.fadeOut(function () {\n        group.remove(el);\n      });\n    }).execute();\n    this._getSymbolPoint = getSymbolPoint;\n    this._data = data;\n  };\n\n  ;\n\n  SymbolDraw.prototype.updateLayout = function () {\n    var _this = this;\n\n    var data = this._data;\n\n    if (data) {\n      // Not use animation\n      data.eachItemGraphicEl(function (el, idx) {\n        var point = _this._getSymbolPoint(idx);\n\n        el.setPosition(point);\n        el.markRedraw();\n      });\n    }\n  };\n\n  ;\n\n  SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._seriesScope = makeSeriesScope(data);\n    this._data = null;\n    this.group.removeAll();\n  };\n\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n\n  SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    // Clear\n    this._progressiveEls = [];\n    opt = normalizeUpdateOpt(opt);\n\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var point = data.getItemLayout(idx);\n\n      if (symbolNeedsDraw(data, point, idx, opt)) {\n        var el = new this._SymbolCtor(data, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        el.setPosition(point);\n        this.group.add(el);\n        data.setItemGraphicEl(idx, el);\n\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n\n  ;\n\n  SymbolDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  SymbolDraw.prototype.remove = function (enableAnimation) {\n    var group = this.group;\n    var data = this._data; // Incremental model do not have this._data.\n\n    if (data && enableAnimation) {\n      data.eachItemGraphicEl(function (el) {\n        el.fadeOut(function () {\n          group.remove(el);\n        });\n      });\n    } else {\n      group.removeAll();\n    }\n  };\n\n  ;\n  return SymbolDraw;\n}();\n\nexport default SymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper.js';\nimport { map } from 'zrender/lib/core/util.js';\nexport function prepareDataCoordInfo(coordSys, data, valueOrigin) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = getValueStart(valueAxis, valueOrigin);\n  var baseAxisDim = baseAxis.dim;\n  var valueAxisDim = valueAxis.dim;\n  var valueDim = data.mapDimension(valueAxisDim);\n  var baseDim = data.mapDimension(baseAxisDim);\n  var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n  var dims = map(coordSys.dimensions, function (coordDim) {\n    return data.mapDimension(coordDim);\n  });\n  var stacked = false;\n  var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n  if (isDimensionStacked(data, dims[0]\n  /*, dims[1]*/\n  )) {\n    // jshint ignore:line\n    stacked = true;\n    dims[0] = stackResultDim;\n  }\n\n  if (isDimensionStacked(data, dims[1]\n  /*, dims[0]*/\n  )) {\n    // jshint ignore:line\n    stacked = true;\n    dims[1] = stackResultDim;\n  }\n\n  return {\n    dataDimsForPoint: dims,\n    valueStart: valueStart,\n    valueAxisDim: valueAxisDim,\n    baseAxisDim: baseAxisDim,\n    stacked: !!stacked,\n    valueDim: valueDim,\n    baseDim: baseDim,\n    baseDataOffset: baseDataOffset,\n    stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n  };\n}\n\nfunction getValueStart(valueAxis, valueOrigin) {\n  var valueStart = 0;\n  var extent = valueAxis.scale.getExtent();\n\n  if (valueOrigin === 'start') {\n    valueStart = extent[0];\n  } else if (valueOrigin === 'end') {\n    valueStart = extent[1];\n  } // auto\n  else {\n      // Both positive\n      if (extent[0] > 0) {\n        valueStart = extent[0];\n      } // Both negative\n      else if (extent[1] < 0) {\n          valueStart = extent[1];\n        } // If is one positive, and one negative, onZero shall be true\n\n    }\n\n  return valueStart;\n}\n\nexport function getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n  var value = NaN;\n\n  if (dataCoordInfo.stacked) {\n    value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n  }\n\n  if (isNaN(value)) {\n    value = dataCoordInfo.valueStart;\n  }\n\n  var baseDataOffset = dataCoordInfo.baseDataOffset;\n  var stackedData = [];\n  stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n  stackedData[1 - baseDataOffset] = value;\n  return coordSys.dataToPoint(stackedData);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper.js';\nimport { createFloat32Array } from '../../util/vendor.js';\n\nfunction diffData(oldData, newData) {\n  var diffResult = [];\n  newData.diff(oldData).add(function (idx) {\n    diffResult.push({\n      cmd: '+',\n      idx: idx\n    });\n  }).update(function (newIdx, oldIdx) {\n    diffResult.push({\n      cmd: '=',\n      idx: oldIdx,\n      idx1: newIdx\n    });\n  }).remove(function (idx) {\n    diffResult.push({\n      cmd: '-',\n      idx: idx\n    });\n  }).execute();\n  return diffResult;\n}\n\nexport default function lineAnimationDiff(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n  var diff = diffData(oldData, newData); // let newIdList = newData.mapArray(newData.getId);\n  // let oldIdList = oldData.mapArray(oldData.getId);\n  // convertToIntId(newIdList, oldIdList);\n  // // FIXME One data ?\n  // diff = arrayDiff(oldIdList, newIdList);\n\n  var currPoints = [];\n  var nextPoints = []; // Points for stacking base line\n\n  var currStackedPoints = [];\n  var nextStackedPoints = [];\n  var status = [];\n  var sortedIndices = [];\n  var rawIndices = [];\n  var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin); // const oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n\n  var oldPoints = oldData.getLayout('points') || [];\n  var newPoints = newData.getLayout('points') || [];\n\n  for (var i = 0; i < diff.length; i++) {\n    var diffItem = diff[i];\n    var pointAdded = true;\n    var oldIdx2 = void 0;\n    var newIdx2 = void 0; // FIXME, animation is not so perfect when dataZoom window moves fast\n    // Which is in case remvoing or add more than one data in the tail or head\n\n    switch (diffItem.cmd) {\n      case '=':\n        oldIdx2 = diffItem.idx * 2;\n        newIdx2 = diffItem.idx1 * 2;\n        var currentX = oldPoints[oldIdx2];\n        var currentY = oldPoints[oldIdx2 + 1];\n        var nextX = newPoints[newIdx2];\n        var nextY = newPoints[newIdx2 + 1]; // If previous data is NaN, use next point directly\n\n        if (isNaN(currentX) || isNaN(currentY)) {\n          currentX = nextX;\n          currentY = nextY;\n        }\n\n        currPoints.push(currentX, currentY);\n        nextPoints.push(nextX, nextY);\n        currStackedPoints.push(oldStackedOnPoints[oldIdx2], oldStackedOnPoints[oldIdx2 + 1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\n        break;\n\n      case '+':\n        var newIdx = diffItem.idx;\n        var newDataDimsForPoint = newDataOldCoordInfo.dataDimsForPoint;\n        var oldPt = oldCoordSys.dataToPoint([newData.get(newDataDimsForPoint[0], newIdx), newData.get(newDataDimsForPoint[1], newIdx)]);\n        newIdx2 = newIdx * 2;\n        currPoints.push(oldPt[0], oldPt[1]);\n        nextPoints.push(newPoints[newIdx2], newPoints[newIdx2 + 1]);\n        var stackedOnPoint = getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, newIdx);\n        currStackedPoints.push(stackedOnPoint[0], stackedOnPoint[1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(newIdx));\n        break;\n\n      case '-':\n        pointAdded = false;\n    } // Original indices\n\n\n    if (pointAdded) {\n      status.push(diffItem);\n      sortedIndices.push(sortedIndices.length);\n    }\n  } // Diff result may be crossed if all items are changed\n  // Sort by data index\n\n\n  sortedIndices.sort(function (a, b) {\n    return rawIndices[a] - rawIndices[b];\n  });\n  var len = currPoints.length;\n  var sortedCurrPoints = createFloat32Array(len);\n  var sortedNextPoints = createFloat32Array(len);\n  var sortedCurrStackedPoints = createFloat32Array(len);\n  var sortedNextStackedPoints = createFloat32Array(len);\n  var sortedStatus = [];\n\n  for (var i = 0; i < sortedIndices.length; i++) {\n    var idx = sortedIndices[i];\n    var i2 = i * 2;\n    var idx2 = idx * 2;\n    sortedCurrPoints[i2] = currPoints[idx2];\n    sortedCurrPoints[i2 + 1] = currPoints[idx2 + 1];\n    sortedNextPoints[i2] = nextPoints[idx2];\n    sortedNextPoints[i2 + 1] = nextPoints[idx2 + 1];\n    sortedCurrStackedPoints[i2] = currStackedPoints[idx2];\n    sortedCurrStackedPoints[i2 + 1] = currStackedPoints[idx2 + 1];\n    sortedNextStackedPoints[i2] = nextStackedPoints[idx2];\n    sortedNextStackedPoints[i2 + 1] = nextStackedPoints[idx2 + 1];\n    sortedStatus[i] = status[idx];\n  }\n\n  return {\n    current: sortedCurrPoints,\n    next: sortedNextPoints,\n    stackedOnCurrent: sortedCurrStackedPoints,\n    stackedOnNext: sortedNextStackedPoints,\n    status: sortedStatus\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // Poly path support NaN point\n\nimport Path from 'zrender/lib/graphic/Path.js';\nimport PathProxy from 'zrender/lib/core/PathProxy.js';\nimport { cubicRootAt, cubicAt } from 'zrender/lib/core/curve.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\n\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\n/**\n * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\n * situations. This should be used when points are non-monotone neither in x or\n * y dimension.\n */\n\n\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smooth, smoothMonotone, connectNulls) {\n  var prevX;\n  var prevY;\n  var cpx0;\n  var cpy0;\n  var cpx1;\n  var cpy1;\n  var idx = start;\n  var k = 0;\n\n  for (; k < segLen; k++) {\n    var x = points[idx * 2];\n    var y = points[idx * 2 + 1];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(x, y)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](x, y);\n      cpx0 = x;\n      cpy0 = y;\n    } else {\n      var dx = x - prevX;\n      var dy = y - prevY; // Ignore tiny segment.\n\n      if (dx * dx + dy * dy < 0.5) {\n        idx += dir;\n        continue;\n      }\n\n      if (smooth > 0) {\n        var nextIdx = idx + dir;\n        var nextX = points[nextIdx * 2];\n        var nextY = points[nextIdx * 2 + 1]; // Ignore duplicate point\n\n        while (nextX === x && nextY === y && k < segLen) {\n          k++;\n          nextIdx += dir;\n          idx += dir;\n          nextX = points[nextIdx * 2];\n          nextY = points[nextIdx * 2 + 1];\n          x = points[idx * 2];\n          y = points[idx * 2 + 1];\n          dx = x - prevX;\n          dy = y - prevY;\n        }\n\n        var tmpK = k + 1;\n\n        if (connectNulls) {\n          // Find next point not null\n          while (isPointNull(nextX, nextY) && tmpK < segLen) {\n            tmpK++;\n            nextIdx += dir;\n            nextX = points[nextIdx * 2];\n            nextY = points[nextIdx * 2 + 1];\n          }\n        }\n\n        var ratioNextSeg = 0.5;\n        var vx = 0;\n        var vy = 0;\n        var nextCpx0 = void 0;\n        var nextCpy0 = void 0; // Is last point\n\n        if (tmpK >= segLen || isPointNull(nextX, nextY)) {\n          cpx1 = x;\n          cpy1 = y;\n        } else {\n          vx = nextX - prevX;\n          vy = nextY - prevY;\n          var dx0 = x - prevX;\n          var dx1 = nextX - x;\n          var dy0 = y - prevY;\n          var dy1 = nextY - y;\n          var lenPrevSeg = void 0;\n          var lenNextSeg = void 0;\n\n          if (smoothMonotone === 'x') {\n            lenPrevSeg = Math.abs(dx0);\n            lenNextSeg = Math.abs(dx1);\n            var dir_1 = vx > 0 ? 1 : -1;\n            cpx1 = x - dir_1 * lenPrevSeg * smooth;\n            cpy1 = y;\n            nextCpx0 = x + dir_1 * lenNextSeg * smooth;\n            nextCpy0 = y;\n          } else if (smoothMonotone === 'y') {\n            lenPrevSeg = Math.abs(dy0);\n            lenNextSeg = Math.abs(dy1);\n            var dir_2 = vy > 0 ? 1 : -1;\n            cpx1 = x;\n            cpy1 = y - dir_2 * lenPrevSeg * smooth;\n            nextCpx0 = x;\n            nextCpy0 = y + dir_2 * lenNextSeg * smooth;\n          } else {\n            lenPrevSeg = Math.sqrt(dx0 * dx0 + dy0 * dy0);\n            lenNextSeg = Math.sqrt(dx1 * dx1 + dy1 * dy1); // Use ratio of seg length\n\n            ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n            cpx1 = x - vx * smooth * (1 - ratioNextSeg);\n            cpy1 = y - vy * smooth * (1 - ratioNextSeg); // cp0 of next segment\n\n            nextCpx0 = x + vx * smooth * ratioNextSeg;\n            nextCpy0 = y + vy * smooth * ratioNextSeg; // Smooth constraint between point and next point.\n            // Avoid exceeding extreme after smoothing.\n\n            nextCpx0 = mathMin(nextCpx0, mathMax(nextX, x));\n            nextCpy0 = mathMin(nextCpy0, mathMax(nextY, y));\n            nextCpx0 = mathMax(nextCpx0, mathMin(nextX, x));\n            nextCpy0 = mathMax(nextCpy0, mathMin(nextY, y)); // Reclaculate cp1 based on the adjusted cp0 of next seg.\n\n            vx = nextCpx0 - x;\n            vy = nextCpy0 - y;\n            cpx1 = x - vx * lenPrevSeg / lenNextSeg;\n            cpy1 = y - vy * lenPrevSeg / lenNextSeg; // Smooth constraint between point and prev point.\n            // Avoid exceeding extreme after smoothing.\n\n            cpx1 = mathMin(cpx1, mathMax(prevX, x));\n            cpy1 = mathMin(cpy1, mathMax(prevY, y));\n            cpx1 = mathMax(cpx1, mathMin(prevX, x));\n            cpy1 = mathMax(cpy1, mathMin(prevY, y)); // Adjust next cp0 again.\n\n            vx = x - cpx1;\n            vy = y - cpy1;\n            nextCpx0 = x + vx * lenNextSeg / lenPrevSeg;\n            nextCpy0 = y + vy * lenNextSeg / lenPrevSeg;\n          }\n        }\n\n        ctx.bezierCurveTo(cpx0, cpy0, cpx1, cpy1, x, y);\n        cpx0 = nextCpx0;\n        cpy0 = nextCpy0;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n\n    prevX = x;\n    prevY = y;\n    idx += dir;\n  }\n\n  return k;\n}\n\nvar ECPolylineShape =\n/** @class */\nfunction () {\n  function ECPolylineShape() {\n    this.smooth = 0;\n    this.smoothConstraint = true;\n  }\n\n  return ECPolylineShape;\n}();\n\nvar ECPolyline =\n/** @class */\nfunction (_super) {\n  __extends(ECPolyline, _super);\n\n  function ECPolyline(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-polyline';\n    return _this;\n  }\n\n  ECPolyline.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  ECPolyline.prototype.getDefaultShape = function () {\n    return new ECPolylineShape();\n  };\n\n  ECPolyline.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var i = 0;\n    var len = points.length / 2; // const result = getBoundingBox(points, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      i += drawSegment(ctx, points, i, len, len, 1, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n    }\n  };\n\n  ECPolyline.prototype.getPointOn = function (xOrY, dim) {\n    if (!this.path) {\n      this.createPathProxy();\n      this.buildPath(this.path, this.shape);\n    }\n\n    var path = this.path;\n    var data = path.data;\n    var CMD = PathProxy.CMD;\n    var x0;\n    var y0;\n    var isDimX = dim === 'x';\n    var roots = [];\n\n    for (var i = 0; i < data.length;) {\n      var cmd = data[i++];\n      var x = void 0;\n      var y = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var x3 = void 0;\n      var y3 = void 0;\n      var t = void 0;\n\n      switch (cmd) {\n        case CMD.M:\n          x0 = data[i++];\n          y0 = data[i++];\n          break;\n\n        case CMD.L:\n          x = data[i++];\n          y = data[i++];\n          t = isDimX ? (xOrY - x0) / (x - x0) : (xOrY - y0) / (y - y0);\n\n          if (t <= 1 && t >= 0) {\n            var val = isDimX ? (y - y0) * t + y0 : (x - x0) * t + x0;\n            return isDimX ? [xOrY, val] : [val, xOrY];\n          }\n\n          x0 = x;\n          y0 = y;\n          break;\n\n        case CMD.C:\n          x = data[i++];\n          y = data[i++];\n          x2 = data[i++];\n          y2 = data[i++];\n          x3 = data[i++];\n          y3 = data[i++];\n          var nRoot = isDimX ? cubicRootAt(x0, x, x2, x3, xOrY, roots) : cubicRootAt(y0, y, y2, y3, xOrY, roots);\n\n          if (nRoot > 0) {\n            for (var i_1 = 0; i_1 < nRoot; i_1++) {\n              var t_1 = roots[i_1];\n\n              if (t_1 <= 1 && t_1 >= 0) {\n                var val = isDimX ? cubicAt(y0, y, y2, y3, t_1) : cubicAt(x0, x, x2, x3, t_1);\n                return isDimX ? [xOrY, val] : [val, xOrY];\n              }\n            }\n          }\n\n          x0 = x3;\n          y0 = y3;\n          break;\n      }\n    }\n  };\n\n  return ECPolyline;\n}(Path);\n\nexport { ECPolyline };\n\nvar ECPolygonShape =\n/** @class */\nfunction (_super) {\n  __extends(ECPolygonShape, _super);\n\n  function ECPolygonShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return ECPolygonShape;\n}(ECPolylineShape);\n\nvar ECPolygon =\n/** @class */\nfunction (_super) {\n  __extends(ECPolygon, _super);\n\n  function ECPolygon(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-polygon';\n    return _this;\n  }\n\n  ECPolygon.prototype.getDefaultShape = function () {\n    return new ECPolygonShape();\n  };\n\n  ECPolygon.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var stackedOnPoints = shape.stackedOnPoints;\n    var i = 0;\n    var len = points.length / 2;\n    var smoothMonotone = shape.smoothMonotone;\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      var k = drawSegment(ctx, points, i, len, len, 1, shape.smooth, smoothMonotone, shape.connectNulls);\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n      i += k + 1;\n      ctx.closePath();\n    }\n  };\n\n  return ECPolygon;\n}(Path);\n\nexport { ECPolygon };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // FIXME step not support polar\n\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport SymbolClz from '../helper/Symbol.js';\nimport lineAnimationDiff from './lineAnimationDiff.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as modelUtil from '../../util/model.js';\nimport { ECPolyline, ECPolygon } from './poly.js';\nimport ChartView from '../../view/Chart.js';\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper.js';\nimport { createGridClipPath, createPolarClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { setStatesStylesFromModel, setStatesFlag, toggleHoverEmphasis, SPECIAL_STATES } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels, labelInner } from '../../label/labelStyle.js';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createFloat32Array } from '../../util/vendor.js';\nimport { convertToColorString } from '../../util/format.js';\nimport { lerp } from 'zrender/lib/tool/color.js';\n\nfunction isPointsSame(points1, points2) {\n  if (points1.length !== points2.length) {\n    return;\n  }\n\n  for (var i = 0; i < points1.length; i++) {\n    if (points1[i] !== points2[i]) {\n      return;\n    }\n  }\n\n  return true;\n}\n\nfunction bboxFromPoints(points) {\n  var minX = Infinity;\n  var minY = Infinity;\n  var maxX = -Infinity;\n  var maxY = -Infinity;\n\n  for (var i = 0; i < points.length;) {\n    var x = points[i++];\n    var y = points[i++];\n\n    if (!isNaN(x)) {\n      minX = Math.min(x, minX);\n      maxX = Math.max(x, maxX);\n    }\n\n    if (!isNaN(y)) {\n      minY = Math.min(y, minY);\n      maxY = Math.max(y, maxY);\n    }\n  }\n\n  return [[minX, minY], [maxX, maxY]];\n}\n\nfunction getBoundingDiff(points1, points2) {\n  var _a = bboxFromPoints(points1),\n      min1 = _a[0],\n      max1 = _a[1];\n\n  var _b = bboxFromPoints(points2),\n      min2 = _b[0],\n      max2 = _b[1]; // Get a max value from each corner of two boundings.\n\n\n  return Math.max(Math.abs(min1[0] - min2[0]), Math.abs(min1[1] - min2[1]), Math.abs(max1[0] - max2[0]), Math.abs(max1[1] - max2[1]));\n}\n\nfunction getSmooth(smooth) {\n  return zrUtil.isNumber(smooth) ? smooth : smooth ? 0.5 : 0;\n}\n\nfunction getStackedOnPoints(coordSys, data, dataCoordInfo) {\n  if (!dataCoordInfo.valueDim) {\n    return [];\n  }\n\n  var len = data.count();\n  var points = createFloat32Array(len * 2);\n\n  for (var idx = 0; idx < len; idx++) {\n    var pt = getStackedOnPoint(dataCoordInfo, coordSys, data, idx);\n    points[idx * 2] = pt[0];\n    points[idx * 2 + 1] = pt[1];\n  }\n\n  return points;\n}\n\nfunction turnPointsIntoStep(points, coordSys, stepTurnAt) {\n  var baseAxis = coordSys.getBaseAxis();\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n  var stepPoints = [];\n  var i = 0;\n  var stepPt = [];\n  var pt = [];\n  var nextPt = [];\n\n  for (; i < points.length - 2; i += 2) {\n    nextPt[0] = points[i + 2];\n    nextPt[1] = points[i + 3];\n    pt[0] = points[i];\n    pt[1] = points[i + 1];\n    stepPoints.push(pt[0], pt[1]);\n\n    switch (stepTurnAt) {\n      case 'end':\n        stepPt[baseIndex] = nextPt[baseIndex];\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        break;\n\n      case 'middle':\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n        var stepPt2 = [];\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        stepPoints.push(stepPt2[0], stepPt2[1]);\n        break;\n\n      default:\n        // default is start\n        stepPt[baseIndex] = pt[baseIndex];\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n    }\n  } // Last points\n\n\n  stepPoints.push(points[i++], points[i++]);\n  return stepPoints;\n}\n/**\n * Clip color stops to edge. Avoid creating too large gradients.\n * Which may lead to blurry when GPU acceleration is enabled. See #15680\n *\n * The stops has been sorted from small to large.\n */\n\n\nfunction clipColorStops(colorStops, maxSize) {\n  var newColorStops = [];\n  var len = colorStops.length; // coord will always < 0 in prevOutOfRangeColorStop.\n\n  var prevOutOfRangeColorStop;\n  var prevInRangeColorStop;\n\n  function lerpStop(stop0, stop1, clippedCoord) {\n    var coord0 = stop0.coord;\n    var p = (clippedCoord - coord0) / (stop1.coord - coord0);\n    var color = lerp(p, [stop0.color, stop1.color]);\n    return {\n      coord: clippedCoord,\n      color: color\n    };\n  }\n\n  for (var i = 0; i < len; i++) {\n    var stop_1 = colorStops[i];\n    var coord = stop_1.coord;\n\n    if (coord < 0) {\n      prevOutOfRangeColorStop = stop_1;\n    } else if (coord > maxSize) {\n      if (prevInRangeColorStop) {\n        newColorStops.push(lerpStop(prevInRangeColorStop, stop_1, maxSize));\n      } else if (prevOutOfRangeColorStop) {\n        // If there are two stops and coord range is between these two stops\n        newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0), lerpStop(prevOutOfRangeColorStop, stop_1, maxSize));\n      } // All following stop will be out of range. So just ignore them.\n\n\n      break;\n    } else {\n      if (prevOutOfRangeColorStop) {\n        newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0)); // Reset\n\n        prevOutOfRangeColorStop = null;\n      }\n\n      newColorStops.push(stop_1);\n      prevInRangeColorStop = stop_1;\n    }\n  }\n\n  return newColorStops;\n}\n\nfunction getVisualGradient(data, coordSys, api) {\n  var visualMetaList = data.getVisual('visualMeta');\n\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\n    // When data.count() is 0, gradient range can not be calculated.\n    return;\n  }\n\n  if (coordSys.type !== 'cartesian2d') {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style is only supported on cartesian2d.');\n    }\n\n    return;\n  }\n\n  var coordDim;\n  var visualMeta;\n\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\n    var dimInfo = data.getDimensionInfo(visualMetaList[i].dimension);\n    coordDim = dimInfo && dimInfo.coordDim; // Can only be x or y\n\n    if (coordDim === 'x' || coordDim === 'y') {\n      visualMeta = visualMetaList[i];\n      break;\n    }\n  }\n\n  if (!visualMeta) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style only support x or y dimension.');\n    }\n\n    return;\n  } // If the area to be rendered is bigger than area defined by LinearGradient,\n  // the canvas spec prescribes that the color of the first stop and the last\n  // stop should be used. But if two stops are added at offset 0, in effect\n  // browsers use the color of the second stop to render area outside\n  // LinearGradient. So we can only infinitesimally extend area defined in\n  // LinearGradient to render `outerColors`.\n\n\n  var axis = coordSys.getAxis(coordDim); // dataToCoord mapping may not be linear, but must be monotonic.\n\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\n    // offset will be calculated later.\n    return {\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\n      color: stop.color\n    };\n  });\n  var stopLen = colorStops.length;\n  var outerColors = visualMeta.outerColors.slice();\n\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n    colorStops.reverse();\n    outerColors.reverse();\n  }\n\n  var colorStopsInRange = clipColorStops(colorStops, coordDim === 'x' ? api.getWidth() : api.getHeight());\n  var inRangeStopLen = colorStopsInRange.length;\n\n  if (!inRangeStopLen && stopLen) {\n    // All stops are out of range. All will be the same color.\n    return colorStops[0].coord < 0 ? outerColors[1] ? outerColors[1] : colorStops[stopLen - 1].color : outerColors[0] ? outerColors[0] : colorStops[0].color;\n  }\n\n  var tinyExtent = 10; // Arbitrary value: 10px\n\n  var minCoord = colorStopsInRange[0].coord - tinyExtent;\n  var maxCoord = colorStopsInRange[inRangeStopLen - 1].coord + tinyExtent;\n  var coordSpan = maxCoord - minCoord;\n\n  if (coordSpan < 1e-3) {\n    return 'transparent';\n  }\n\n  zrUtil.each(colorStopsInRange, function (stop) {\n    stop.offset = (stop.coord - minCoord) / coordSpan;\n  });\n  colorStopsInRange.push({\n    // NOTE: inRangeStopLen may still be 0 if stoplen is zero.\n    offset: inRangeStopLen ? colorStopsInRange[inRangeStopLen - 1].offset : 0.5,\n    color: outerColors[1] || 'transparent'\n  });\n  colorStopsInRange.unshift({\n    offset: inRangeStopLen ? colorStopsInRange[0].offset : 0.5,\n    color: outerColors[0] || 'transparent'\n  });\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStopsInRange, true);\n  gradient[coordDim] = minCoord;\n  gradient[coordDim + '2'] = maxCoord;\n  return gradient;\n}\n\nfunction getIsIgnoreFunc(seriesModel, data, coordSys) {\n  var showAllSymbol = seriesModel.get('showAllSymbol');\n  var isAuto = showAllSymbol === 'auto';\n\n  if (showAllSymbol && !isAuto) {\n    return;\n  }\n\n  var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n  if (!categoryAxis) {\n    return;\n  } // Note that category label interval strategy might bring some weird effect\n  // in some scenario: users may wonder why some of the symbols are not\n  // displayed. So we show all symbols as possible as we can.\n\n\n  if (isAuto // Simplify the logic, do not determine label overlap here.\n  && canShowAllSymbolForCategory(categoryAxis, data)) {\n    return;\n  } // Otherwise follow the label interval strategy on category axis.\n\n\n  var categoryDataDim = data.mapDimension(categoryAxis.dim);\n  var labelMap = {};\n  zrUtil.each(categoryAxis.getViewLabels(), function (labelItem) {\n    var ordinalNumber = categoryAxis.scale.getRawOrdinalNumber(labelItem.tickValue);\n    labelMap[ordinalNumber] = 1;\n  });\n  return function (dataIndex) {\n    return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n  };\n}\n\nfunction canShowAllSymbolForCategory(categoryAxis, data) {\n  // In mose cases, line is monotonous on category axis, and the label size\n  // is close with each other. So we check the symbol size and some of the\n  // label size alone with the category axis to estimate whether all symbol\n  // can be shown without overlap.\n  var axisExtent = categoryAxis.getExtent();\n  var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n  isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n  // Sampling some points, max 5.\n\n  var dataLen = data.count();\n  var step = Math.max(1, Math.round(dataLen / 5));\n\n  for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n    if (SymbolClz.getSymbolSize(data, dataIndex // Only for cartesian, where `isHorizontal` exists.\n    )[categoryAxis.isHorizontal() ? 1 : 0] // Empirical number\n    * 1.5 > availSize) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\n\nfunction getLastIndexNotNull(points) {\n  var len = points.length / 2;\n\n  for (; len > 0; len--) {\n    if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n      break;\n    }\n  }\n\n  return len - 1;\n}\n\nfunction getPointAtIndex(points, idx) {\n  return [points[idx * 2], points[idx * 2 + 1]];\n}\n\nfunction getIndexRange(points, xOrY, dim) {\n  var len = points.length / 2;\n  var dimIdx = dim === 'x' ? 0 : 1;\n  var a;\n  var b;\n  var prevIndex = 0;\n  var nextIndex = -1;\n\n  for (var i = 0; i < len; i++) {\n    b = points[i * 2 + dimIdx];\n\n    if (isNaN(b) || isNaN(points[i * 2 + 1 - dimIdx])) {\n      continue;\n    }\n\n    if (i === 0) {\n      a = b;\n      continue;\n    }\n\n    if (a <= xOrY && b >= xOrY || a >= xOrY && b <= xOrY) {\n      nextIndex = i;\n      break;\n    }\n\n    prevIndex = i;\n    a = b;\n  }\n\n  return {\n    range: [prevIndex, nextIndex],\n    t: (xOrY - a) / (b - a)\n  };\n}\n\nfunction anyStateShowEndLabel(seriesModel) {\n  if (seriesModel.get(['endLabel', 'show'])) {\n    return true;\n  }\n\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    if (seriesModel.get([SPECIAL_STATES[i], 'endLabel', 'show'])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction createLineClipPath(lineView, coordSys, hasAnimation, seriesModel) {\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n    var endLabelModel_1 = seriesModel.getModel('endLabel');\n    var valueAnimation_1 = endLabelModel_1.get('valueAnimation');\n    var data_1 = seriesModel.getData();\n    var labelAnimationRecord_1 = {\n      lastFrameIndex: 0\n    };\n    var during = anyStateShowEndLabel(seriesModel) ? function (percent, clipRect) {\n      lineView._endLabelOnDuring(percent, clipRect, data_1, labelAnimationRecord_1, valueAnimation_1, endLabelModel_1, coordSys);\n    } : null;\n    var isHorizontal = coordSys.getBaseAxis().isHorizontal();\n    var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel, function () {\n      var endLabel = lineView._endLabel;\n\n      if (endLabel && hasAnimation) {\n        if (labelAnimationRecord_1.originalX != null) {\n          endLabel.attr({\n            x: labelAnimationRecord_1.originalX,\n            y: labelAnimationRecord_1.originalY\n          });\n        }\n      }\n    }, during); // Expand clip shape to avoid clipping when line value exceeds axis\n\n    if (!seriesModel.get('clip', true)) {\n      var rectShape = clipPath.shape;\n      var expandSize = Math.max(rectShape.width, rectShape.height);\n\n      if (isHorizontal) {\n        rectShape.y -= expandSize;\n        rectShape.height += expandSize * 2;\n      } else {\n        rectShape.x -= expandSize;\n        rectShape.width += expandSize * 2;\n      }\n    } // Set to the final frame. To make sure label layout is right.\n\n\n    if (during) {\n      during(1, clipPath);\n    }\n\n    return clipPath;\n  } else {\n    if (process.env.NODE_ENV !== 'production') {\n      if (seriesModel.get(['endLabel', 'show'])) {\n        console.warn('endLabel is not supported for lines in polar systems.');\n      }\n    }\n\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  }\n}\n\nfunction getEndLabelStateSpecified(endLabelModel, coordSys) {\n  var baseAxis = coordSys.getBaseAxis();\n  var isHorizontal = baseAxis.isHorizontal();\n  var isBaseInversed = baseAxis.inverse;\n  var align = isHorizontal ? isBaseInversed ? 'right' : 'left' : 'center';\n  var verticalAlign = isHorizontal ? 'middle' : isBaseInversed ? 'top' : 'bottom';\n  return {\n    normal: {\n      align: endLabelModel.get('align') || align,\n      verticalAlign: endLabelModel.get('verticalAlign') || verticalAlign\n    }\n  };\n}\n\nvar LineView =\n/** @class */\nfunction (_super) {\n  __extends(LineView, _super);\n\n  function LineView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  LineView.prototype.init = function () {\n    var lineGroup = new graphic.Group();\n    var symbolDraw = new SymbolDraw();\n    this.group.add(symbolDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineGroup = lineGroup;\n  };\n\n  LineView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var coordSys = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var lineStyleModel = seriesModel.getModel('lineStyle');\n    var areaStyleModel = seriesModel.getModel('areaStyle');\n    var points = data.getLayout('points') || [];\n    var isCoordSysPolar = coordSys.type === 'polar';\n    var prevCoordSys = this._coordSys;\n    var symbolDraw = this._symbolDraw;\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var lineGroup = this._lineGroup;\n    var hasAnimation = seriesModel.get('animation');\n    var isAreaChart = !areaStyleModel.isEmpty();\n    var valueOrigin = areaStyleModel.get('origin');\n    var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n    var stackedOnPoints = isAreaChart && getStackedOnPoints(coordSys, data, dataCoordInfo);\n    var showSymbol = seriesModel.get('showSymbol');\n    var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys); // Remove temporary symbols\n\n    var oldData = this._data;\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    }); // Remove previous created symbols if showSymbol changed to false\n\n    if (!showSymbol) {\n      symbolDraw.remove();\n    }\n\n    group.add(lineGroup); // FIXME step not support polar\n\n    var step = !isCoordSysPolar ? seriesModel.get('step') : false;\n    var clipShapeForSymbol;\n\n    if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\n      clipShapeForSymbol = coordSys.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n      // See #7913 and `test/dataZoom-clip.html`.\n\n      if (clipShapeForSymbol.width != null) {\n        clipShapeForSymbol.x -= 0.1;\n        clipShapeForSymbol.y -= 0.1;\n        clipShapeForSymbol.width += 0.2;\n        clipShapeForSymbol.height += 0.2;\n      } else if (clipShapeForSymbol.r0) {\n        clipShapeForSymbol.r0 -= 0.5;\n        clipShapeForSymbol.r += 0.5;\n      }\n    }\n\n    this._clipShapeForSymbol = clipShapeForSymbol;\n    var visualColor = getVisualGradient(data, coordSys, api) || data.getVisual('style')[data.getVisual('drawType')]; // Initialization animation or coordinate system changed\n\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function (idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      });\n      hasAnimation && this._initSymbolLabelAnimation(data, coordSys, clipShapeForSymbol);\n\n      if (step) {\n        // TODO If stacked series is not step\n        points = turnPointsIntoStep(points, coordSys, step);\n\n        if (stackedOnPoints) {\n          stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n        }\n      }\n\n      polyline = this._newPolyline(points);\n\n      if (isAreaChart) {\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } // NOTE: Must update _endLabel before setClipPath.\n\n\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      }\n\n      lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n    } else {\n      if (isAreaChart && !polygon) {\n        // If areaStyle is added\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } else if (polygon && !isAreaChart) {\n        // If areaStyle is removed\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      } // NOTE: Must update _endLabel before setClipPath.\n\n\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      } // Update clipPath\n\n\n      var oldClipPath = lineGroup.getClipPath();\n\n      if (oldClipPath) {\n        var newClipPath = createLineClipPath(this, coordSys, false, seriesModel);\n        graphic.initProps(oldClipPath, {\n          shape: newClipPath.shape\n        }, seriesModel);\n      } else {\n        lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n      } // Always update, or it is wrong in the case turning on legend\n      // because points are not changed\n\n\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function (idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      }); // In the case data zoom triggerred refreshing frequently\n      // Data may not change if line has a category axis. So it should animate nothing\n\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n        if (hasAnimation) {\n          this._doUpdateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin);\n        } else {\n          // Not do it in update with animation\n          if (step) {\n            // TODO If stacked series is not step\n            points = turnPointsIntoStep(points, coordSys, step);\n\n            if (stackedOnPoints) {\n              stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n            }\n          }\n\n          polyline.setShape({\n            points: points\n          });\n          polygon && polygon.setShape({\n            points: points,\n            stackedOnPoints: stackedOnPoints\n          });\n        }\n      }\n    }\n\n    var emphasisModel = seriesModel.getModel('emphasis');\n    var focus = emphasisModel.get('focus');\n    var blurScope = emphasisModel.get('blurScope');\n    var emphasisDisabled = emphasisModel.get('disabled');\n    polyline.useStyle(zrUtil.defaults( // Use color in lineStyle first\n    lineStyleModel.getLineStyle(), {\n      fill: 'none',\n      stroke: visualColor,\n      lineJoin: 'bevel'\n    }));\n    setStatesStylesFromModel(polyline, seriesModel, 'lineStyle');\n\n    if (polyline.style.lineWidth > 0 && seriesModel.get(['emphasis', 'lineStyle', 'width']) === 'bolder') {\n      var emphasisLineStyle = polyline.getState('emphasis').style;\n      emphasisLineStyle.lineWidth = +polyline.style.lineWidth + 1;\n    } // Needs seriesIndex for focus\n\n\n    getECData(polyline).seriesIndex = seriesModel.seriesIndex;\n    toggleHoverEmphasis(polyline, focus, blurScope, emphasisDisabled);\n    var smooth = getSmooth(seriesModel.get('smooth'));\n    var smoothMonotone = seriesModel.get('smoothMonotone');\n    var connectNulls = seriesModel.get('connectNulls');\n    polyline.setShape({\n      smooth: smooth,\n      smoothMonotone: smoothMonotone,\n      connectNulls: connectNulls\n    });\n\n    if (polygon) {\n      var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n      var stackedOnSmooth = 0;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: visualColor,\n        opacity: 0.7,\n        lineJoin: 'bevel',\n        decal: data.getVisual('style').decal\n      }));\n\n      if (stackedOnSeries) {\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n      }\n\n      polygon.setShape({\n        smooth: smooth,\n        stackedOnSmooth: stackedOnSmooth,\n        smoothMonotone: smoothMonotone,\n        connectNulls: connectNulls\n      });\n      setStatesStylesFromModel(polygon, seriesModel, 'areaStyle'); // Needs seriesIndex for focus\n\n      getECData(polygon).seriesIndex = seriesModel.seriesIndex;\n      toggleHoverEmphasis(polygon, focus, blurScope, emphasisDisabled);\n    }\n\n    var changePolyState = function (toState) {\n      _this._changePolyState(toState);\n    };\n\n    data.eachItemGraphicEl(function (el) {\n      // Switch polyline / polygon state if element changed its state.\n      el && (el.onHoverStateChange = changePolyState);\n    });\n    this._polyline.onHoverStateChange = changePolyState;\n    this._data = data; // Save the coordinate system for transition animation when data changed\n\n    this._coordSys = coordSys;\n    this._stackedOnPoints = stackedOnPoints;\n    this._points = points;\n    this._step = step;\n    this._valueOrigin = valueOrigin;\n\n    if (seriesModel.get('triggerLineEvent')) {\n      this.packEventData(seriesModel, polyline);\n      polygon && this.packEventData(seriesModel, polygon);\n    }\n  };\n\n  LineView.prototype.packEventData = function (seriesModel, el) {\n    getECData(el).eventData = {\n      componentType: 'series',\n      componentSubType: 'line',\n      componentIndex: seriesModel.componentIndex,\n      seriesIndex: seriesModel.seriesIndex,\n      seriesName: seriesModel.name,\n      seriesType: 'line'\n    };\n  };\n\n  LineView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    this._changePolyState('emphasis');\n\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n      var points = data.getLayout('points');\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (!symbol) {\n        // Create a temporary symbol if it is not exists\n        var x = points[dataIndex * 2];\n        var y = points[dataIndex * 2 + 1];\n\n        if (isNaN(x) || isNaN(y)) {\n          // Null data\n          return;\n        } // fix #11360: should't draw symbol outside clipShapeForSymbol\n\n\n        if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(x, y)) {\n          return;\n        }\n\n        var zlevel = seriesModel.get('zlevel');\n        var z = seriesModel.get('z');\n        symbol = new SymbolClz(data, dataIndex);\n        symbol.x = x;\n        symbol.y = y;\n        symbol.setZ(zlevel, z); // ensure label text of the temporary symbol is in front of line and area polygon\n\n        var symbolLabel = symbol.getSymbolPath().getTextContent();\n\n        if (symbolLabel) {\n          symbolLabel.zlevel = zlevel;\n          symbolLabel.z = z;\n          symbolLabel.z2 = this._polyline.z2 + 1;\n        }\n\n        symbol.__temp = true;\n        data.setItemGraphicEl(dataIndex, symbol); // Stop scale animation\n\n        symbol.stopSymbolAnimation(true);\n        this.group.add(symbol);\n      }\n\n      symbol.highlight();\n    } else {\n      // Highlight whole series\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n\n  LineView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    this._changePolyState('normal');\n\n    if (dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (symbol) {\n        if (symbol.__temp) {\n          data.setItemGraphicEl(dataIndex, null);\n          this.group.remove(symbol);\n        } else {\n          symbol.downplay();\n        }\n      }\n    } else {\n      // FIXME\n      // can not downplay completely.\n      // Downplay whole series\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n\n  LineView.prototype._changePolyState = function (toState) {\n    var polygon = this._polygon;\n    setStatesFlag(this._polyline, toState);\n    polygon && setStatesFlag(polygon, toState);\n  };\n\n  LineView.prototype._newPolyline = function (points) {\n    var polyline = this._polyline; // Remove previous created polyline\n\n    if (polyline) {\n      this._lineGroup.remove(polyline);\n    }\n\n    polyline = new ECPolyline({\n      shape: {\n        points: points\n      },\n      segmentIgnoreThreshold: 2,\n      z2: 10\n    });\n\n    this._lineGroup.add(polyline);\n\n    this._polyline = polyline;\n    return polyline;\n  };\n\n  LineView.prototype._newPolygon = function (points, stackedOnPoints) {\n    var polygon = this._polygon; // Remove previous created polygon\n\n    if (polygon) {\n      this._lineGroup.remove(polygon);\n    }\n\n    polygon = new ECPolygon({\n      shape: {\n        points: points,\n        stackedOnPoints: stackedOnPoints\n      },\n      segmentIgnoreThreshold: 2\n    });\n\n    this._lineGroup.add(polygon);\n\n    this._polygon = polygon;\n    return polygon;\n  };\n\n  LineView.prototype._initSymbolLabelAnimation = function (data, coordSys, clipShape) {\n    var isHorizontalOrRadial;\n    var isCoordSysPolar;\n    var baseAxis = coordSys.getBaseAxis();\n    var isAxisInverse = baseAxis.inverse;\n\n    if (coordSys.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n      isCoordSysPolar = false;\n    } else if (coordSys.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n      isCoordSysPolar = true;\n    }\n\n    var seriesModel = data.hostModel;\n    var seriesDuration = seriesModel.get('animationDuration');\n\n    if (zrUtil.isFunction(seriesDuration)) {\n      seriesDuration = seriesDuration(null);\n    }\n\n    var seriesDalay = seriesModel.get('animationDelay') || 0;\n    var seriesDalayValue = zrUtil.isFunction(seriesDalay) ? seriesDalay(null) : seriesDalay;\n    data.eachItemGraphicEl(function (symbol, idx) {\n      var el = symbol;\n\n      if (el) {\n        var point = [symbol.x, symbol.y];\n        var start = void 0;\n        var end = void 0;\n        var current = void 0;\n\n        if (clipShape) {\n          if (isCoordSysPolar) {\n            var polarClip = clipShape;\n            var coord = coordSys.pointToCoord(point);\n\n            if (isHorizontalOrRadial) {\n              start = polarClip.startAngle;\n              end = polarClip.endAngle;\n              current = -coord[1] / 180 * Math.PI;\n            } else {\n              start = polarClip.r0;\n              end = polarClip.r;\n              current = coord[0];\n            }\n          } else {\n            var gridClip = clipShape;\n\n            if (isHorizontalOrRadial) {\n              start = gridClip.x;\n              end = gridClip.x + gridClip.width;\n              current = symbol.x;\n            } else {\n              start = gridClip.y + gridClip.height;\n              end = gridClip.y;\n              current = symbol.y;\n            }\n          }\n        }\n\n        var ratio = end === start ? 0 : (current - start) / (end - start);\n\n        if (isAxisInverse) {\n          ratio = 1 - ratio;\n        }\n\n        var delay = zrUtil.isFunction(seriesDalay) ? seriesDalay(idx) : seriesDuration * ratio + seriesDalayValue;\n        var symbolPath = el.getSymbolPath();\n        var text = symbolPath.getTextContent();\n        el.attr({\n          scaleX: 0,\n          scaleY: 0\n        });\n        el.animateTo({\n          scaleX: 1,\n          scaleY: 1\n        }, {\n          duration: 200,\n          setToFinal: true,\n          delay: delay\n        });\n\n        if (text) {\n          text.animateFrom({\n            style: {\n              opacity: 0\n            }\n          }, {\n            duration: 300,\n            delay: delay\n          });\n        }\n\n        symbolPath.disableLabelAnimation = true;\n      }\n    });\n  };\n\n  LineView.prototype._initOrUpdateEndLabel = function (seriesModel, coordSys, inheritColor) {\n    var endLabelModel = seriesModel.getModel('endLabel');\n\n    if (anyStateShowEndLabel(seriesModel)) {\n      var data_2 = seriesModel.getData();\n      var polyline = this._polyline; // series may be filtered.\n\n      var points = data_2.getLayout('points');\n\n      if (!points) {\n        polyline.removeTextContent();\n        this._endLabel = null;\n        return;\n      }\n\n      var endLabel = this._endLabel;\n\n      if (!endLabel) {\n        endLabel = this._endLabel = new graphic.Text({\n          z2: 200 // should be higher than item symbol\n\n        });\n        endLabel.ignoreClip = true;\n        polyline.setTextContent(this._endLabel);\n        polyline.disableLabelAnimation = true;\n      } // Find last non-NaN data to display data\n\n\n      var dataIndex = getLastIndexNotNull(points);\n\n      if (dataIndex >= 0) {\n        setLabelStyle(polyline, getLabelStatesModels(seriesModel, 'endLabel'), {\n          inheritColor: inheritColor,\n          labelFetcher: seriesModel,\n          labelDataIndex: dataIndex,\n          defaultText: function (dataIndex, opt, interpolatedValue) {\n            return interpolatedValue != null ? getDefaultInterpolatedLabel(data_2, interpolatedValue) : getDefaultLabel(data_2, dataIndex);\n          },\n          enableTextSetter: true\n        }, getEndLabelStateSpecified(endLabelModel, coordSys));\n        polyline.textConfig.position = null;\n      }\n    } else if (this._endLabel) {\n      this._polyline.removeTextContent();\n\n      this._endLabel = null;\n    }\n  };\n\n  LineView.prototype._endLabelOnDuring = function (percent, clipRect, data, animationRecord, valueAnimation, endLabelModel, coordSys) {\n    var endLabel = this._endLabel;\n    var polyline = this._polyline;\n\n    if (endLabel) {\n      // NOTE: Don't remove percent < 1. percent === 1 means the first frame during render.\n      // The label is not prepared at this time.\n      if (percent < 1 && animationRecord.originalX == null) {\n        animationRecord.originalX = endLabel.x;\n        animationRecord.originalY = endLabel.y;\n      }\n\n      var points = data.getLayout('points');\n      var seriesModel = data.hostModel;\n      var connectNulls = seriesModel.get('connectNulls');\n      var precision = endLabelModel.get('precision');\n      var distance = endLabelModel.get('distance') || 0;\n      var baseAxis = coordSys.getBaseAxis();\n      var isHorizontal = baseAxis.isHorizontal();\n      var isBaseInversed = baseAxis.inverse;\n      var clipShape = clipRect.shape;\n      var xOrY = isBaseInversed ? isHorizontal ? clipShape.x : clipShape.y + clipShape.height : isHorizontal ? clipShape.x + clipShape.width : clipShape.y;\n      var distanceX = (isHorizontal ? distance : 0) * (isBaseInversed ? -1 : 1);\n      var distanceY = (isHorizontal ? 0 : -distance) * (isBaseInversed ? -1 : 1);\n      var dim = isHorizontal ? 'x' : 'y';\n      var dataIndexRange = getIndexRange(points, xOrY, dim);\n      var indices = dataIndexRange.range;\n      var diff = indices[1] - indices[0];\n      var value = void 0;\n\n      if (diff >= 1) {\n        // diff > 1 && connectNulls, which is on the null data.\n        if (diff > 1 && !connectNulls) {\n          var pt = getPointAtIndex(points, indices[0]);\n          endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          valueAnimation && (value = seriesModel.getRawValue(indices[0]));\n        } else {\n          var pt = polyline.getPointOn(xOrY, dim);\n          pt && endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          var startValue = seriesModel.getRawValue(indices[0]);\n          var endValue = seriesModel.getRawValue(indices[1]);\n          valueAnimation && (value = modelUtil.interpolateRawValues(data, precision, startValue, endValue, dataIndexRange.t));\n        }\n\n        animationRecord.lastFrameIndex = indices[0];\n      } else {\n        // If diff <= 0, which is the range is not found(Include NaN)\n        // Choose the first point or last point.\n        var idx = percent === 1 || animationRecord.lastFrameIndex > 0 ? indices[0] : 0;\n        var pt = getPointAtIndex(points, idx);\n        valueAnimation && (value = seriesModel.getRawValue(idx));\n        endLabel.attr({\n          x: pt[0] + distanceX,\n          y: pt[1] + distanceY\n        });\n      }\n\n      if (valueAnimation) {\n        labelInner(endLabel).setLabelText(value);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // FIXME Two value axis\n\n\n  LineView.prototype._doUpdateAnimation = function (data, stackedOnPoints, coordSys, api, step, valueOrigin) {\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var seriesModel = data.hostModel;\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n    var current = diff.current;\n    var stackedOnCurrent = diff.stackedOnCurrent;\n    var next = diff.next;\n    var stackedOnNext = diff.stackedOnNext;\n\n    if (step) {\n      // TODO If stacked series is not step\n      current = turnPointsIntoStep(diff.current, coordSys, step);\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step);\n      next = turnPointsIntoStep(diff.next, coordSys, step);\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step);\n    } // Don't apply animation if diff is large.\n    // For better result and avoid memory explosion problems like\n    // https://github.com/apache/incubator-echarts/issues/12229\n\n\n    if (getBoundingDiff(current, next) > 3000 || polygon && getBoundingDiff(stackedOnCurrent, stackedOnNext) > 3000) {\n      polyline.stopAnimation();\n      polyline.setShape({\n        points: next\n      });\n\n      if (polygon) {\n        polygon.stopAnimation();\n        polygon.setShape({\n          points: next,\n          stackedOnPoints: stackedOnNext\n        });\n      }\n\n      return;\n    }\n\n    polyline.shape.__points = diff.current;\n    polyline.shape.points = current;\n    var target = {\n      shape: {\n        points: next\n      }\n    }; // Also animate the original points.\n    // If points reference is changed when turning into step line.\n\n    if (diff.current !== current) {\n      target.shape.__points = diff.next;\n    } // Stop previous animation.\n\n\n    polyline.stopAnimation();\n    graphic.updateProps(polyline, target, seriesModel);\n\n    if (polygon) {\n      polygon.setShape({\n        // Reuse the points with polyline.\n        points: current,\n        stackedOnPoints: stackedOnCurrent\n      });\n      polygon.stopAnimation();\n      graphic.updateProps(polygon, {\n        shape: {\n          stackedOnPoints: stackedOnNext\n        }\n      }, seriesModel); // If use attr directly in updateProps.\n\n      if (polyline.shape.points !== polygon.shape.points) {\n        polygon.shape.points = polyline.shape.points;\n      }\n    }\n\n    var updatedDataInfo = [];\n    var diffStatus = diff.status;\n\n    for (var i = 0; i < diffStatus.length; i++) {\n      var cmd = diffStatus[i].cmd;\n\n      if (cmd === '=') {\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\n\n        if (el) {\n          updatedDataInfo.push({\n            el: el,\n            ptIdx: i // Index of points\n\n          });\n        }\n      }\n    }\n\n    if (polyline.animators && polyline.animators.length) {\n      polyline.animators[0].during(function () {\n        polygon && polygon.dirtyShape();\n        var points = polyline.shape.__points;\n\n        for (var i = 0; i < updatedDataInfo.length; i++) {\n          var el = updatedDataInfo[i].el;\n          var offset = updatedDataInfo[i].ptIdx * 2;\n          el.x = points[offset];\n          el.y = points[offset + 1];\n          el.markRedraw();\n        }\n      });\n    }\n  };\n\n  LineView.prototype.remove = function (ecModel) {\n    var group = this.group;\n    var oldData = this._data;\n\n    this._lineGroup.removeAll();\n\n    this._symbolDraw.remove(true); // Remove temporary created elements when highlighting\n\n\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._endLabel = this._data = null;\n  };\n\n  LineView.type = 'line';\n  return LineView;\n}(ChartView);\n\nexport default LineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { map } from 'zrender/lib/core/util.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\nimport { createFloat32Array } from '../util/vendor.js';\nexport default function pointsLayout(seriesType, forceStoreInTypedArray) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      var coordSys = seriesModel.coordinateSystem;\n      var pipelineContext = seriesModel.pipelineContext;\n      var useTypedArray = forceStoreInTypedArray || pipelineContext.large;\n\n      if (!coordSys) {\n        return;\n      }\n\n      var dims = map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }).slice(0, 2);\n      var dimLen = dims.length;\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n      if (isDimensionStacked(data, dims[0])) {\n        dims[0] = stackResultDim;\n      }\n\n      if (isDimensionStacked(data, dims[1])) {\n        dims[1] = stackResultDim;\n      }\n\n      var store = data.getStore();\n      var dimIdx0 = data.getDimensionIndex(dims[0]);\n      var dimIdx1 = data.getDimensionIndex(dims[1]);\n      return dimLen && {\n        progress: function (params, data) {\n          var segCount = params.end - params.start;\n          var points = useTypedArray && createFloat32Array(segCount * dimLen);\n          var tmpIn = [];\n          var tmpOut = [];\n\n          for (var i = params.start, offset = 0; i < params.end; i++) {\n            var point = void 0;\n\n            if (dimLen === 1) {\n              var x = store.get(dimIdx0, i); // NOTE: Make sure the second parameter is null to use default strategy.\n\n              point = coordSys.dataToPoint(x, null, tmpOut);\n            } else {\n              tmpIn[0] = store.get(dimIdx0, i);\n              tmpIn[1] = store.get(dimIdx1, i); // Let coordinate system to handle the NaN data.\n\n              point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n            }\n\n            if (useTypedArray) {\n              points[offset++] = point[0];\n              points[offset++] = point[1];\n            } else {\n              data.setItemLayout(i, point.slice());\n            }\n          }\n\n          useTypedArray && data.setLayout('points', points);\n        }\n      };\n    }\n  };\n}\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LineSeries from './LineSeries.js';\nimport LineView from './LineView.js'; // In case developer forget to include grid component\n\nimport layoutPoints from '../../layout/points.js';\nimport dataSample from '../../processor/dataSample.js';\nexport function install(registers) {\n  registers.registerChartView(LineView);\n  registers.registerSeriesModel(LineSeries);\n  registers.registerLayout(layoutPoints('line', true));\n  registers.registerVisual({\n    seriesType: 'line',\n    reset: function (seriesModel) {\n      var data = seriesModel.getData(); // Visual coding for legend\n\n      var lineStyle = seriesModel.getModel('lineStyle').getLineStyle();\n\n      if (lineStyle && !lineStyle.stroke) {\n        // Fill in visual should be palette color if\n        // has color callback\n        lineStyle.stroke = data.getVisual('style').fill;\n      }\n\n      data.setVisual('legendLineStyle', lineStyle);\n    }\n  }); // Down sample after filter\n\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));\n}","import { cubicSubdivide } from '../core/curve.js';\nimport PathProxy from '../core/PathProxy.js';\nvar CMD = PathProxy.CMD;\nfunction aroundEqual(a, b) {\n    return Math.abs(a - b) < 1e-5;\n}\nexport function pathToBezierCurves(path) {\n    var data = path.data;\n    var len = path.len();\n    var bezierArrayGroups = [];\n    var currentSubpath;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    function createNewSubpath(x, y) {\n        if (currentSubpath && currentSubpath.length > 2) {\n            bezierArrayGroups.push(currentSubpath);\n        }\n        currentSubpath = [x, y];\n    }\n    function addLine(x0, y0, x1, y1) {\n        if (!(aroundEqual(x0, x1) && aroundEqual(y0, y1))) {\n            currentSubpath.push(x0, y0, x1, y1, x1, y1);\n        }\n    }\n    function addArc(startAngle, endAngle, cx, cy, rx, ry) {\n        var delta = Math.abs(endAngle - startAngle);\n        var len = Math.tan(delta / 4) * 4 / 3;\n        var dir = endAngle < startAngle ? -1 : 1;\n        var c1 = Math.cos(startAngle);\n        var s1 = Math.sin(startAngle);\n        var c2 = Math.cos(endAngle);\n        var s2 = Math.sin(endAngle);\n        var x1 = c1 * rx + cx;\n        var y1 = s1 * ry + cy;\n        var x4 = c2 * rx + cx;\n        var y4 = s2 * ry + cy;\n        var hx = rx * len * dir;\n        var hy = ry * len * dir;\n        currentSubpath.push(x1 - hx * s1, y1 + hy * c1, x4 + hx * s2, y4 - hy * c2, x4, y4);\n    }\n    var x1;\n    var y1;\n    var x2;\n    var y2;\n    for (var i = 0; i < len;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n        if (isFirst) {\n            xi = data[i];\n            yi = data[i + 1];\n            x0 = xi;\n            y0 = yi;\n            if (cmd === CMD.L || cmd === CMD.C || cmd === CMD.Q) {\n                currentSubpath = [x0, y0];\n            }\n        }\n        switch (cmd) {\n            case CMD.M:\n                xi = x0 = data[i++];\n                yi = y0 = data[i++];\n                createNewSubpath(x0, y0);\n                break;\n            case CMD.L:\n                x1 = data[i++];\n                y1 = data[i++];\n                addLine(xi, yi, x1, y1);\n                xi = x1;\n                yi = y1;\n                break;\n            case CMD.C:\n                currentSubpath.push(data[i++], data[i++], data[i++], data[i++], xi = data[i++], yi = data[i++]);\n                break;\n            case CMD.Q:\n                x1 = data[i++];\n                y1 = data[i++];\n                x2 = data[i++];\n                y2 = data[i++];\n                currentSubpath.push(xi + 2 / 3 * (x1 - xi), yi + 2 / 3 * (y1 - yi), x2 + 2 / 3 * (x1 - x2), y2 + 2 / 3 * (y1 - y2), x2, y2);\n                xi = x2;\n                yi = y2;\n                break;\n            case CMD.A:\n                var cx = data[i++];\n                var cy = data[i++];\n                var rx = data[i++];\n                var ry = data[i++];\n                var startAngle = data[i++];\n                var endAngle = data[i++] + startAngle;\n                i += 1;\n                var anticlockwise = !data[i++];\n                x1 = Math.cos(startAngle) * rx + cx;\n                y1 = Math.sin(startAngle) * ry + cy;\n                if (isFirst) {\n                    x0 = x1;\n                    y0 = y1;\n                    createNewSubpath(x0, y0);\n                }\n                else {\n                    addLine(xi, yi, x1, y1);\n                }\n                xi = Math.cos(endAngle) * rx + cx;\n                yi = Math.sin(endAngle) * ry + cy;\n                var step = (anticlockwise ? -1 : 1) * Math.PI / 2;\n                for (var angle = startAngle; anticlockwise ? angle > endAngle : angle < endAngle; angle += step) {\n                    var nextAngle = anticlockwise ? Math.max(angle + step, endAngle)\n                        : Math.min(angle + step, endAngle);\n                    addArc(angle, nextAngle, cx, cy, rx, ry);\n                }\n                break;\n            case CMD.R:\n                x0 = xi = data[i++];\n                y0 = yi = data[i++];\n                x1 = x0 + data[i++];\n                y1 = y0 + data[i++];\n                createNewSubpath(x1, y0);\n                addLine(x1, y0, x1, y1);\n                addLine(x1, y1, x0, y1);\n                addLine(x0, y1, x0, y0);\n                addLine(x0, y0, x1, y0);\n                break;\n            case CMD.Z:\n                currentSubpath && addLine(xi, yi, x0, y0);\n                xi = x0;\n                yi = y0;\n                break;\n        }\n    }\n    if (currentSubpath && currentSubpath.length > 2) {\n        bezierArrayGroups.push(currentSubpath);\n    }\n    return bezierArrayGroups;\n}\nfunction adpativeBezier(x0, y0, x1, y1, x2, y2, x3, y3, out, scale) {\n    if (aroundEqual(x0, x1) && aroundEqual(y0, y1) && aroundEqual(x2, x3) && aroundEqual(y2, y3)) {\n        out.push(x3, y3);\n        return;\n    }\n    var PIXEL_DISTANCE = 2 / scale;\n    var PIXEL_DISTANCE_SQR = PIXEL_DISTANCE * PIXEL_DISTANCE;\n    var dx = x3 - x0;\n    var dy = y3 - y0;\n    var d = Math.sqrt(dx * dx + dy * dy);\n    dx /= d;\n    dy /= d;\n    var dx1 = x1 - x0;\n    var dy1 = y1 - y0;\n    var dx2 = x2 - x3;\n    var dy2 = y2 - y3;\n    var cp1LenSqr = dx1 * dx1 + dy1 * dy1;\n    var cp2LenSqr = dx2 * dx2 + dy2 * dy2;\n    if (cp1LenSqr < PIXEL_DISTANCE_SQR && cp2LenSqr < PIXEL_DISTANCE_SQR) {\n        out.push(x3, y3);\n        return;\n    }\n    var projLen1 = dx * dx1 + dy * dy1;\n    var projLen2 = -dx * dx2 - dy * dy2;\n    var d1Sqr = cp1LenSqr - projLen1 * projLen1;\n    var d2Sqr = cp2LenSqr - projLen2 * projLen2;\n    if (d1Sqr < PIXEL_DISTANCE_SQR && projLen1 >= 0\n        && d2Sqr < PIXEL_DISTANCE_SQR && projLen2 >= 0) {\n        out.push(x3, y3);\n        return;\n    }\n    var tmpSegX = [];\n    var tmpSegY = [];\n    cubicSubdivide(x0, x1, x2, x3, 0.5, tmpSegX);\n    cubicSubdivide(y0, y1, y2, y3, 0.5, tmpSegY);\n    adpativeBezier(tmpSegX[0], tmpSegY[0], tmpSegX[1], tmpSegY[1], tmpSegX[2], tmpSegY[2], tmpSegX[3], tmpSegY[3], out, scale);\n    adpativeBezier(tmpSegX[4], tmpSegY[4], tmpSegX[5], tmpSegY[5], tmpSegX[6], tmpSegY[6], tmpSegX[7], tmpSegY[7], out, scale);\n}\nexport function pathToPolygons(path, scale) {\n    var bezierArrayGroups = pathToBezierCurves(path);\n    var polygons = [];\n    scale = scale || 1;\n    for (var i = 0; i < bezierArrayGroups.length; i++) {\n        var beziers = bezierArrayGroups[i];\n        var polygon = [];\n        var x0 = beziers[0];\n        var y0 = beziers[1];\n        polygon.push(x0, y0);\n        for (var k = 2; k < beziers.length;) {\n            var x1 = beziers[k++];\n            var y1 = beziers[k++];\n            var x2 = beziers[k++];\n            var y2 = beziers[k++];\n            var x3 = beziers[k++];\n            var y3 = beziers[k++];\n            adpativeBezier(x0, y0, x1, y1, x2, y2, x3, y3, polygon, scale);\n            x0 = x3;\n            y0 = y3;\n        }\n        polygons.push(polygon);\n    }\n    return polygons;\n}\n","import { fromPoints } from '../core/bbox.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport Point from '../core/Point.js';\nimport { map } from '../core/util.js';\nimport Polygon from '../graphic/shape/Polygon.js';\nimport Rect from '../graphic/shape/Rect.js';\nimport Sector from '../graphic/shape/Sector.js';\nimport { pathToPolygons } from './convertPath.js';\nimport { clonePath } from './path.js';\nfunction getDividingGrids(dimSize, rowDim, count) {\n    var rowSize = dimSize[rowDim];\n    var columnSize = dimSize[1 - rowDim];\n    var ratio = Math.abs(rowSize / columnSize);\n    var rowCount = Math.ceil(Math.sqrt(ratio * count));\n    var columnCount = Math.floor(count / rowCount);\n    if (columnCount === 0) {\n        columnCount = 1;\n        rowCount = count;\n    }\n    var grids = [];\n    for (var i = 0; i < rowCount; i++) {\n        grids.push(columnCount);\n    }\n    var currentCount = rowCount * columnCount;\n    var remained = count - currentCount;\n    if (remained > 0) {\n        for (var i = 0; i < remained; i++) {\n            grids[i % rowCount] += 1;\n        }\n    }\n    return grids;\n}\nfunction divideSector(sectorShape, count, outShapes) {\n    var r0 = sectorShape.r0;\n    var r = sectorShape.r;\n    var startAngle = sectorShape.startAngle;\n    var endAngle = sectorShape.endAngle;\n    var angle = Math.abs(endAngle - startAngle);\n    var arcLen = angle * r;\n    var deltaR = r - r0;\n    var isAngleRow = arcLen > Math.abs(deltaR);\n    var grids = getDividingGrids([arcLen, deltaR], isAngleRow ? 0 : 1, count);\n    var rowSize = (isAngleRow ? angle : deltaR) / grids.length;\n    for (var row = 0; row < grids.length; row++) {\n        var columnSize = (isAngleRow ? deltaR : angle) / grids[row];\n        for (var column = 0; column < grids[row]; column++) {\n            var newShape = {};\n            if (isAngleRow) {\n                newShape.startAngle = startAngle + rowSize * row;\n                newShape.endAngle = startAngle + rowSize * (row + 1);\n                newShape.r0 = r0 + columnSize * column;\n                newShape.r = r0 + columnSize * (column + 1);\n            }\n            else {\n                newShape.startAngle = startAngle + columnSize * column;\n                newShape.endAngle = startAngle + columnSize * (column + 1);\n                newShape.r0 = r0 + rowSize * row;\n                newShape.r = r0 + rowSize * (row + 1);\n            }\n            newShape.clockwise = sectorShape.clockwise;\n            newShape.cx = sectorShape.cx;\n            newShape.cy = sectorShape.cy;\n            outShapes.push(newShape);\n        }\n    }\n}\nfunction divideRect(rectShape, count, outShapes) {\n    var width = rectShape.width;\n    var height = rectShape.height;\n    var isHorizontalRow = width > height;\n    var grids = getDividingGrids([width, height], isHorizontalRow ? 0 : 1, count);\n    var rowSizeDim = isHorizontalRow ? 'width' : 'height';\n    var columnSizeDim = isHorizontalRow ? 'height' : 'width';\n    var rowDim = isHorizontalRow ? 'x' : 'y';\n    var columnDim = isHorizontalRow ? 'y' : 'x';\n    var rowSize = rectShape[rowSizeDim] / grids.length;\n    for (var row = 0; row < grids.length; row++) {\n        var columnSize = rectShape[columnSizeDim] / grids[row];\n        for (var column = 0; column < grids[row]; column++) {\n            var newShape = {};\n            newShape[rowDim] = row * rowSize;\n            newShape[columnDim] = column * columnSize;\n            newShape[rowSizeDim] = rowSize;\n            newShape[columnSizeDim] = columnSize;\n            newShape.x += rectShape.x;\n            newShape.y += rectShape.y;\n            outShapes.push(newShape);\n        }\n    }\n}\nfunction crossProduct2d(x1, y1, x2, y2) {\n    return x1 * y2 - x2 * y1;\n}\nfunction lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n    var mx = a2x - a1x;\n    var my = a2y - a1y;\n    var nx = b2x - b1x;\n    var ny = b2y - b1y;\n    var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n    if (Math.abs(nmCrossProduct) < 1e-6) {\n        return null;\n    }\n    var b1a1x = a1x - b1x;\n    var b1a1y = a1y - b1y;\n    var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n    if (p < 0 || p > 1) {\n        return null;\n    }\n    return new Point(p * mx + a1x, p * my + a1y);\n}\nfunction projPtOnLine(pt, lineA, lineB) {\n    var dir = new Point();\n    Point.sub(dir, lineB, lineA);\n    dir.normalize();\n    var dir2 = new Point();\n    Point.sub(dir2, pt, lineA);\n    var len = dir2.dot(dir);\n    return len;\n}\nfunction addToPoly(poly, pt) {\n    var last = poly[poly.length - 1];\n    if (last && last[0] === pt[0] && last[1] === pt[1]) {\n        return;\n    }\n    poly.push(pt);\n}\nfunction splitPolygonByLine(points, lineA, lineB) {\n    var len = points.length;\n    var intersections = [];\n    for (var i = 0; i < len; i++) {\n        var p0 = points[i];\n        var p1 = points[(i + 1) % len];\n        var intersectionPt = lineLineIntersect(p0[0], p0[1], p1[0], p1[1], lineA.x, lineA.y, lineB.x, lineB.y);\n        if (intersectionPt) {\n            intersections.push({\n                projPt: projPtOnLine(intersectionPt, lineA, lineB),\n                pt: intersectionPt,\n                idx: i\n            });\n        }\n    }\n    if (intersections.length < 2) {\n        return [{ points: points }, { points: points }];\n    }\n    intersections.sort(function (a, b) {\n        return a.projPt - b.projPt;\n    });\n    var splitPt0 = intersections[0];\n    var splitPt1 = intersections[intersections.length - 1];\n    if (splitPt1.idx < splitPt0.idx) {\n        var tmp = splitPt0;\n        splitPt0 = splitPt1;\n        splitPt1 = tmp;\n    }\n    var splitPt0Arr = [splitPt0.pt.x, splitPt0.pt.y];\n    var splitPt1Arr = [splitPt1.pt.x, splitPt1.pt.y];\n    var newPolyA = [splitPt0Arr];\n    var newPolyB = [splitPt1Arr];\n    for (var i = splitPt0.idx + 1; i <= splitPt1.idx; i++) {\n        addToPoly(newPolyA, points[i].slice());\n    }\n    addToPoly(newPolyA, splitPt1Arr);\n    addToPoly(newPolyA, splitPt0Arr);\n    for (var i = splitPt1.idx + 1; i <= splitPt0.idx + len; i++) {\n        addToPoly(newPolyB, points[i % len].slice());\n    }\n    addToPoly(newPolyB, splitPt0Arr);\n    addToPoly(newPolyB, splitPt1Arr);\n    return [{\n            points: newPolyA\n        }, {\n            points: newPolyB\n        }];\n}\nfunction binaryDividePolygon(polygonShape) {\n    var points = polygonShape.points;\n    var min = [];\n    var max = [];\n    fromPoints(points, min, max);\n    var boundingRect = new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    var width = boundingRect.width;\n    var height = boundingRect.height;\n    var x = boundingRect.x;\n    var y = boundingRect.y;\n    var pt0 = new Point();\n    var pt1 = new Point();\n    if (width > height) {\n        pt0.x = pt1.x = x + width / 2;\n        pt0.y = y;\n        pt1.y = y + height;\n    }\n    else {\n        pt0.y = pt1.y = y + height / 2;\n        pt0.x = x;\n        pt1.x = x + width;\n    }\n    return splitPolygonByLine(points, pt0, pt1);\n}\nfunction binaryDivideRecursive(divider, shape, count, out) {\n    if (count === 1) {\n        out.push(shape);\n    }\n    else {\n        var mid = Math.floor(count / 2);\n        var sub = divider(shape);\n        binaryDivideRecursive(divider, sub[0], mid, out);\n        binaryDivideRecursive(divider, sub[1], count - mid, out);\n    }\n    return out;\n}\nexport function clone(path, count) {\n    var paths = [];\n    for (var i = 0; i < count; i++) {\n        paths.push(clonePath(path));\n    }\n    return paths;\n}\nfunction copyPathProps(source, target) {\n    target.setStyle(source.style);\n    target.z = source.z;\n    target.z2 = source.z2;\n    target.zlevel = source.zlevel;\n}\nfunction polygonConvert(points) {\n    var out = [];\n    for (var i = 0; i < points.length;) {\n        out.push([points[i++], points[i++]]);\n    }\n    return out;\n}\nexport function split(path, count) {\n    var outShapes = [];\n    var shape = path.shape;\n    var OutShapeCtor;\n    switch (path.type) {\n        case 'rect':\n            divideRect(shape, count, outShapes);\n            OutShapeCtor = Rect;\n            break;\n        case 'sector':\n            divideSector(shape, count, outShapes);\n            OutShapeCtor = Sector;\n            break;\n        case 'circle':\n            divideSector({\n                r0: 0, r: shape.r, startAngle: 0, endAngle: Math.PI * 2,\n                cx: shape.cx, cy: shape.cy\n            }, count, outShapes);\n            OutShapeCtor = Sector;\n            break;\n        default:\n            var m = path.getComputedTransform();\n            var scale = m ? Math.sqrt(Math.max(m[0] * m[0] + m[1] * m[1], m[2] * m[2] + m[3] * m[3])) : 1;\n            var polygons = map(pathToPolygons(path.getUpdatedPathProxy(), scale), function (poly) { return polygonConvert(poly); });\n            var polygonCount = polygons.length;\n            if (polygonCount === 0) {\n                binaryDivideRecursive(binaryDividePolygon, {\n                    points: polygons[0]\n                }, count, outShapes);\n            }\n            else if (polygonCount === count) {\n                for (var i = 0; i < polygonCount; i++) {\n                    outShapes.push({\n                        points: polygons[i]\n                    });\n                }\n            }\n            else {\n                var totalArea_1 = 0;\n                var items = map(polygons, function (poly) {\n                    var min = [];\n                    var max = [];\n                    fromPoints(poly, min, max);\n                    var area = (max[1] - min[1]) * (max[0] - min[0]);\n                    totalArea_1 += area;\n                    return { poly: poly, area: area };\n                });\n                items.sort(function (a, b) { return b.area - a.area; });\n                var left = count;\n                for (var i = 0; i < polygonCount; i++) {\n                    var item = items[i];\n                    if (left <= 0) {\n                        break;\n                    }\n                    var selfCount = i === polygonCount - 1\n                        ? left\n                        : Math.ceil(item.area / totalArea_1 * count);\n                    if (selfCount < 0) {\n                        continue;\n                    }\n                    binaryDivideRecursive(binaryDividePolygon, {\n                        points: item.poly\n                    }, selfCount, outShapes);\n                    left -= selfCount;\n                }\n                ;\n            }\n            OutShapeCtor = Polygon;\n            break;\n    }\n    if (!OutShapeCtor) {\n        return clone(path, count);\n    }\n    var out = [];\n    for (var i = 0; i < outShapes.length; i++) {\n        var subPath = new OutShapeCtor();\n        subPath.setShape(outShapes[i]);\n        copyPathProps(path, subPath);\n        out.push(subPath);\n    }\n    return out;\n}\n","import { cubicSubdivide } from '../core/curve.js';\nimport Path from '../graphic/Path.js';\nimport { defaults, map } from '../core/util.js';\nimport { lerp } from '../core/vector.js';\nimport { clonePath } from './path.js';\nimport Transformable from '../core/Transformable.js';\nimport { split } from './dividePath.js';\nimport { pathToBezierCurves } from './convertPath.js';\nfunction alignSubpath(subpath1, subpath2) {\n    var len1 = subpath1.length;\n    var len2 = subpath2.length;\n    if (len1 === len2) {\n        return [subpath1, subpath2];\n    }\n    var tmpSegX = [];\n    var tmpSegY = [];\n    var shorterPath = len1 < len2 ? subpath1 : subpath2;\n    var shorterLen = Math.min(len1, len2);\n    var diff = Math.abs(len2 - len1) / 6;\n    var shorterBezierCount = (shorterLen - 2) / 6;\n    var eachCurveSubDivCount = Math.ceil(diff / shorterBezierCount) + 1;\n    var newSubpath = [shorterPath[0], shorterPath[1]];\n    var remained = diff;\n    for (var i = 2; i < shorterLen;) {\n        var x0 = shorterPath[i - 2];\n        var y0 = shorterPath[i - 1];\n        var x1 = shorterPath[i++];\n        var y1 = shorterPath[i++];\n        var x2 = shorterPath[i++];\n        var y2 = shorterPath[i++];\n        var x3 = shorterPath[i++];\n        var y3 = shorterPath[i++];\n        if (remained <= 0) {\n            newSubpath.push(x1, y1, x2, y2, x3, y3);\n            continue;\n        }\n        var actualSubDivCount = Math.min(remained, eachCurveSubDivCount - 1) + 1;\n        for (var k = 1; k <= actualSubDivCount; k++) {\n            var p = k / actualSubDivCount;\n            cubicSubdivide(x0, x1, x2, x3, p, tmpSegX);\n            cubicSubdivide(y0, y1, y2, y3, p, tmpSegY);\n            x0 = tmpSegX[3];\n            y0 = tmpSegY[3];\n            newSubpath.push(tmpSegX[1], tmpSegY[1], tmpSegX[2], tmpSegY[2], x0, y0);\n            x1 = tmpSegX[5];\n            y1 = tmpSegY[5];\n            x2 = tmpSegX[6];\n            y2 = tmpSegY[6];\n        }\n        remained -= actualSubDivCount - 1;\n    }\n    return shorterPath === subpath1 ? [newSubpath, subpath2] : [subpath1, newSubpath];\n}\nfunction createSubpath(lastSubpathSubpath, otherSubpath) {\n    var len = lastSubpathSubpath.length;\n    var lastX = lastSubpathSubpath[len - 2];\n    var lastY = lastSubpathSubpath[len - 1];\n    var newSubpath = [];\n    for (var i = 0; i < otherSubpath.length;) {\n        newSubpath[i++] = lastX;\n        newSubpath[i++] = lastY;\n    }\n    return newSubpath;\n}\nexport function alignBezierCurves(array1, array2) {\n    var _a;\n    var lastSubpath1;\n    var lastSubpath2;\n    var newArray1 = [];\n    var newArray2 = [];\n    for (var i = 0; i < Math.max(array1.length, array2.length); i++) {\n        var subpath1 = array1[i];\n        var subpath2 = array2[i];\n        var newSubpath1 = void 0;\n        var newSubpath2 = void 0;\n        if (!subpath1) {\n            newSubpath1 = createSubpath(lastSubpath1 || subpath2, subpath2);\n            newSubpath2 = subpath2;\n        }\n        else if (!subpath2) {\n            newSubpath2 = createSubpath(lastSubpath2 || subpath1, subpath1);\n            newSubpath1 = subpath1;\n        }\n        else {\n            _a = alignSubpath(subpath1, subpath2), newSubpath1 = _a[0], newSubpath2 = _a[1];\n            lastSubpath1 = newSubpath1;\n            lastSubpath2 = newSubpath2;\n        }\n        newArray1.push(newSubpath1);\n        newArray2.push(newSubpath2);\n    }\n    return [newArray1, newArray2];\n}\nexport function centroid(array) {\n    var signedArea = 0;\n    var cx = 0;\n    var cy = 0;\n    var len = array.length;\n    for (var i = 0, j = len - 2; i < len; j = i, i += 2) {\n        var x0 = array[j];\n        var y0 = array[j + 1];\n        var x1 = array[i];\n        var y1 = array[i + 1];\n        var a = x0 * y1 - x1 * y0;\n        signedArea += a;\n        cx += (x0 + x1) * a;\n        cy += (y0 + y1) * a;\n    }\n    if (signedArea === 0) {\n        return [array[0] || 0, array[1] || 0];\n    }\n    return [cx / signedArea / 3, cy / signedArea / 3, signedArea];\n}\nfunction findBestRingOffset(fromSubBeziers, toSubBeziers, fromCp, toCp) {\n    var bezierCount = (fromSubBeziers.length - 2) / 6;\n    var bestScore = Infinity;\n    var bestOffset = 0;\n    var len = fromSubBeziers.length;\n    var len2 = len - 2;\n    for (var offset = 0; offset < bezierCount; offset++) {\n        var cursorOffset = offset * 6;\n        var score = 0;\n        for (var k = 0; k < len; k += 2) {\n            var idx = k === 0 ? cursorOffset : ((cursorOffset + k - 2) % len2 + 2);\n            var x0 = fromSubBeziers[idx] - fromCp[0];\n            var y0 = fromSubBeziers[idx + 1] - fromCp[1];\n            var x1 = toSubBeziers[k] - toCp[0];\n            var y1 = toSubBeziers[k + 1] - toCp[1];\n            var dx = x1 - x0;\n            var dy = y1 - y0;\n            score += dx * dx + dy * dy;\n        }\n        if (score < bestScore) {\n            bestScore = score;\n            bestOffset = offset;\n        }\n    }\n    return bestOffset;\n}\nfunction reverse(array) {\n    var newArr = [];\n    var len = array.length;\n    for (var i = 0; i < len; i += 2) {\n        newArr[i] = array[len - i - 2];\n        newArr[i + 1] = array[len - i - 1];\n    }\n    return newArr;\n}\nfunction findBestMorphingRotation(fromArr, toArr, searchAngleIteration, searchAngleRange) {\n    var result = [];\n    var fromNeedsReverse;\n    for (var i = 0; i < fromArr.length; i++) {\n        var fromSubpathBezier = fromArr[i];\n        var toSubpathBezier = toArr[i];\n        var fromCp = centroid(fromSubpathBezier);\n        var toCp = centroid(toSubpathBezier);\n        if (fromNeedsReverse == null) {\n            fromNeedsReverse = fromCp[2] < 0 !== toCp[2] < 0;\n        }\n        var newFromSubpathBezier = [];\n        var newToSubpathBezier = [];\n        var bestAngle = 0;\n        var bestScore = Infinity;\n        var tmpArr = [];\n        var len = fromSubpathBezier.length;\n        if (fromNeedsReverse) {\n            fromSubpathBezier = reverse(fromSubpathBezier);\n        }\n        var offset = findBestRingOffset(fromSubpathBezier, toSubpathBezier, fromCp, toCp) * 6;\n        var len2 = len - 2;\n        for (var k = 0; k < len2; k += 2) {\n            var idx = (offset + k) % len2 + 2;\n            newFromSubpathBezier[k + 2] = fromSubpathBezier[idx] - fromCp[0];\n            newFromSubpathBezier[k + 3] = fromSubpathBezier[idx + 1] - fromCp[1];\n        }\n        newFromSubpathBezier[0] = fromSubpathBezier[offset] - fromCp[0];\n        newFromSubpathBezier[1] = fromSubpathBezier[offset + 1] - fromCp[1];\n        if (searchAngleIteration > 0) {\n            var step = searchAngleRange / searchAngleIteration;\n            for (var angle = -searchAngleRange / 2; angle <= searchAngleRange / 2; angle += step) {\n                var sa = Math.sin(angle);\n                var ca = Math.cos(angle);\n                var score = 0;\n                for (var k = 0; k < fromSubpathBezier.length; k += 2) {\n                    var x0 = newFromSubpathBezier[k];\n                    var y0 = newFromSubpathBezier[k + 1];\n                    var x1 = toSubpathBezier[k] - toCp[0];\n                    var y1 = toSubpathBezier[k + 1] - toCp[1];\n                    var newX1 = x1 * ca - y1 * sa;\n                    var newY1 = x1 * sa + y1 * ca;\n                    tmpArr[k] = newX1;\n                    tmpArr[k + 1] = newY1;\n                    var dx = newX1 - x0;\n                    var dy = newY1 - y0;\n                    score += dx * dx + dy * dy;\n                }\n                if (score < bestScore) {\n                    bestScore = score;\n                    bestAngle = angle;\n                    for (var m = 0; m < tmpArr.length; m++) {\n                        newToSubpathBezier[m] = tmpArr[m];\n                    }\n                }\n            }\n        }\n        else {\n            for (var i_1 = 0; i_1 < len; i_1 += 2) {\n                newToSubpathBezier[i_1] = toSubpathBezier[i_1] - toCp[0];\n                newToSubpathBezier[i_1 + 1] = toSubpathBezier[i_1 + 1] - toCp[1];\n            }\n        }\n        result.push({\n            from: newFromSubpathBezier,\n            to: newToSubpathBezier,\n            fromCp: fromCp,\n            toCp: toCp,\n            rotation: -bestAngle\n        });\n    }\n    return result;\n}\nexport function isCombineMorphing(path) {\n    return path.__isCombineMorphing;\n}\nexport function isMorphing(el) {\n    return el.__morphT >= 0;\n}\nvar SAVED_METHOD_PREFIX = '__mOriginal_';\nfunction saveAndModifyMethod(obj, methodName, modifiers) {\n    var savedMethodName = SAVED_METHOD_PREFIX + methodName;\n    var originalMethod = obj[savedMethodName] || obj[methodName];\n    if (!obj[savedMethodName]) {\n        obj[savedMethodName] = obj[methodName];\n    }\n    var replace = modifiers.replace;\n    var after = modifiers.after;\n    var before = modifiers.before;\n    obj[methodName] = function () {\n        var args = arguments;\n        var res;\n        before && before.apply(this, args);\n        if (replace) {\n            res = replace.apply(this, args);\n        }\n        else {\n            res = originalMethod.apply(this, args);\n        }\n        after && after.apply(this, args);\n        return res;\n    };\n}\nfunction restoreMethod(obj, methodName) {\n    var savedMethodName = SAVED_METHOD_PREFIX + methodName;\n    if (obj[savedMethodName]) {\n        obj[methodName] = obj[savedMethodName];\n        obj[savedMethodName] = null;\n    }\n}\nfunction applyTransformOnBeziers(bezierCurves, mm) {\n    for (var i = 0; i < bezierCurves.length; i++) {\n        var subBeziers = bezierCurves[i];\n        for (var k = 0; k < subBeziers.length;) {\n            var x = subBeziers[k];\n            var y = subBeziers[k + 1];\n            subBeziers[k++] = mm[0] * x + mm[2] * y + mm[4];\n            subBeziers[k++] = mm[1] * x + mm[3] * y + mm[5];\n        }\n    }\n}\nfunction prepareMorphPath(fromPath, toPath) {\n    var fromPathProxy = fromPath.getUpdatedPathProxy();\n    var toPathProxy = toPath.getUpdatedPathProxy();\n    var _a = alignBezierCurves(pathToBezierCurves(fromPathProxy), pathToBezierCurves(toPathProxy)), fromBezierCurves = _a[0], toBezierCurves = _a[1];\n    var fromPathTransform = fromPath.getComputedTransform();\n    var toPathTransform = toPath.getComputedTransform();\n    function updateIdentityTransform() {\n        this.transform = null;\n    }\n    fromPathTransform && applyTransformOnBeziers(fromBezierCurves, fromPathTransform);\n    toPathTransform && applyTransformOnBeziers(toBezierCurves, toPathTransform);\n    saveAndModifyMethod(toPath, 'updateTransform', { replace: updateIdentityTransform });\n    toPath.transform = null;\n    var morphingData = findBestMorphingRotation(fromBezierCurves, toBezierCurves, 10, Math.PI);\n    var tmpArr = [];\n    saveAndModifyMethod(toPath, 'buildPath', { replace: function (path) {\n            var t = toPath.__morphT;\n            var onet = 1 - t;\n            var newCp = [];\n            for (var i = 0; i < morphingData.length; i++) {\n                var item = morphingData[i];\n                var from = item.from;\n                var to = item.to;\n                var angle = item.rotation * t;\n                var fromCp = item.fromCp;\n                var toCp = item.toCp;\n                var sa = Math.sin(angle);\n                var ca = Math.cos(angle);\n                lerp(newCp, fromCp, toCp, t);\n                for (var m = 0; m < from.length; m += 2) {\n                    var x0_1 = from[m];\n                    var y0_1 = from[m + 1];\n                    var x1 = to[m];\n                    var y1 = to[m + 1];\n                    var x = x0_1 * onet + x1 * t;\n                    var y = y0_1 * onet + y1 * t;\n                    tmpArr[m] = (x * ca - y * sa) + newCp[0];\n                    tmpArr[m + 1] = (x * sa + y * ca) + newCp[1];\n                }\n                var x0 = tmpArr[0];\n                var y0 = tmpArr[1];\n                path.moveTo(x0, y0);\n                for (var m = 2; m < from.length;) {\n                    var x1 = tmpArr[m++];\n                    var y1 = tmpArr[m++];\n                    var x2 = tmpArr[m++];\n                    var y2 = tmpArr[m++];\n                    var x3 = tmpArr[m++];\n                    var y3 = tmpArr[m++];\n                    if (x0 === x1 && y0 === y1 && x2 === x3 && y2 === y3) {\n                        path.lineTo(x3, y3);\n                    }\n                    else {\n                        path.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n                    }\n                    x0 = x3;\n                    y0 = y3;\n                }\n            }\n        } });\n}\nexport function morphPath(fromPath, toPath, animationOpts) {\n    if (!fromPath || !toPath) {\n        return toPath;\n    }\n    var oldDone = animationOpts.done;\n    var oldDuring = animationOpts.during;\n    prepareMorphPath(fromPath, toPath);\n    toPath.__morphT = 0;\n    function restoreToPath() {\n        restoreMethod(toPath, 'buildPath');\n        restoreMethod(toPath, 'updateTransform');\n        toPath.__morphT = -1;\n        toPath.createPathProxy();\n        toPath.dirtyShape();\n    }\n    toPath.animateTo({\n        __morphT: 1\n    }, defaults({\n        during: function (p) {\n            toPath.dirtyShape();\n            oldDuring && oldDuring(p);\n        },\n        done: function () {\n            restoreToPath();\n            oldDone && oldDone();\n        }\n    }, animationOpts));\n    return toPath;\n}\nfunction hilbert(x, y, minX, minY, maxX, maxY) {\n    var bits = 16;\n    x = (maxX === minX) ? 0 : Math.round(32767 * (x - minX) / (maxX - minX));\n    y = (maxY === minY) ? 0 : Math.round(32767 * (y - minY) / (maxY - minY));\n    var d = 0;\n    var tmp;\n    for (var s = (1 << bits) / 2; s > 0; s /= 2) {\n        var rx = 0;\n        var ry = 0;\n        if ((x & s) > 0) {\n            rx = 1;\n        }\n        if ((y & s) > 0) {\n            ry = 1;\n        }\n        d += s * s * ((3 * rx) ^ ry);\n        if (ry === 0) {\n            if (rx === 1) {\n                x = s - 1 - x;\n                y = s - 1 - y;\n            }\n            tmp = x;\n            x = y;\n            y = tmp;\n        }\n    }\n    return d;\n}\nfunction sortPaths(pathList) {\n    var xMin = Infinity;\n    var yMin = Infinity;\n    var xMax = -Infinity;\n    var yMax = -Infinity;\n    var cps = map(pathList, function (path) {\n        var rect = path.getBoundingRect();\n        var m = path.getComputedTransform();\n        var x = rect.x + rect.width / 2 + (m ? m[4] : 0);\n        var y = rect.y + rect.height / 2 + (m ? m[5] : 0);\n        xMin = Math.min(x, xMin);\n        yMin = Math.min(y, yMin);\n        xMax = Math.max(x, xMax);\n        yMax = Math.max(y, yMax);\n        return [x, y];\n    });\n    var items = map(cps, function (cp, idx) {\n        return {\n            cp: cp,\n            z: hilbert(cp[0], cp[1], xMin, yMin, xMax, yMax),\n            path: pathList[idx]\n        };\n    });\n    return items.sort(function (a, b) { return a.z - b.z; }).map(function (item) { return item.path; });\n}\n;\nfunction defaultDividePath(param) {\n    return split(param.path, param.count);\n}\nfunction createEmptyReturn() {\n    return {\n        fromIndividuals: [],\n        toIndividuals: [],\n        count: 0\n    };\n}\nexport function combineMorph(fromList, toPath, animationOpts) {\n    var fromPathList = [];\n    function addFromPath(fromList) {\n        for (var i = 0; i < fromList.length; i++) {\n            var from = fromList[i];\n            if (isCombineMorphing(from)) {\n                addFromPath(from.childrenRef());\n            }\n            else if (from instanceof Path) {\n                fromPathList.push(from);\n            }\n        }\n    }\n    addFromPath(fromList);\n    var separateCount = fromPathList.length;\n    if (!separateCount) {\n        return createEmptyReturn();\n    }\n    var dividePath = animationOpts.dividePath || defaultDividePath;\n    var toSubPathList = dividePath({\n        path: toPath, count: separateCount\n    });\n    if (toSubPathList.length !== separateCount) {\n        console.error('Invalid morphing: unmatched splitted path');\n        return createEmptyReturn();\n    }\n    fromPathList = sortPaths(fromPathList);\n    toSubPathList = sortPaths(toSubPathList);\n    var oldDone = animationOpts.done;\n    var oldDuring = animationOpts.during;\n    var individualDelay = animationOpts.individualDelay;\n    var identityTransform = new Transformable();\n    for (var i = 0; i < separateCount; i++) {\n        var from = fromPathList[i];\n        var to = toSubPathList[i];\n        to.parent = toPath;\n        to.copyTransform(identityTransform);\n        if (!individualDelay) {\n            prepareMorphPath(from, to);\n        }\n    }\n    toPath.__isCombineMorphing = true;\n    toPath.childrenRef = function () {\n        return toSubPathList;\n    };\n    function addToSubPathListToZr(zr) {\n        for (var i = 0; i < toSubPathList.length; i++) {\n            toSubPathList[i].addSelfToZr(zr);\n        }\n    }\n    saveAndModifyMethod(toPath, 'addSelfToZr', {\n        after: function (zr) {\n            addToSubPathListToZr(zr);\n        }\n    });\n    saveAndModifyMethod(toPath, 'removeSelfFromZr', {\n        after: function (zr) {\n            for (var i = 0; i < toSubPathList.length; i++) {\n                toSubPathList[i].removeSelfFromZr(zr);\n            }\n        }\n    });\n    function restoreToPath() {\n        toPath.__isCombineMorphing = false;\n        toPath.__morphT = -1;\n        toPath.childrenRef = null;\n        restoreMethod(toPath, 'addSelfToZr');\n        restoreMethod(toPath, 'removeSelfFromZr');\n    }\n    var toLen = toSubPathList.length;\n    if (individualDelay) {\n        var animating_1 = toLen;\n        var eachDone = function () {\n            animating_1--;\n            if (animating_1 === 0) {\n                restoreToPath();\n                oldDone && oldDone();\n            }\n        };\n        for (var i = 0; i < toLen; i++) {\n            var indivdualAnimationOpts = individualDelay ? defaults({\n                delay: (animationOpts.delay || 0) + individualDelay(i, toLen, fromPathList[i], toSubPathList[i]),\n                done: eachDone\n            }, animationOpts) : animationOpts;\n            morphPath(fromPathList[i], toSubPathList[i], indivdualAnimationOpts);\n        }\n    }\n    else {\n        toPath.__morphT = 0;\n        toPath.animateTo({\n            __morphT: 1\n        }, defaults({\n            during: function (p) {\n                for (var i = 0; i < toLen; i++) {\n                    var child = toSubPathList[i];\n                    child.__morphT = toPath.__morphT;\n                    child.dirtyShape();\n                }\n                oldDuring && oldDuring(p);\n            },\n            done: function () {\n                restoreToPath();\n                for (var i = 0; i < fromList.length; i++) {\n                    restoreMethod(fromList[i], 'updateTransform');\n                }\n                oldDone && oldDone();\n            }\n        }, animationOpts));\n    }\n    if (toPath.__zr) {\n        addToSubPathListToZr(toPath.__zr);\n    }\n    return {\n        fromIndividuals: fromPathList,\n        toIndividuals: toSubPathList,\n        count: toLen\n    };\n}\nexport function separateMorph(fromPath, toPathList, animationOpts) {\n    var toLen = toPathList.length;\n    var fromPathList = [];\n    var dividePath = animationOpts.dividePath || defaultDividePath;\n    function addFromPath(fromList) {\n        for (var i = 0; i < fromList.length; i++) {\n            var from = fromList[i];\n            if (isCombineMorphing(from)) {\n                addFromPath(from.childrenRef());\n            }\n            else if (from instanceof Path) {\n                fromPathList.push(from);\n            }\n        }\n    }\n    if (isCombineMorphing(fromPath)) {\n        addFromPath(fromPath.childrenRef());\n        var fromLen = fromPathList.length;\n        if (fromLen < toLen) {\n            var k = 0;\n            for (var i = fromLen; i < toLen; i++) {\n                fromPathList.push(clonePath(fromPathList[k++ % fromLen]));\n            }\n        }\n        fromPathList.length = toLen;\n    }\n    else {\n        fromPathList = dividePath({ path: fromPath, count: toLen });\n        var fromPathTransform = fromPath.getComputedTransform();\n        for (var i = 0; i < fromPathList.length; i++) {\n            fromPathList[i].setLocalTransform(fromPathTransform);\n        }\n        if (fromPathList.length !== toLen) {\n            console.error('Invalid morphing: unmatched splitted path');\n            return createEmptyReturn();\n        }\n    }\n    fromPathList = sortPaths(fromPathList);\n    toPathList = sortPaths(toPathList);\n    var individualDelay = animationOpts.individualDelay;\n    for (var i = 0; i < toLen; i++) {\n        var indivdualAnimationOpts = individualDelay ? defaults({\n            delay: (animationOpts.delay || 0) + individualDelay(i, toLen, fromPathList[i], toPathList[i])\n        }, animationOpts) : animationOpts;\n        morphPath(fromPathList[i], toPathList[i], indivdualAnimationOpts);\n    }\n    return {\n        fromIndividuals: fromPathList,\n        toIndividuals: toPathList,\n        count: toPathList.length\n    };\n}\nexport { split as defaultDividePath };\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { separateMorph, combineMorph, morphPath, isCombineMorphing } from 'zrender/lib/tool/morphPath.js';\nimport { Path } from '../util/graphic.js';\nimport { defaults, isArray } from 'zrender/lib/core/util.js';\nimport { getAnimationConfig } from './basicTrasition.js';\nimport { clonePath } from 'zrender/lib/tool/path.js';\n\nfunction isMultiple(elements) {\n  return isArray(elements[0]);\n}\n\nfunction prepareMorphBatches(one, many) {\n  var batches = [];\n  var batchCount = one.length;\n\n  for (var i = 0; i < batchCount; i++) {\n    batches.push({\n      one: one[i],\n      many: []\n    });\n  }\n\n  for (var i = 0; i < many.length; i++) {\n    var len = many[i].length;\n    var k = void 0;\n\n    for (k = 0; k < len; k++) {\n      batches[k % batchCount].many.push(many[i][k]);\n    }\n  }\n\n  var off = 0; // If one has more paths than each one of many. average them.\n\n  for (var i = batchCount - 1; i >= 0; i--) {\n    if (!batches[i].many.length) {\n      var moveFrom = batches[off].many;\n\n      if (moveFrom.length <= 1) {\n        // Not enough\n        // Start from the first one.\n        if (off) {\n          off = 0;\n        } else {\n          return batches;\n        }\n      }\n\n      var len = moveFrom.length;\n      var mid = Math.ceil(len / 2);\n      batches[i].many = moveFrom.slice(mid, len);\n      batches[off].many = moveFrom.slice(0, mid);\n      off++;\n    }\n  }\n\n  return batches;\n}\n\nvar pathDividers = {\n  clone: function (params) {\n    var ret = []; // Fitting the alpha\n\n    var approxOpacity = 1 - Math.pow(1 - params.path.style.opacity, 1 / params.count);\n\n    for (var i = 0; i < params.count; i++) {\n      var cloned = clonePath(params.path);\n      cloned.setStyle('opacity', approxOpacity);\n      ret.push(cloned);\n    }\n\n    return ret;\n  },\n  // Use the default divider\n  split: null\n};\nexport function applyMorphAnimation(from, to, divideShape, seriesModel, dataIndex, animateOtherProps) {\n  if (!from.length || !to.length) {\n    return;\n  }\n\n  var updateAnimationCfg = getAnimationConfig('update', seriesModel, dataIndex);\n\n  if (!(updateAnimationCfg && updateAnimationCfg.duration > 0)) {\n    return;\n  }\n\n  var animationDelay = seriesModel.getModel('universalTransition').get('delay');\n  var animationCfg = Object.assign({\n    // Need to setToFinal so the further calculation based on the style can be correct.\n    // Like emphasis color.\n    setToFinal: true\n  }, updateAnimationCfg);\n  var many;\n  var one;\n\n  if (isMultiple(from)) {\n    // manyToOne\n    many = from;\n    one = to;\n  }\n\n  if (isMultiple(to)) {\n    // oneToMany\n    many = to;\n    one = from;\n  }\n\n  function morphOneBatch(batch, fromIsMany, animateIndex, animateCount, forceManyOne) {\n    var batchMany = batch.many;\n    var batchOne = batch.one;\n\n    if (batchMany.length === 1 && !forceManyOne) {\n      // Is one to one\n      var batchFrom = fromIsMany ? batchMany[0] : batchOne;\n      var batchTo = fromIsMany ? batchOne : batchMany[0];\n\n      if (isCombineMorphing(batchFrom)) {\n        // Keep doing combine animation.\n        morphOneBatch({\n          many: [batchFrom],\n          one: batchTo\n        }, true, animateIndex, animateCount, true);\n      } else {\n        var individualAnimationCfg = animationDelay ? defaults({\n          delay: animationDelay(animateIndex, animateCount)\n        }, animationCfg) : animationCfg;\n        morphPath(batchFrom, batchTo, individualAnimationCfg);\n        animateOtherProps(batchFrom, batchTo, batchFrom, batchTo, individualAnimationCfg);\n      }\n    } else {\n      var separateAnimationCfg = defaults({\n        dividePath: pathDividers[divideShape],\n        individualDelay: animationDelay && function (idx, count, fromPath, toPath) {\n          return animationDelay(idx + animateIndex, animateCount);\n        }\n      }, animationCfg);\n\n      var _a = fromIsMany ? combineMorph(batchMany, batchOne, separateAnimationCfg) : separateMorph(batchOne, batchMany, separateAnimationCfg),\n          fromIndividuals = _a.fromIndividuals,\n          toIndividuals = _a.toIndividuals;\n\n      var count = fromIndividuals.length;\n\n      for (var k = 0; k < count; k++) {\n        var individualAnimationCfg = animationDelay ? defaults({\n          delay: animationDelay(k, count)\n        }, animationCfg) : animationCfg;\n        animateOtherProps(fromIndividuals[k], toIndividuals[k], fromIsMany ? batchMany[k] : batch.one, fromIsMany ? batch.one : batchMany[k], individualAnimationCfg);\n      }\n    }\n  }\n\n  var fromIsMany = many ? many === from // Is one to one. If the path number not match. also needs do merge and separate morphing.\n  : from.length > to.length;\n  var morphBatches = many ? prepareMorphBatches(one, many) : prepareMorphBatches(fromIsMany ? to : from, [fromIsMany ? from : to]);\n  var animateCount = 0;\n\n  for (var i = 0; i < morphBatches.length; i++) {\n    animateCount += morphBatches[i].many.length;\n  }\n\n  var animateIndex = 0;\n\n  for (var i = 0; i < morphBatches.length; i++) {\n    morphOneBatch(morphBatches[i], fromIsMany, animateIndex, animateCount);\n    animateIndex += morphBatches[i].many.length;\n  }\n}\nexport function getPathList(elements) {\n  if (!elements) {\n    return [];\n  }\n\n  if (isArray(elements)) {\n    var pathList_1 = [];\n\n    for (var i = 0; i < elements.length; i++) {\n      pathList_1.push(getPathList(elements[i]));\n    }\n\n    return pathList_1;\n  }\n\n  var pathList = [];\n  elements.traverse(function (el) {\n    if (el instanceof Path && !el.disableMorphing && !el.invisible && !el.ignore) {\n      pathList.push(el);\n    }\n  });\n  return pathList;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Universal transitions that can animate between any shapes(series) and any properties in any amounts.\nimport { SERIES_UNIVERSAL_TRANSITION_PROP } from '../model/Series.js';\nimport { createHashMap, each, map, filter, isArray, extend } from 'zrender/lib/core/util.js';\nimport { applyMorphAnimation, getPathList } from './morphTransitionHelper.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { initProps } from '../util/graphic.js';\nimport DataDiffer from '../data/DataDiffer.js';\nimport { makeInner, normalizeToArray } from '../util/model.js';\nimport { warn } from '../util/log.js';\nimport { getAnimationConfig, getOldStyle } from './basicTrasition.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nvar DATA_COUNT_THRESHOLD = 1e4;\n;\nvar getUniversalTransitionGlobalStore = makeInner();\n\nfunction getGroupIdDimension(data) {\n  var dimensions = data.dimensions;\n\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimInfo = data.getDimensionInfo(dimensions[i]);\n\n    if (dimInfo && dimInfo.otherDims.itemGroupId === 0) {\n      return dimensions[i];\n    }\n  }\n}\n\nfunction flattenDataDiffItems(list) {\n  var items = [];\n  each(list, function (seriesInfo) {\n    var data = seriesInfo.data;\n\n    if (data.count() > DATA_COUNT_THRESHOLD) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('Universal transition is disabled on large data > 10k.');\n      }\n\n      return;\n    }\n\n    var indices = data.getIndices();\n    var groupDim = getGroupIdDimension(data);\n\n    for (var dataIndex = 0; dataIndex < indices.length; dataIndex++) {\n      items.push({\n        data: data,\n        dim: seriesInfo.dim || groupDim,\n        divide: seriesInfo.divide,\n        dataIndex: dataIndex\n      });\n    }\n  });\n  return items;\n}\n\nfunction fadeInElement(newEl, newSeries, newIndex) {\n  newEl.traverse(function (el) {\n    if (el instanceof Path) {\n      // TODO use fade in animation for target element.\n      initProps(el, {\n        style: {\n          opacity: 0\n        }\n      }, newSeries, {\n        dataIndex: newIndex,\n        isFrom: true\n      });\n    }\n  });\n}\n\nfunction removeEl(el) {\n  if (el.parent) {\n    // Bake parent transform to element.\n    // So it can still have proper transform to transition after it's removed.\n    var computedTransform = el.getComputedTransform();\n    el.setLocalTransform(computedTransform);\n    el.parent.remove(el);\n  }\n}\n\nfunction stopAnimation(el) {\n  el.stopAnimation();\n\n  if (el.isGroup) {\n    el.traverse(function (child) {\n      child.stopAnimation();\n    });\n  }\n}\n\nfunction animateElementStyles(el, dataIndex, seriesModel) {\n  var animationConfig = getAnimationConfig('update', seriesModel, dataIndex);\n  animationConfig && el.traverse(function (child) {\n    if (child instanceof Displayable) {\n      var oldStyle = getOldStyle(child);\n\n      if (oldStyle) {\n        child.animateFrom({\n          style: oldStyle\n        }, animationConfig);\n      }\n    }\n  });\n}\n\nfunction isAllIdSame(oldDiffItems, newDiffItems) {\n  var len = oldDiffItems.length;\n\n  if (len !== newDiffItems.length) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    var oldItem = oldDiffItems[i];\n    var newItem = newDiffItems[i];\n\n    if (oldItem.data.getId(oldItem.dataIndex) !== newItem.data.getId(newItem.dataIndex)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction transitionBetween(oldList, newList, api) {\n  var oldDiffItems = flattenDataDiffItems(oldList);\n  var newDiffItems = flattenDataDiffItems(newList);\n\n  function updateMorphingPathProps(from, to, rawFrom, rawTo, animationCfg) {\n    if (rawFrom || from) {\n      to.animateFrom({\n        style: rawFrom && rawFrom !== from ? // dividingMethod like clone may override the style(opacity)\n        // So extend it to raw style.\n        extend(extend({}, rawFrom.style), from.style) : from.style\n      }, animationCfg);\n    }\n  }\n\n  function findKeyDim(items) {\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].dim) {\n        return items[i].dim;\n      }\n    }\n  }\n\n  var oldKeyDim = findKeyDim(oldDiffItems);\n  var newKeyDim = findKeyDim(newDiffItems);\n  var hasMorphAnimation = false;\n\n  function createKeyGetter(isOld, onlyGetId) {\n    return function (diffItem) {\n      var data = diffItem.data;\n      var dataIndex = diffItem.dataIndex; // TODO if specified dim\n\n      if (onlyGetId) {\n        return data.getId(dataIndex);\n      } // Use group id as transition key by default.\n      // So we can achieve multiple to multiple animation like drilldown / up naturally.\n      // If group id not exits. Use id instead. If so, only one to one transition will be applied.\n\n\n      var dataGroupId = data.hostModel && data.hostModel.get('dataGroupId'); // If specified key dimension(itemGroupId by default). Use this same dimension from other data.\n      // PENDING: If only use key dimension of newData.\n\n      var keyDim = isOld ? oldKeyDim || newKeyDim : newKeyDim || oldKeyDim;\n      var dimInfo = keyDim && data.getDimensionInfo(keyDim);\n      var dimOrdinalMeta = dimInfo && dimInfo.ordinalMeta;\n\n      if (dimInfo) {\n        // Get from encode.itemGroupId.\n        var key = data.get(dimInfo.name, dataIndex);\n\n        if (dimOrdinalMeta) {\n          return dimOrdinalMeta.categories[key] || key + '';\n        }\n\n        return key + '';\n      } // Get groupId from raw item. { groupId: '' }\n\n\n      var itemVal = data.getRawDataItem(dataIndex);\n\n      if (itemVal && itemVal.groupId) {\n        return itemVal.groupId + '';\n      }\n\n      return dataGroupId || data.getId(dataIndex);\n    };\n  } // Use id if it's very likely to be an one to one animation\n  // It's more robust than groupId\n  // TODO Check if key dimension is specified.\n\n\n  var useId = isAllIdSame(oldDiffItems, newDiffItems);\n  var isElementStillInChart = {};\n\n  if (!useId) {\n    // We may have different diff strategy with basicTransition if we use other dimension as key.\n    // If so, we can't simply check if oldEl is same with newEl. We need a map to check if oldEl is still being used in the new chart.\n    // We can't use the elements that already being morphed. Let it keep it's original basic transition.\n    for (var i = 0; i < newDiffItems.length; i++) {\n      var newItem = newDiffItems[i];\n      var el = newItem.data.getItemGraphicEl(newItem.dataIndex);\n\n      if (el) {\n        isElementStillInChart[el.id] = true;\n      }\n    }\n  }\n\n  function updateOneToOne(newIndex, oldIndex) {\n    var oldItem = oldDiffItems[oldIndex];\n    var newItem = newDiffItems[newIndex];\n    var newSeries = newItem.data.hostModel; // TODO Mark this elements is morphed and don't morph them anymore\n\n    var oldEl = oldItem.data.getItemGraphicEl(oldItem.dataIndex);\n    var newEl = newItem.data.getItemGraphicEl(newItem.dataIndex); // Can't handle same elements.\n\n    if (oldEl === newEl) {\n      newEl && animateElementStyles(newEl, newItem.dataIndex, newSeries);\n      return;\n    }\n\n    if ( // We can't use the elements that already being morphed\n    oldEl && isElementStillInChart[oldEl.id]) {\n      return;\n    }\n\n    if (newEl) {\n      // TODO: If keep animating the group in case\n      // some of the elements don't want to be morphed.\n      // TODO Label?\n      stopAnimation(newEl);\n\n      if (oldEl) {\n        stopAnimation(oldEl); // If old element is doing leaving animation. stop it and remove it immediately.\n\n        removeEl(oldEl);\n        hasMorphAnimation = true;\n        applyMorphAnimation(getPathList(oldEl), getPathList(newEl), newItem.divide, newSeries, newIndex, updateMorphingPathProps);\n      } else {\n        fadeInElement(newEl, newSeries, newIndex);\n      }\n    } // else keep oldEl leaving animation.\n\n  }\n\n  new DataDiffer(oldDiffItems, newDiffItems, createKeyGetter(true, useId), createKeyGetter(false, useId), null, 'multiple').update(updateOneToOne).updateManyToOne(function (newIndex, oldIndices) {\n    var newItem = newDiffItems[newIndex];\n    var newData = newItem.data;\n    var newSeries = newData.hostModel;\n    var newEl = newData.getItemGraphicEl(newItem.dataIndex);\n    var oldElsList = filter(map(oldIndices, function (idx) {\n      return oldDiffItems[idx].data.getItemGraphicEl(oldDiffItems[idx].dataIndex);\n    }), function (oldEl) {\n      return oldEl && oldEl !== newEl && !isElementStillInChart[oldEl.id];\n    });\n\n    if (newEl) {\n      stopAnimation(newEl);\n\n      if (oldElsList.length) {\n        // If old element is doing leaving animation. stop it and remove it immediately.\n        each(oldElsList, function (oldEl) {\n          stopAnimation(oldEl);\n          removeEl(oldEl);\n        });\n        hasMorphAnimation = true;\n        applyMorphAnimation(getPathList(oldElsList), getPathList(newEl), newItem.divide, newSeries, newIndex, updateMorphingPathProps);\n      } else {\n        fadeInElement(newEl, newSeries, newItem.dataIndex);\n      }\n    } // else keep oldEl leaving animation.\n\n  }).updateOneToMany(function (newIndices, oldIndex) {\n    var oldItem = oldDiffItems[oldIndex];\n    var oldEl = oldItem.data.getItemGraphicEl(oldItem.dataIndex); // We can't use the elements that already being morphed\n\n    if (oldEl && isElementStillInChart[oldEl.id]) {\n      return;\n    }\n\n    var newElsList = filter(map(newIndices, function (idx) {\n      return newDiffItems[idx].data.getItemGraphicEl(newDiffItems[idx].dataIndex);\n    }), function (el) {\n      return el && el !== oldEl;\n    });\n    var newSeris = newDiffItems[newIndices[0]].data.hostModel;\n\n    if (newElsList.length) {\n      each(newElsList, function (newEl) {\n        return stopAnimation(newEl);\n      });\n\n      if (oldEl) {\n        stopAnimation(oldEl); // If old element is doing leaving animation. stop it and remove it immediately.\n\n        removeEl(oldEl);\n        hasMorphAnimation = true;\n        applyMorphAnimation(getPathList(oldEl), getPathList(newElsList), oldItem.divide, // Use divide on old.\n        newSeris, newIndices[0], updateMorphingPathProps);\n      } else {\n        each(newElsList, function (newEl) {\n          return fadeInElement(newEl, newSeris, newIndices[0]);\n        });\n      }\n    } // else keep oldEl leaving animation.\n\n  }).updateManyToMany(function (newIndices, oldIndices) {\n    // If two data are same and both have groupId.\n    // Normally they should be diff by id.\n    new DataDiffer(oldIndices, newIndices, function (rawIdx) {\n      return oldDiffItems[rawIdx].data.getId(oldDiffItems[rawIdx].dataIndex);\n    }, function (rawIdx) {\n      return newDiffItems[rawIdx].data.getId(newDiffItems[rawIdx].dataIndex);\n    }).update(function (newIndex, oldIndex) {\n      // Use the original index\n      updateOneToOne(newIndices[newIndex], oldIndices[oldIndex]);\n    }).execute();\n  }).execute();\n\n  if (hasMorphAnimation) {\n    each(newList, function (_a) {\n      var data = _a.data;\n      var seriesModel = data.hostModel;\n      var view = seriesModel && api.getViewOfSeriesModel(seriesModel);\n      var animationCfg = getAnimationConfig('update', seriesModel, 0); // use 0 index.\n\n      if (view && seriesModel.isAnimationEnabled() && animationCfg && animationCfg.duration > 0) {\n        view.group.traverse(function (el) {\n          if (el instanceof Path && !el.animators.length) {\n            // We can't accept there still exists element that has no animation\n            // if universalTransition is enabled\n            el.animateFrom({\n              style: {\n                opacity: 0\n              }\n            }, animationCfg);\n          }\n        });\n      }\n    });\n  }\n}\n\nfunction getSeriesTransitionKey(series) {\n  var seriesKey = series.getModel('universalTransition').get('seriesKey');\n\n  if (!seriesKey) {\n    // Use series id by default.\n    return series.id;\n  }\n\n  return seriesKey;\n}\n\nfunction convertArraySeriesKeyToString(seriesKey) {\n  if (isArray(seriesKey)) {\n    // Order independent.\n    return seriesKey.sort().join(',');\n  }\n\n  return seriesKey;\n}\n\nfunction getDivideShapeFromData(data) {\n  if (data.hostModel) {\n    return data.hostModel.getModel('universalTransition').get('divideShape');\n  }\n}\n\nfunction findTransitionSeriesBatches(globalStore, params) {\n  var updateBatches = createHashMap();\n  var oldDataMap = createHashMap(); // Map that only store key in array seriesKey.\n  // Which is used to query the old data when transition from one to multiple series.\n\n  var oldDataMapForSplit = createHashMap();\n  each(globalStore.oldSeries, function (series, idx) {\n    var oldData = globalStore.oldData[idx];\n    var transitionKey = getSeriesTransitionKey(series);\n    var transitionKeyStr = convertArraySeriesKeyToString(transitionKey);\n    oldDataMap.set(transitionKeyStr, oldData);\n\n    if (isArray(transitionKey)) {\n      // Same key can't in different array seriesKey.\n      each(transitionKey, function (key) {\n        oldDataMapForSplit.set(key, {\n          data: oldData,\n          key: transitionKeyStr\n        });\n      });\n    }\n  });\n\n  function checkTransitionSeriesKeyDuplicated(transitionKeyStr) {\n    if (updateBatches.get(transitionKeyStr)) {\n      warn(\"Duplicated seriesKey in universalTransition \" + transitionKeyStr);\n    }\n  }\n\n  each(params.updatedSeries, function (series) {\n    if (series.isUniversalTransitionEnabled() && series.isAnimationEnabled()) {\n      var newData = series.getData();\n      var transitionKey = getSeriesTransitionKey(series);\n      var transitionKeyStr = convertArraySeriesKeyToString(transitionKey); // Only transition between series with same id.\n\n      var oldData = oldDataMap.get(transitionKeyStr); // string transition key is the best match.\n\n      if (oldData) {\n        if (process.env.NODE_ENV !== 'production') {\n          checkTransitionSeriesKeyDuplicated(transitionKeyStr);\n        } // TODO check if data is same?\n\n\n        updateBatches.set(transitionKeyStr, {\n          oldSeries: [{\n            divide: getDivideShapeFromData(oldData),\n            data: oldData\n          }],\n          newSeries: [{\n            divide: getDivideShapeFromData(newData),\n            data: newData\n          }]\n        });\n      } else {\n        // Transition from multiple series.\n        if (isArray(transitionKey)) {\n          if (process.env.NODE_ENV !== 'production') {\n            checkTransitionSeriesKeyDuplicated(transitionKeyStr);\n          }\n\n          var oldSeries_1 = [];\n          each(transitionKey, function (key) {\n            var oldData = oldDataMap.get(key);\n\n            if (oldData) {\n              oldSeries_1.push({\n                divide: getDivideShapeFromData(oldData),\n                data: oldData\n              });\n            }\n          });\n\n          if (oldSeries_1.length) {\n            updateBatches.set(transitionKeyStr, {\n              oldSeries: oldSeries_1,\n              newSeries: [{\n                data: newData,\n                divide: getDivideShapeFromData(newData)\n              }]\n            });\n          }\n        } else {\n          // Try transition to multiple series.\n          var oldData_1 = oldDataMapForSplit.get(transitionKey);\n\n          if (oldData_1) {\n            var batch = updateBatches.get(oldData_1.key);\n\n            if (!batch) {\n              batch = {\n                oldSeries: [{\n                  data: oldData_1.data,\n                  divide: getDivideShapeFromData(oldData_1.data)\n                }],\n                newSeries: []\n              };\n              updateBatches.set(oldData_1.key, batch);\n            }\n\n            batch.newSeries.push({\n              data: newData,\n              divide: getDivideShapeFromData(newData)\n            });\n          }\n        }\n      }\n    }\n  });\n  return updateBatches;\n}\n\nfunction querySeries(series, finder) {\n  for (var i = 0; i < series.length; i++) {\n    var found = finder.seriesIndex != null && finder.seriesIndex === series[i].seriesIndex || finder.seriesId != null && finder.seriesId === series[i].id;\n\n    if (found) {\n      return i;\n    }\n  }\n}\n\nfunction transitionSeriesFromOpt(transitionOpt, globalStore, params, api) {\n  var from = [];\n  var to = [];\n  each(normalizeToArray(transitionOpt.from), function (finder) {\n    var idx = querySeries(globalStore.oldSeries, finder);\n\n    if (idx >= 0) {\n      from.push({\n        data: globalStore.oldData[idx],\n        // TODO can specify divideShape in transition.\n        divide: getDivideShapeFromData(globalStore.oldData[idx]),\n        dim: finder.dimension\n      });\n    }\n  });\n  each(normalizeToArray(transitionOpt.to), function (finder) {\n    var idx = querySeries(params.updatedSeries, finder);\n\n    if (idx >= 0) {\n      var data = params.updatedSeries[idx].getData();\n      to.push({\n        data: data,\n        divide: getDivideShapeFromData(data),\n        dim: finder.dimension\n      });\n    }\n  });\n\n  if (from.length > 0 && to.length > 0) {\n    transitionBetween(from, to, api);\n  }\n}\n\nexport function installUniversalTransition(registers) {\n  registers.registerUpdateLifecycle('series:beforeupdate', function (ecMOdel, api, params) {\n    each(normalizeToArray(params.seriesTransition), function (transOpt) {\n      each(normalizeToArray(transOpt.to), function (finder) {\n        var series = params.updatedSeries;\n\n        for (var i = 0; i < series.length; i++) {\n          if (finder.seriesIndex != null && finder.seriesIndex === series[i].seriesIndex || finder.seriesId != null && finder.seriesId === series[i].id) {\n            series[i][SERIES_UNIVERSAL_TRANSITION_PROP] = true;\n          }\n        }\n      });\n    });\n  });\n  registers.registerUpdateLifecycle('series:transition', function (ecModel, api, params) {\n    // TODO api provide an namespace that can save stuff per instance\n    var globalStore = getUniversalTransitionGlobalStore(api); // TODO multiple to multiple series.\n\n    if (globalStore.oldSeries && params.updatedSeries && params.optionChanged) {\n      // Use give transition config if its' give;\n      var transitionOpt = params.seriesTransition;\n\n      if (transitionOpt) {\n        each(normalizeToArray(transitionOpt), function (opt) {\n          transitionSeriesFromOpt(opt, globalStore, params, api);\n        });\n      } else {\n        // Else guess from series based on transition series key.\n        var updateBatches_1 = findTransitionSeriesBatches(globalStore, params);\n        each(updateBatches_1.keys(), function (key) {\n          var batch = updateBatches_1.get(key);\n          transitionBetween(batch.oldSeries, batch.newSeries, api);\n        });\n      } // Reset\n\n\n      each(params.updatedSeries, function (series) {\n        // Reset;\n        if (series[SERIES_UNIVERSAL_TRANSITION_PROP]) {\n          series[SERIES_UNIVERSAL_TRANSITION_PROP] = false;\n        }\n      });\n    } // Save all series of current update. Not only the updated one.\n\n\n    var allSeries = ecModel.getSeries();\n    var savedSeries = globalStore.oldSeries = [];\n    var savedData = globalStore.oldData = [];\n\n    for (var i = 0; i < allSeries.length; i++) {\n      var data = allSeries[i].getData(); // Only save the data that can have transition.\n      // Avoid large data costing too much extra memory\n\n      if (data.count() < DATA_COUNT_THRESHOLD) {\n        savedSeries.push(allSeries[i]);\n        savedData.push(data);\n      }\n    }\n  });\n}","import { render } from \"./myEcharts.vue?vue&type=template&id=52b0bf3e&scoped=true\"\nimport script from \"./myEcharts.vue?vue&type=script&lang=js\"\nexport * from \"./myEcharts.vue?vue&type=script&lang=js\"\n\nimport \"./myEcharts.vue?vue&type=style&index=0&id=52b0bf3e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\dujun\\\\Desktop\\\\vue\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-52b0bf3e\"]])\n\nexport default __exports__","import { render } from \"./home.vue?vue&type=template&id=4216182a&scoped=true\"\nimport script from \"./home.vue?vue&type=script&lang=js\"\nexport * from \"./home.vue?vue&type=script&lang=js\"\n\nimport \"./home.vue?vue&type=style&index=0&id=4216182a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\dujun\\\\Desktop\\\\vue\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4216182a\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./myCard.vue?vue&type=style&index=0&id=1661e840&scoped=true&lang=css\"","var UA = require('../internals/engine-user-agent');\n\nmodule.exports = /MSIE|Trident/.test(UA);\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./home.vue?vue&type=style&index=0&id=4216182a&scoped=true&lang=css\""],"sourceRoot":""}