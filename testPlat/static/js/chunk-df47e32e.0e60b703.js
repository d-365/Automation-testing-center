(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df47e32e"],{4774:function(e,t,n){"use strict";n("94f9")},"94f9":function(e,t,n){},c740:function(e,t,n){"use strict";var a=n("23e7"),c=n("b727").findIndex,r=n("44d2"),o="findIndex",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),a({target:"Array",proto:!0,forced:l},{findIndex:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),r(o)},dcd4:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),c=function(e){return Object(a["pushScopeId"])("data-v-6fc2f376"),e=e(),Object(a["popScopeId"])(),e},r={class:"newPlan"},o={class:"planTop"},l=Object(a["createTextVNode"])("返回"),i=Object(a["createTextVNode"])(" 　"),d=Object(a["createTextVNode"])("保存"),s={class:"planBody"},u={class:"planLeft"},p={class:"planRight"},b=c((function(){return Object(a["createElementVNode"])("span",null,"确定要不保存直接返回吗?",-1)}));function f(e,t,n,c,f,O){var j=Object(a["resolveComponent"])("el-button"),h=Object(a["resolveComponent"])("el-col"),m=Object(a["resolveComponent"])("el-row"),C=Object(a["resolveComponent"])("planInfo"),v=Object(a["resolveComponent"])("category"),k=Object(a["resolveComponent"])("el-tab-pane"),V=Object(a["resolveComponent"])("MyTree"),N=Object(a["resolveComponent"])("el-tabs"),w=Object(a["resolveComponent"])("myAlter");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",r,[Object(a["createElementVNode"])("div",o,[Object(a["createVNode"])(m,{gutter:2},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(h,{span:1},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(j,{type:"primary",onClick:t[0]||(t[0]=function(e){return O.viewBack()})},{default:Object(a["withCtx"])((function(){return[l]})),_:1})]})),_:1}),Object(a["createVNode"])(h,{span:2},{default:Object(a["withCtx"])((function(){return[i,Object(a["createVNode"])(j,{onClick:O.savePlan,type:"primary"},{default:Object(a["withCtx"])((function(){return[d]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]),Object(a["createElementVNode"])("div",s,[Object(a["createElementVNode"])("div",u,[Object(a["createVNode"])(C,{planInfo:f.planDetail,ref:"childRules"},null,8,["planInfo"])]),Object(a["createElementVNode"])("div",p,[Object(a["createVNode"])(N,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(k,{label:"Api用例"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(v,{onFinalCheckApi:O.checkedApi,selectedID:f.planDetail.planParam.apiIds},null,8,["onFinalCheckApi","selectedID"])]})),_:1}),Object(a["createVNode"])(k,{label:"场景用例"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(V,{treeList:f.treeList,onFinalChecked:O.checkedCaseId,"selected-id":f.planDetail.planParam.caseIds},null,8,["treeList","onFinalChecked","selected-id"])]})),_:1})]})),_:1})])]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(w,{backAlter:f.backAlter},{title:Object(a["withCtx"])((function(){return[b]})),_:1},8,["backAlter"])])])}var O=n("5530"),j=(n("d3b7"),n("159b"),n("a1e9")),h=Object(a["createElementVNode"])("span",null,"确定要不保存直接返回吗?",-1),m={class:"dialog-footer"},C=Object(a["createTextVNode"])("取消"),v=Object(a["createTextVNode"])("确认");function k(e,t,n,c,r,o){var l=Object(a["resolveComponent"])("el-button"),i=Object(a["resolveComponent"])("el-dialog");return Object(a["openBlock"])(),Object(a["createBlock"])(i,{modelValue:n.backAlter,"onUpdate:modelValue":t[2]||(t[2]=function(e){return n.backAlter=e}),title:"温馨提示",width:"30%",center:""},{footer:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("span",m,[Object(a["createVNode"])(l,{onClick:t[0]||(t[0]=function(e){return n.backAlter=!1})},{default:Object(a["withCtx"])((function(){return[C]})),_:1}),Object(a["createVNode"])(l,{type:"primary",onClick:t[1]||(t[1]=function(t){return n.backAlter=!1,e.$router.go(-1)})},{default:Object(a["withCtx"])((function(){return[v]})),_:1})])]})),default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"title",{},(function(){return[h]}))]})),_:3},8,["modelValue"])}var V={name:"myAlter",props:{backAlter:{default:!1}}},N=n("d959"),w=n.n(N);const g=w()(V,[["render",k]]);var x=g,y=n("7135"),I=n("934a"),A=n("c7e8"),_=n("cd71"),D=n("b775"),E={name:"newPlan",components:{caseCategory:_["a"],Category:A["a"],myAlter:x,planInfo:y["a"],MyTree:I["a"]},setup:function(){var e=Object(j["p"])({planDetail_isChange:!1});return Object(O["a"])({},Object(j["z"])(e))},data:function(){return{treeList:[],backAlter:!1,planDetail:{envId:null,name:"",tryCount:1,isClock:0,clock:"",isSendEmail:0,sendEmail:"",planType:0,planParam:{apiIds:[],caseIds:[]}}}},watch:{planDetail:{handler:function(e,t){this.planDetail_isChange=!0},deep:!0},$route:"getParams"},created:function(){this.load(),this.getParams()},methods:{load:function(){var e=this;D["a"].get("/api/caseCategory/list").then((function(t){e.treeList=t.data}))},viewBack:function(){!0===this.planDetail_isChange?(this.backAlter=!0,this.planDetail_isChange=!1):this.$router.push("/case/plan")},savePlan:function(){var e=this,t=this.$refs["childRules"].validateForm();t?D["a"].post("/api/plan/save",this.planDetail).then((function(t){e.$root.toast(t),e.$router.go(-1)})):this.$message.error("保全信息不完整，请继续填写完整")},checkedApi:function(e){var t=[];e.forEach((function(e,n){t.push(e.id)})),this.planDetail.planParam.apiIds=t},checkedCaseId:function(e){var t=[];e.forEach((function(e,n){t.push(e.id)})),this.planDetail.planParam.caseIds=t},getParams:function(){var e=this.$route.query.plan;void 0!==e&&(this.planDetail=JSON.parse(e))}}};n("4774");const P=w()(E,[["render",f],["__scopeId","data-v-6fc2f376"]]);t["default"]=P}}]);
//# sourceMappingURL=chunk-df47e32e.0e60b703.js.map