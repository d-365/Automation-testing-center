{"version":3,"sources":["webpack:///./src/views/WebAuto/webPlan.vue","webpack:///./src/views/WebAuto/webPlan.vue?a48f","webpack:///./node_modules/@element-plus/icons/es/Sort.js","webpack:///./src/components/common/alter/myDialog.vue","webpack:///./src/components/common/alter/myDialog.vue?67b9","webpack:///./src/views/WebAuto/webPlan.vue?e08e","webpack:///./src/views/componets/common/setup_teardown.vue","webpack:///./src/views/componets/common/setup_teardown.vue?de2e"],"names":["style_table","commonUtils","tabRowStyle","router","route","planDetail","name","tryCount","isClock","clock","isSendEmail","sendEmail","browserType","planType","planParam","caseIds","setUpId","tearDownId","deviceOption","value","updateWebPlan","updateSetup","request","post","then","res","toast","go","treeList","defaultProps","children","label","treeListInit","payload","data","checkedCaseId","checked","planCaseList","forEach","item","i","push","id","dropId","planId","getParams","routerParams","query","plan","undefined","JSON","parse","clockExecCount","envId","remark","status","caseId","addCaseDialog","sonShowAlter","addCase","planCaseListInit","initSort","el","document","querySelector","animation","onEnd","oldIndex","newIndex","oldRaw","newCaseId","setupList","actionId","actionKey","actionValue","type","tearDownList","setUp","tearDown","delSetup","scope","messageBox","row","webApi","console","log","splice","$index","sonSetUp","sonTearDown","setupInit","setup","length","__exports__","script","_hoisted_1","xmlns","viewBox","_hoisted_2","fill","d","render","_ctx","_cache","$props","$setup","$data","$options","__file","class","show_alter","title","width","left","footer","props","default","watch","newVar","oldVar","this","$emit","style","row-key","row-style","tab_row_style","header-cell-style","tabStyle","roundData","prop","size","placeholder","popper-options","show-all-levels","clearable","options","actionOption","mySetupProps","node","actionName","showSql","operateData","dbOptions","key","dbName","addFile","ref","rows","params","active-color","inactive-color","active-value","inactive-value","setup_teardown","components","Sort","handler","newVal","oldVal","deep","includes","state","created","envDetail","actionOptionInit","dbOptionInit","mounted","methods","background","color","tableBody","evt","currRow","Pre_Post_Fix","localStorage","getItem","get"],"mappings":"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","file":"static/js/chunk-64f1a20c.a594adc6.js","sourcesContent":["<template>\r\n    <div id=\"new-plan\">\r\n        <div id=\"plan-left\">\r\n            <div class=\"case-info\">\r\n                <planInfo :planInfo=\"planDetail\">\r\n                    <template v-slot:form-item>\r\n                        <el-form-item label=\"浏览器类型\">\r\n                            <el-select placeholder=\"请选择执行机\" v-model=\"planDetail.browserType\">\r\n                                <el-option\r\n                                        v-for=\"item in deviceOption\"\r\n                                        :key=\"item.name\"\r\n                                        :label=\"item.name\"\r\n                                        :value=\"item.value\"\r\n                                />\r\n                            </el-select>\r\n                        </el-form-item>\r\n                    </template>\r\n                </planInfo>\r\n            </div>\r\n            <div class=\"case-info\">\r\n                <el-button  type=\"primary\" @click=\"updateWebPlan\">保存</el-button>\r\n            </div>\r\n        </div>\r\n        <div id=\"plan-right\">\r\n            <el-tabs>\r\n                <el-tab-pane label=\"Web用例\">\r\n                    <div id=\"addCase\"><el-button type=\"primary\" @click=\"addCaseDialog = true\">添加用例</el-button></div>\r\n                    <div id=\"case-list\">\r\n                        <myDialog :show_alter=\"addCaseDialog\" @sonShowAlter=\"sonShowAlter\">\r\n                            <template v-slot:myBody>\r\n                                <MyTree  :treeList=\"treeList\" :defaultProps=\"defaultProps\" @finalChecked=\"checkedCaseId\" :selected-id=\"planDetail.planParam.caseIds\"/>\r\n                            </template>\r\n                            <template v-slot:submit>\r\n                                <el-button type=\"primary\" @click=\"addCase\">确认</el-button>\r\n                            </template>\r\n                        </myDialog>\r\n                        <el-table id=\"tableRowDrop\" :data=\"planCaseList\" :cell-style=\"style_table\"  :header-cell-style=\"style_table\" row-key=\"id\">\r\n                            <el-table-column label=\"序号\">\r\n                                <template #default=\"scope\">\r\n                                    {{scope.row.dropId}}\r\n                                </template>\r\n                            </el-table-column>\r\n                            <el-table-column label=\"用例Id\" prop=\"id\"></el-table-column>\r\n                            <el-table-column label=\"用例名称\" prop=\"name\"></el-table-column>\r\n                            <el-table-column label=\"用例描述\" prop=\"remark\"></el-table-column>\r\n                        </el-table>\r\n                    </div>\r\n                </el-tab-pane>\r\n                <el-tab-pane label=\"前置操作\">\r\n                    <div>\r\n                        <setup_teardown :roundData=\"setupList\" @SonRoundData=\"sonSetUp\">\r\n                            <template v-slot:func=\"scope\">\r\n                                <el-button @click=\"setupList.push({})\">+</el-button>\r\n                                <el-button v-if=\"scope.data.$index!==0\" @click=\"delSetup(scope.data,0)\">-</el-button>\r\n                            </template>\r\n                        </setup_teardown>\r\n                    </div>\r\n                </el-tab-pane>\r\n                <el-tab-pane label=\"后置操作\">\r\n                    <div><setup_teardown :roundData=\"tearDownList\" @SonRoundData=\"sonTearDown\">\r\n                        <template v-slot:func=\"scope\">\r\n                            <el-button @click=\"tearDownList.push({})\">+</el-button>\r\n                            <el-button v-if=\"scope.data.$index!==0\" @click=\"delSetup(scope.data,1)\">-</el-button>\r\n                        </template>\r\n                    </setup_teardown></div>\r\n                </el-tab-pane>\r\n            </el-tabs>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import myDialog from \"../../components/common/alter/myDialog\";\r\n    import MyTree from \"../../components/common/MyTree\";\r\n    import planInfo from \"components/plan/planInfo\";\r\n    import {reactive,ref,onBeforeMount,onMounted} from  \"vue\"\r\n    import request from \"../../utils/request\";\r\n    import commonUtils from \"../../utils/commonUtils\";\r\n    import { useRouter,useRoute } from 'vue-router'\r\n    import Sortable from \"sortablejs\";\r\n    import setup_teardown from \"../componets/common/setup_teardown\";\r\n    import webApi from \"./webApi\";\r\n\r\n    const style_table = commonUtils.tabRowStyle(\"left\")\r\n\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n\r\n    let planDetail = reactive({\r\n        name:\"\",\r\n        tryCount:1,\r\n        isClock:0,\r\n        clock:\"0 0 0 1/1 * ?\",\r\n        isSendEmail:0,\r\n        sendEmail:\"\",\r\n        browserType:\"\",\r\n        planType:1,\r\n        planParam:{\r\n            caseIds:[]\r\n        },\r\n        setUpId:[],\r\n        tearDownId:[]\r\n    })\r\n    const deviceOption = [{\r\n        name:\"Chrome\",\r\n        value:\"Chrome\"\r\n    },{\r\n        name:\"Firefox\",\r\n        value:\"Firefox\"\r\n    }]\r\n\r\n    // 更新保存测试计划\r\n    const updateWebPlan = ()=>{\r\n        updateSetup()\r\n        request.post(\"/api/plan/save\",planDetail).then(res=>{\r\n            commonUtils.toast(res)\r\n            router.go(-1)\r\n        })\r\n\r\n    }\r\n    // 用例列表\r\n    const treeList = ref([])\r\n    const defaultProps ={\r\n        children: 'children',\r\n        label: 'name',\r\n    }\r\n    const treeListInit = ()=>{\r\n        const payload = {\r\n            \"caseType\":1\r\n        }\r\n        request.post(\"/api/webCase/caseList\",payload).then(res=>{\r\n            treeList.value = res.data\r\n        })\r\n    }\r\n\r\n    // 获取树形结果中的用例ID\r\n    const checkedCaseId = (data)=>{\r\n        let checked = []\r\n        planCaseList.value = []\r\n        data.forEach((item,i)=>{\r\n            checked.push(item.id)\r\n            item.dropId = i + 1\r\n            planCaseList.value.push(item)\r\n        })\r\n        planDetail.planParam.caseIds = checked\r\n    }\r\n\r\n    // planID\r\n    const planId = ref(null)\r\n\r\n    // 取到路由带过来的参数\r\n    const getParams =()=>{\r\n        const routerParams = route.query.plan\r\n        if(routerParams!==undefined){\r\n\r\n            const  data = JSON.parse(routerParams)\r\n            planId.value = data.id\r\n            planDetail.name =  data.name\r\n            planDetail.browserType =  data.browserType\r\n            planDetail.clock =  data.clock\r\n            planDetail.clockExecCount =  data.clockExecCount\r\n            planDetail.envId =  data.envId\r\n            planDetail.id =  data.id\r\n            planDetail.isClock =  data.isClock\r\n            planDetail.isSendEmail =  data.isSendEmail\r\n            planDetail.planParam =  data.planParam\r\n            planDetail.planType =  data.planType\r\n            planDetail.remark =  data.remark\r\n            planDetail.sendEmail =  data.sendEmail\r\n            planDetail.status =  data.status\r\n            planDetail.tryCount =  data.tryCount\r\n            caseId = data.planParam.caseIds\r\n        }\r\n    }\r\n\r\n    // 添加用例弹窗\r\n    let addCaseDialog = ref(false);\r\n    // 接收子组件弹窗中的值\r\n    const sonShowAlter = (data)=>{\r\n        addCaseDialog.value = data\r\n    }\r\n\r\n    let planCaseList = ref([])\r\n    // 计划中添加用例\r\n    const addCase = ()=>{\r\n        addCaseDialog.value = false\r\n    }\r\n    let caseId = [];\r\n    const planCaseListInit = ()=>{\r\n      request.post(\"/api/plan/checked/case\",caseId).then(res=>{\r\n          res.data.forEach((item,i)=>{\r\n              item.dropId = i+1\r\n              planCaseList.value.push(item)\r\n          })\r\n\r\n      })\r\n    }\r\n\r\n    // 行拖拽\r\n    const initSort = ()=> {\r\n        const el = document.querySelector('#tableRowDrop tbody')\r\n        const sortable = new Sortable(el,{\r\n            animation: 200, //动画参数\r\n            onEnd: function({oldIndex, newIndex}){\r\n                const oldRaw = planCaseList.value[oldIndex]\r\n                planCaseList.value[oldIndex] = planCaseList.value[newIndex]\r\n                planCaseList.value[newIndex] = oldRaw\r\n                planCaseList.value[oldIndex].dropId = oldIndex +1\r\n                planCaseList.value[newIndex].dropId = newIndex +1\r\n                const  newCaseId = []\r\n                planCaseList.value.forEach((item,i)=>{\r\n                    newCaseId.push(item.id)\r\n                })\r\n                planDetail.planParam.caseIds = newCaseId\r\n            }\r\n        })\r\n    }\r\n\r\n    // ----------------------------------前置后置操作-----------------------------------------\r\n    const setupList = ref([{\r\n        id:null,\r\n        name:\"\",\r\n        actionId:\"\",\r\n        actionKey:\"\",\r\n        actionValue:\"\",\r\n        status:0,\r\n        planId:planId.value,\r\n        type:0\r\n    }])\r\n    const tearDownList = ref([{\r\n        id:null,\r\n        name:\"\",\r\n        status:0,\r\n        actionId:\"\",\r\n        actionKey:\"\",\r\n        actionValue:\"\",\r\n        planId:planId.value,\r\n    }])\r\n\r\n    // 保存前置后置操作\r\n    const updateSetup = ()=>{\r\n        const payload = {\r\n            setUp:setupList.value,\r\n            tearDown:tearDownList.value,\r\n        }\r\n        request.post(\"/api/plan/round/update\",payload).then(res=>{\r\n            commonUtils.toast(res)\r\n        })\r\n    }\r\n\r\n    // 删除前置后置操作\r\n    const delSetup = (scope,type)=>{\r\n        commonUtils.messageBox(res=>{\r\n            const id = scope.row.id\r\n            if ( id != null){\r\n                webApi.delSetup(id,res=>{\r\n                    console.log(res)\r\n                })\r\n            }\r\n            if (type ===0){\r\n                setupList.value.splice(scope.$index,1)\r\n            }else if (type === 1){\r\n                tearDownList.value.splice(scope.$index,1)\r\n            }\r\n        })\r\n    }\r\n\r\n    // 获取组件中前置动作\r\n    const sonSetUp = (data)=>{\r\n        data.forEach((item)=>{\r\n            if (item.planId==null){\r\n                item.planId = planId.value\r\n            }\r\n        })\r\n        setupList.value =data\r\n    }\r\n    const sonTearDown = (data)=>{\r\n        data.forEach((item)=>{\r\n            if (item.planId==null){\r\n                item.planId = planId.value\r\n            }\r\n        })\r\n        tearDownList.value = data\r\n    }\r\n\r\n    // 初始化前置后置操作\r\n    const setupInit = ()=>{\r\n        if (planId.value!=null){\r\n            webApi.setupInit(planId.value,res=>{\r\n                if (res.data.setup.length !==0){\r\n                    setupList.value = res.data.setup\r\n                }\r\n                if (res.data.tearDown.length !==0){\r\n                    tearDownList.value = res.data.tearDown\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    //-------------------------------声明周期函数\r\n    onBeforeMount(()=>{\r\n        getParams()\r\n        treeListInit()\r\n        planCaseListInit()\r\n        setupInit()\r\n    })\r\n    onMounted(()=>{\r\n        initSort()\r\n    })\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    #new-plan{\r\n        height: 100%;\r\n        width: 100%;\r\n    }\r\n    .case-info{\r\n        padding-top: 50px;\r\n        padding-left: 50px;\r\n    }\r\n    #plan-left{\r\n        width: 40%;\r\n        height: 100%;\r\n        position: absolute;\r\n        left: 0;\r\n    }\r\n    #plan-right{\r\n        padding-top: 50px;\r\n        width: 60%;\r\n        height: 100%;\r\n        position: absolute;\r\n        left: 40%;\r\n    }\r\n    .sortable-ghost {\r\n        opacity: 0.4;\r\n        background-color: #F4E2C9;\r\n    }\r\n</style>","import script from \"./webPlan.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./webPlan.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./webPlan.vue?vue&type=style&index=0&id=5a585631&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\dujun\\\\Desktop\\\\vue\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5a585631\"]])\n\nexport default __exports__","import { defineComponent, openBlock, createBlock, createVNode } from 'vue';\n\nvar script = defineComponent({\n  name: \"Sort\"\n});\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 1024 1024\"\n};\nconst _hoisted_2 = /* @__PURE__ */ createVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M384 96a32 32 0 0 1 64 0v786.752a32 32 0 0 1-54.592 22.656L95.936 608a32 32 0 0 1 0-45.312h.128a32 32 0 0 1 45.184 0L384 805.632V96zm192 45.248a32 32 0 0 1 54.592-22.592L928.064 416a32 32 0 0 1 0 45.312h-.128a32 32 0 0 1-45.184 0L640 218.496V928a32 32 0 1 1-64 0V141.248z\"\n}, null, -1);\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"svg\", _hoisted_1, [\n    _hoisted_2\n  ]);\n}\n\nscript.render = render;\nscript.__file = \"packages/components/Sort.vue\";\n\nexport default script;\n","<template>\r\n    <div>\r\n        <el-dialog v-model=\"show_alter\" :title=\"title\" width=\"30%\" left>\r\n            <slot name=\"myBody\">默认内容</slot>\r\n                <template #footer>\r\n                  <span class=\"dialog-footer\">\r\n                    <el-button @click=\"show_alter = false\">关闭</el-button>\r\n                    <slot name=\"submit\">\r\n                        <el-button type=\"primary\" @click=\"show_alter = false\">确认</el-button>\r\n                    </slot>\r\n                  </span>\r\n            </template>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        props:{\r\n            title:{\r\n                default:\"提示\"\r\n            },\r\n            show_alter:{\r\n                default: false\r\n            },\r\n        },\r\n        watch:{\r\n            show_alter(newVar,oldVar){\r\n               this.$emit(\"sonShowAlter\",newVar)\r\n            }\r\n        }\r\n    }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./myDialog.vue?vue&type=template&id=cbc7eef6\"\nimport script from \"./myDialog.vue?vue&type=script&lang=js\"\nexport * from \"./myDialog.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\dujun\\\\Desktop\\\\vue\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./webPlan.vue?vue&type=style&index=0&id=5a585631&scoped=true&lang=css\"","<template>\r\n    <!--接口前置后置操作-->\r\n    <div >\r\n        <el-table\r\n                row-key=\"id\"\r\n                id=\"preFix\"\r\n                :row-style=\"tab_row_style()\"\r\n                :header-cell-style=\"tabStyle()\"\r\n                :data=\"roundData\"\r\n        >\r\n            <el-table-column width=\"20px\" prop=\"fill\">\r\n                <template #default=\"scope\">\r\n                    <el-icon :size=\"10\" ><Sort/></el-icon>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"name\" label=\"描述\">\r\n                <template #default=\"scope\">\r\n                    <el-input  v-model=\"scope.row.name\" placeholder=\"描述\"></el-input>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"actionID\" label=\"操作\">\r\n                <template #default=\"scope\">\r\n                    <el-cascader\r\n                            :popper-options=\"{ boundariesElement: 'viewport', removeOnDestroy: true }\"\r\n                            :show-all-levels=\"false\"\r\n                             clearable\r\n                             v-model=\"scope.row.actionId\"\r\n                            :options=\"actionOption\"\r\n                            :props=\"mySetupProps\">\r\n                        <template #default=\"{ node, data }\">\r\n                            {{ actionName = data.actionKey}}\r\n                            <div style=\"display: inline-flex\">{{ data.name }} </div><div v-show=\"data.children.length!==0\" style=\"display: inline-flex;color: #409EFF\">({{data.children.length}})</div>\r\n                        </template>\r\n                    </el-cascader>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"dbConfig\" label=\"数据库/文件\">\r\n                <template #default=\"scope\">\r\n                    <div v-if=\"showSql\">\r\n                            <el-select clearable  v-model=\"scope.row.operateData\" placeholder=\"数据库\">\r\n                                <el-option\r\n                                        v-for=\"item in dbOptions\"\r\n                                        :key=\"item.id\"\r\n                                        :label=\"item.dbName\"\r\n                                        :value=\"item.id\"\r\n                                >\r\n                                </el-option>\r\n                            </el-select>\r\n                    </div>\r\n                    <div v-if=\"showSql === false\" >\r\n                        <input type=\"file\" @change=\"addFile\" ref=\"fileInput\"/>\r\n                    </div>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"params\" label=\"参数(SQL)\">\r\n                <template #default=\"scope\">\r\n                    <el-input :rows=\"1\" type=\"textarea\" v-model=\"scope.row.params\" placeholder=\"SQL\"></el-input>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"状态\" width=\"50\">\r\n                <template #default=\"scope\">\r\n                    <el-switch\r\n                            v-model=\"scope.row.status\"\r\n                            active-color=\"#13ce66\"\r\n                            inactive-color=\"#ff4949\"\r\n                            :active-value = \"0\"\r\n                            :inactive-value = \"1\"\r\n                    />\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"right\" label=\"操作\">\r\n                <template #default=\"scope\">\r\n                    <span>\r\n                        <slot name=\"func\" :data=\"scope\">\r\n                            <el-button @click=\"roundData.push(setup_teardown)\">+</el-button>\r\n                            <el-button v-if=\"scope.$index!==0\" @click=\"roundData.splice(scope.$index,1)\">-</el-button>\r\n                        </slot>\r\n\r\n                    </span>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {reactive, toRefs} from \"@vue/reactivity\";\r\n    import {Sort} from \"@element-plus/icons\"\r\n    import request from \"../../../utils/request\";\r\n    import Sortable from \"sortablejs\";\r\n\r\n    export default {\r\n        name: \"setupTearDown\",\r\n        components:{Sort},\r\n        props:{\r\n            // 前置后置数据\r\n            roundData:{\r\n                default:[{}]\r\n            },\r\n            mySetupProps: {\r\n                default: {\r\n                    children: 'children',\r\n                    label: 'name',\r\n                    value: 'id'\r\n                }\r\n            }\r\n        },\r\n        watch:{\r\n            // 监听数据内值是否发生变化\r\n            roundData:{\r\n                handler(newVal, oldVal) {\r\n                    newVal.forEach((item)=>{\r\n                        if (item!=null){\r\n                            if (item.actionId!==undefined && item.actionId !==null && item.actionId !== \"\"){\r\n                                if (item.actionId.length >1){\r\n                                    item.actionId = item.actionId[item.actionId.length - 1]\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                    this.$emit(\"SonRoundData\",newVal)\r\n                },\r\n                deep: true\r\n            },\r\n            actionName:{\r\n                handler(newVal, oldVal) {\r\n                    this.showSql = newVal.includes(\"SQL\");\r\n                }\r\n            }\r\n        },\r\n        setup(){\r\n            const state = reactive({\r\n                dbOptions:[],\r\n                setup_teardown:{}\r\n            })\r\n            return {\r\n                ...toRefs(state),\r\n            }\r\n        },\r\n        data(){\r\n            return{\r\n                actionOption:[],\r\n                actionName:'database',\r\n                showSql:false\r\n            }\r\n        },\r\n        created(){\r\n            this.envDetail()\r\n            this.actionOptionInit()\r\n            this.dbOptionInit()\r\n        },\r\n        mounted() {\r\n            this.initSort()\r\n        },\r\n        methods:{\r\n            tabStyle(){\r\n                return {background:'#eef1f6',color:'#606266'}\r\n            },\r\n            tab_row_style(){\r\n                return { \"color\":\"#3d3c3c\",'font-size':'13px'}\r\n            },\r\n            envDetail(){\r\n\r\n            },\r\n            // 表格拖拽\r\n            initSort() {\r\n                const tableBody = document.querySelector('#preFix tbody');\r\n                const sortable = new Sortable(tableBody, {\r\n                    animation: 1000,\r\n                    onEnd: (evt) => {\r\n                        const currRow = this.Pre_Post_Fix.splice(evt.oldIndex, 1)[0]\r\n                        this.Pre_Post_Fix.splice(evt.newIndex, 0, currRow)\r\n                    }\r\n                })\r\n            },\r\n            // 初始化前置后置操作\r\n            actionOptionInit(){\r\n                request.post(\"/api/action/teardown\").then(res=>{\r\n                    this.actionOption = res.data\r\n                })\r\n            },\r\n            dbOptionInit(){\r\n                const envId = localStorage.getItem(\"envId\")\r\n                request.get(\"/api/env//dbOptions/\"+envId).then(\r\n                    res=>{\r\n                        this.dbOptions = res.data\r\n                    }\r\n                )\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./setup_teardown.vue?vue&type=template&id=317fbfcf\"\nimport script from \"./setup_teardown.vue?vue&type=script&lang=js\"\nexport * from \"./setup_teardown.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\dujun\\\\Desktop\\\\vue\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}