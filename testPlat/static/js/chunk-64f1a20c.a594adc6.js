(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64f1a20c"],{"487c":function(e,t,n){"use strict";n.r(t);n("d3b7"),n("159b"),n("b0c0"),n("a434");var o=n("7a23"),a=n("e9b7"),c=n("934a"),l=n("7135"),r=n("b775"),u=n("2a40"),i=n("6c02"),d=n("aa47"),b=n("f014"),p=n("b591"),s={id:"new-plan"},f={id:"plan-left"},O={class:"case-info"},j={class:"case-info"},m=Object(o["createTextVNode"])("保存"),v={id:"plan-right"},h={id:"addCase"},w=Object(o["createTextVNode"])("添加用例"),V={id:"case-list"},C=Object(o["createTextVNode"])("确认"),N=Object(o["createTextVNode"])("+"),x=Object(o["createTextVNode"])("-"),y=Object(o["createTextVNode"])("+"),k=Object(o["createTextVNode"])("-"),_={setup:function(e){var t=u["a"].tabRowStyle("left"),n=Object(i["d"])(),_=Object(i["c"])(),I=Object(o["reactive"])({name:"",tryCount:1,isClock:0,clock:"0 0 0 1/1 * ?",isSendEmail:0,sendEmail:"",browserType:"",planType:1,planParam:{caseIds:[]},setUpId:[],tearDownId:[]}),S=[{name:"Chrome",value:"Chrome"},{name:"Firefox",value:"Firefox"}],E=function(){Q(),r["a"].post("/api/plan/save",I).then((function(e){u["a"].toast(e),n.go(-1)}))},D=Object(o["ref"])([]),g={children:"children",label:"name"},B=function(){var e={caseType:1};r["a"].post("/api/webCase/caseList",e).then((function(e){D.value=e.data}))},T=function(e){var t=[];$.value=[],e.forEach((function(e,n){t.push(e.id),e.dropId=n+1,$.value.push(e)})),I.planParam.caseIds=t},P=Object(o["ref"])(null),U=function(){var e=_.query.plan;if(void 0!==e){var t=JSON.parse(e);P.value=t.id,I.name=t.name,I.browserType=t.browserType,I.clock=t.clock,I.clockExecCount=t.clockExecCount,I.envId=t.envId,I.id=t.id,I.isClock=t.isClock,I.isSendEmail=t.isSendEmail,I.planParam=t.planParam,I.planType=t.planType,I.remark=t.remark,I.sendEmail=t.sendEmail,I.status=t.status,I.tryCount=t.tryCount,R=t.planParam.caseIds}},F=Object(o["ref"])(!1),L=function(e){F.value=e},$=Object(o["ref"])([]),q=function(){F.value=!1},R=[],z=function(){r["a"].post("/api/plan/checked/case",R).then((function(e){e.data.forEach((function(e,t){e.dropId=t+1,$.value.push(e)}))}))},J=function(){var e=document.querySelector("#tableRowDrop tbody");new d["a"](e,{animation:200,onEnd:function(e){var t=e.oldIndex,n=e.newIndex,o=$.value[t];$.value[t]=$.value[n],$.value[n]=o,$.value[t].dropId=t+1,$.value[n].dropId=n+1;var a=[];$.value.forEach((function(e,t){a.push(e.id)})),I.planParam.caseIds=a}})},K=Object(o["ref"])([{id:null,name:"",actionId:"",actionKey:"",actionValue:"",status:0,planId:P.value,type:0}]),M=Object(o["ref"])([{id:null,name:"",status:0,actionId:"",actionKey:"",actionValue:"",planId:P.value}]),Q=function(){var e={setUp:K.value,tearDown:M.value};r["a"].post("/api/plan/round/update",e).then((function(e){u["a"].toast(e)}))},A=function(e,t){u["a"].messageBox((function(n){var o=e.row.id;null!=o&&p["a"].delSetup(o,(function(e){console.log(e)})),0===t?K.value.splice(e.$index,1):1===t&&M.value.splice(e.$index,1)}))},W=function(e){e.forEach((function(e){null==e.planId&&(e.planId=P.value)})),K.value=e},G=function(e){e.forEach((function(e){null==e.planId&&(e.planId=P.value)})),M.value=e},H=function(){null!=P.value&&p["a"].setupInit(P.value,(function(e){0!==e.data.setup.length&&(K.value=e.data.setup),0!==e.data.tearDown.length&&(M.value=e.data.tearDown)}))};return Object(o["onBeforeMount"])((function(){U(),B(),z(),H()})),Object(o["onMounted"])((function(){J()})),function(e,n){var r=Object(o["resolveComponent"])("el-option"),u=Object(o["resolveComponent"])("el-select"),i=Object(o["resolveComponent"])("el-form-item"),d=Object(o["resolveComponent"])("el-button"),p=Object(o["resolveComponent"])("el-table-column"),_=Object(o["resolveComponent"])("el-table"),B=Object(o["resolveComponent"])("el-tab-pane"),P=Object(o["resolveComponent"])("el-tabs");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",s,[Object(o["createElementVNode"])("div",f,[Object(o["createElementVNode"])("div",O,[Object(o["createVNode"])(Object(o["unref"])(l["a"]),{planInfo:Object(o["unref"])(I)},{"form-item":Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{label:"浏览器类型"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{placeholder:"请选择执行机",modelValue:Object(o["unref"])(I).browserType,"onUpdate:modelValue":n[0]||(n[0]=function(e){return Object(o["unref"])(I).browserType=e})},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(S,(function(e){return Object(o["createVNode"])(r,{key:e.name,label:e.name,value:e.value},null,8,["label","value"])})),64))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},8,["planInfo"])]),Object(o["createElementVNode"])("div",j,[Object(o["createVNode"])(d,{type:"primary",onClick:E},{default:Object(o["withCtx"])((function(){return[m]})),_:1})])]),Object(o["createElementVNode"])("div",v,[Object(o["createVNode"])(P,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(B,{label:"Web用例"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",h,[Object(o["createVNode"])(d,{type:"primary",onClick:n[1]||(n[1]=function(e){return Object(o["isRef"])(F)?F.value=!0:F=!0})},{default:Object(o["withCtx"])((function(){return[w]})),_:1})]),Object(o["createElementVNode"])("div",V,[Object(o["createVNode"])(Object(o["unref"])(a["a"]),{show_alter:Object(o["unref"])(F),onSonShowAlter:L},{myBody:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(Object(o["unref"])(c["a"]),{treeList:D.value,defaultProps:g,onFinalChecked:T,"selected-id":Object(o["unref"])(I).planParam.caseIds},null,8,["treeList","selected-id"])]})),submit:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{type:"primary",onClick:q},{default:Object(o["withCtx"])((function(){return[C]})),_:1})]})),_:1},8,["show_alter"]),Object(o["createVNode"])(_,{id:"tableRowDrop",data:Object(o["unref"])($),"cell-style":Object(o["unref"])(t),"header-cell-style":Object(o["unref"])(t),"row-key":"id"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{label:"序号"},{default:Object(o["withCtx"])((function(e){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.row.dropId),1)]})),_:1}),Object(o["createVNode"])(p,{label:"用例Id",prop:"id"}),Object(o["createVNode"])(p,{label:"用例名称",prop:"name"}),Object(o["createVNode"])(p,{label:"用例描述",prop:"remark"})]})),_:1},8,["data","cell-style","header-cell-style"])])]})),_:1}),Object(o["createVNode"])(B,{label:"前置操作"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(Object(o["unref"])(b["a"]),{roundData:K.value,onSonRoundData:W},{func:Object(o["withCtx"])((function(e){return[Object(o["createVNode"])(d,{onClick:n[2]||(n[2]=function(e){return K.value.push({})})},{default:Object(o["withCtx"])((function(){return[N]})),_:1}),0!==e.data.$index?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,onClick:function(t){return A(e.data,0)}},{default:Object(o["withCtx"])((function(){return[x]})),_:2},1032,["onClick"])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["roundData"])])]})),_:1}),Object(o["createVNode"])(B,{label:"后置操作"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(Object(o["unref"])(b["a"]),{roundData:M.value,onSonRoundData:G},{func:Object(o["withCtx"])((function(e){return[Object(o["createVNode"])(d,{onClick:n[3]||(n[3]=function(e){return M.value.push({})})},{default:Object(o["withCtx"])((function(){return[y]})),_:1}),0!==e.data.$index?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,onClick:function(t){return A(e.data,1)}},{default:Object(o["withCtx"])((function(){return[k]})),_:2},1032,["onClick"])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["roundData"])])]})),_:1})]})),_:1})])])}}},I=(n("ee13"),n("d959")),S=n.n(I);const E=S()(_,[["__scopeId","data-v-5a585631"]]);t["default"]=E},6504:function(e,t,n){},"90f2":function(e,t,n){"use strict";var o=n("7a23"),a=Object(o["defineComponent"])({name:"Sort"});const c={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},l=Object(o["createVNode"])("path",{fill:"currentColor",d:"M384 96a32 32 0 0 1 64 0v786.752a32 32 0 0 1-54.592 22.656L95.936 608a32 32 0 0 1 0-45.312h.128a32 32 0 0 1 45.184 0L384 805.632V96zm192 45.248a32 32 0 0 1 54.592-22.592L928.064 416a32 32 0 0 1 0 45.312h-.128a32 32 0 0 1-45.184 0L640 218.496V928a32 32 0 1 1-64 0V141.248z"},null,-1);function r(e,t,n,a,r,u){return Object(o["openBlock"])(),Object(o["createBlock"])("svg",c,[l])}a.render=r,a.__file="packages/components/Sort.vue",t["a"]=a},e9b7:function(e,t,n){"use strict";var o=n("7a23"),a=Object(o["createTextVNode"])("默认内容"),c={class:"dialog-footer"},l=Object(o["createTextVNode"])("关闭"),r=Object(o["createTextVNode"])("确认");function u(e,t,n,u,i,d){var b=Object(o["resolveComponent"])("el-button"),p=Object(o["resolveComponent"])("el-dialog");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(p,{modelValue:n.show_alter,"onUpdate:modelValue":t[2]||(t[2]=function(e){return n.show_alter=e}),title:n.title,width:"30%",left:""},{footer:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("span",c,[Object(o["createVNode"])(b,{onClick:t[0]||(t[0]=function(e){return n.show_alter=!1})},{default:Object(o["withCtx"])((function(){return[l]})),_:1}),Object(o["renderSlot"])(e.$slots,"submit",{},(function(){return[Object(o["createVNode"])(b,{type:"primary",onClick:t[1]||(t[1]=function(e){return n.show_alter=!1})},{default:Object(o["withCtx"])((function(){return[r]})),_:1})]}))])]})),default:Object(o["withCtx"])((function(){return[Object(o["renderSlot"])(e.$slots,"myBody",{},(function(){return[a]}))]})),_:3},8,["modelValue","title"])])}var i={props:{title:{default:"提示"},show_alter:{default:!1}},watch:{show_alter:function(e,t){this.$emit("sonShowAlter",e)}}},d=n("d959"),b=n.n(d);const p=b()(i,[["render",u]]);t["a"]=p},ee13:function(e,t,n){"use strict";n("6504")},f014:function(e,t,n){"use strict";n("b0c0"),n("a434");var o=n("7a23"),a={style:{display:"inline-flex"}},c={key:0},l={key:1},r=Object(o["createTextVNode"])("+"),u=Object(o["createTextVNode"])("-");function i(e,t,n,i,d,b){var p=Object(o["resolveComponent"])("Sort"),s=Object(o["resolveComponent"])("el-icon"),f=Object(o["resolveComponent"])("el-table-column"),O=Object(o["resolveComponent"])("el-input"),j=Object(o["resolveComponent"])("el-cascader"),m=Object(o["resolveComponent"])("el-option"),v=Object(o["resolveComponent"])("el-select"),h=Object(o["resolveComponent"])("el-switch"),w=Object(o["resolveComponent"])("el-button"),V=Object(o["resolveComponent"])("el-table");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(V,{"row-key":"id",id:"preFix","row-style":b.tab_row_style(),"header-cell-style":b.tabStyle(),data:n.roundData},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{width:"20px",prop:"fill"},{default:Object(o["withCtx"])((function(e){return[Object(o["createVNode"])(s,{size:10},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p)]})),_:1})]})),_:1}),Object(o["createVNode"])(f,{prop:"name",label:"描述"},{default:Object(o["withCtx"])((function(e){return[Object(o["createVNode"])(O,{modelValue:e.row.name,"onUpdate:modelValue":function(t){return e.row.name=t},placeholder:"描述"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(o["createVNode"])(f,{prop:"actionID",label:"操作"},{default:Object(o["withCtx"])((function(e){return[Object(o["createVNode"])(j,{"popper-options":{boundariesElement:"viewport",removeOnDestroy:!0},"show-all-levels":!1,clearable:"",modelValue:e.row.actionId,"onUpdate:modelValue":function(t){return e.row.actionId=t},options:d.actionOption,props:n.mySetupProps},{default:Object(o["withCtx"])((function(e){e.node;var t=e.data;return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(d.actionName=t.actionKey)+" ",1),Object(o["createElementVNode"])("div",a,Object(o["toDisplayString"])(t.name),1),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{style:{display:"inline-flex",color:"#409EFF"}},"("+Object(o["toDisplayString"])(t.children.length)+")",513),[[o["vShow"],0!==t.children.length]])]})),_:2},1032,["modelValue","onUpdate:modelValue","options","props"])]})),_:1}),Object(o["createVNode"])(f,{prop:"dbConfig",label:"数据库/文件"},{default:Object(o["withCtx"])((function(n){return[d.showSql?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",c,[Object(o["createVNode"])(v,{clearable:"",modelValue:n.row.operateData,"onUpdate:modelValue":function(e){return n.row.operateData=e},placeholder:"数据库"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.dbOptions,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:e.id,label:e.dbName,value:e.id},null,8,["label","value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue"])])):Object(o["createCommentVNode"])("",!0),!1===d.showSql?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[Object(o["createElementVNode"])("input",{type:"file",onChange:t[0]||(t[0]=function(){return e.addFile&&e.addFile.apply(e,arguments)}),ref:"fileInput"},null,544)])):Object(o["createCommentVNode"])("",!0)]})),_:1}),Object(o["createVNode"])(f,{prop:"params",label:"参数(SQL)"},{default:Object(o["withCtx"])((function(e){return[Object(o["createVNode"])(O,{rows:1,type:"textarea",modelValue:e.row.params,"onUpdate:modelValue":function(t){return e.row.params=t},placeholder:"SQL"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(o["createVNode"])(f,{label:"状态",width:"50"},{default:Object(o["withCtx"])((function(e){return[Object(o["createVNode"])(h,{modelValue:e.row.status,"onUpdate:modelValue":function(t){return e.row.status=t},"active-color":"#13ce66","inactive-color":"#ff4949","active-value":0,"inactive-value":1},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(o["createVNode"])(f,{prop:"right",label:"操作"},{default:Object(o["withCtx"])((function(a){return[Object(o["createElementVNode"])("span",null,[Object(o["renderSlot"])(e.$slots,"func",{data:a},(function(){return[Object(o["createVNode"])(w,{onClick:t[1]||(t[1]=function(t){return n.roundData.push(e.setup_teardown)})},{default:Object(o["withCtx"])((function(){return[r]})),_:1}),0!==a.$index?(Object(o["openBlock"])(),Object(o["createBlock"])(w,{key:0,onClick:function(e){return n.roundData.splice(a.$index,1)}},{default:Object(o["withCtx"])((function(){return[u]})),_:2},1032,["onClick"])):Object(o["createCommentVNode"])("",!0)]}))])]})),_:3})]})),_:3},8,["row-style","header-cell-style","data"])])}var d=n("5530"),b=(n("d3b7"),n("159b"),n("caad"),n("2532"),n("a1e9")),p=n("90f2"),s=n("b775"),f=n("aa47"),O={name:"setupTearDown",components:{Sort:p["a"]},props:{roundData:{default:[{}]},mySetupProps:{default:{children:"children",label:"name",value:"id"}}},watch:{roundData:{handler:function(e,t){e.forEach((function(e){null!=e&&void 0!==e.actionId&&null!==e.actionId&&""!==e.actionId&&e.actionId.length>1&&(e.actionId=e.actionId[e.actionId.length-1])})),this.$emit("SonRoundData",e)},deep:!0},actionName:{handler:function(e,t){this.showSql=e.includes("SQL")}}},setup:function(){var e=Object(b["p"])({dbOptions:[],setup_teardown:{}});return Object(d["a"])({},Object(b["z"])(e))},data:function(){return{actionOption:[],actionName:"database",showSql:!1}},created:function(){this.envDetail(),this.actionOptionInit(),this.dbOptionInit()},mounted:function(){this.initSort()},methods:{tabStyle:function(){return{background:"#eef1f6",color:"#606266"}},tab_row_style:function(){return{color:"#3d3c3c","font-size":"13px"}},envDetail:function(){},initSort:function(){var e=this,t=document.querySelector("#preFix tbody");new f["a"](t,{animation:1e3,onEnd:function(t){var n=e.Pre_Post_Fix.splice(t.oldIndex,1)[0];e.Pre_Post_Fix.splice(t.newIndex,0,n)}})},actionOptionInit:function(){var e=this;s["a"].post("/api/action/teardown").then((function(t){e.actionOption=t.data}))},dbOptionInit:function(){var e=this,t=localStorage.getItem("envId");s["a"].get("/api/env//dbOptions/"+t).then((function(t){e.dbOptions=t.data}))}}},j=n("d959"),m=n.n(j);const v=m()(O,[["render",i]]);t["a"]=v}}]);
//# sourceMappingURL=chunk-64f1a20c.a594adc6.js.map